(window.webpackJsonp=window.webpackJsonp||[]).push([["SysOwnership"],{b3c5:function(e,t,n){"use strict";n.r(t);var a,i=n("50da"),s=n("2e90"),o=n("e719"),r=n("3617"),l=n("600f"),d=n("402f");let c=class extends d.f{constructor(){super(...arguments),this.pageNumber=1,this.tableTitle="已配置人员",this.columnSlots=["actions","identity"],this.tableHeaders=[{text:"姓名",align:"center",value:"employeeName"},{text:"身份",align:"center",value:"identity"},{text:"操作",align:"center",value:"actions",sortable:!1}],this.identity=new Array,this.organizationId="",this.departmentId=""}onPageNumberChanged(e){this.fetchAssignedByPage(e,this.departmentId)}onDepartmentIdChanged(e){this.pageNumber=1,this.fetchAssignedByPage(this.pageNumber,e)}pagination(e){this.pageNumber=e}mounted(){this.skeletonLoading=!0,this.getConstants()}getBaseService(){return this.sysEmployeeService}getItemKey(){return"userId"}getDomainName(){return"SysOwnershipView"}getConstants(){this.$enums.getItem(d.h.IDENTITY).then(e=>{this.identity=e})}parseIdentity(e){return"number"==typeof e.identity?this.identity[e.identity].text:""}assign(){this.$navigation.goToDetail("SysOwnershipAllocatable",{organizationId:this.organizationId,departmentId:this.departmentId})}fetchAssignedByPage(e,t){this.tableLoading=!0,this.sysEmployeeService.fetchAssignedByPage({pageNumber:e-1,pageSize:this.pageSize},{departmentId:t}).then(e=>{const t=e.data;this.tableLoading=!1,this.tableItems=t.content,this.totalPages=t.totalPages,this.totalItems=parseInt(t.totalElements,0),this.skeletonLoading&&(this.skeletonLoading=!1)}).catch(()=>{this.tableLoading=!1})}get isDisabled(){return!this.organizationId||!this.departmentId}deleteAllocatable(e){this.sysEmployeeService.deleteAllocatable({organizationId:this.organizationId,departmentId:this.departmentId,employeeId:e.employeeId}).then(()=>{this.fetchAssignedByPage(this.pageNumber,this.departmentId)})}};Object(i.a)([o.Inject,Object(i.b)("design:type","function"==typeof(a=void 0!==l.j&&l.j)?a:Object)],c.prototype,"sysEmployeeService",void 0),Object(i.a)([Object(s.g)("pageNumber"),Object(i.b)("design:type",Function),Object(i.b)("design:paramtypes",[Number]),Object(i.b)("design:returntype",void 0)],c.prototype,"onPageNumberChanged",null),Object(i.a)([Object(s.g)("departmentId"),Object(i.b)("design:type",Function),Object(i.b)("design:paramtypes",[String]),Object(i.b)("design:returntype",void 0)],c.prototype,"onDepartmentIdChanged",null),c=Object(i.a)([Object(s.a)({components:{HContainer:r.d,HActionButton:r.a,HOrganizationTree:r.o,HDepartmentTree:r.g}})],c);var g=c,p=n("ba34"),m=n("eb4c"),b=n.n(m),h=n("bc77"),u=n("6fc4"),y=n("3134"),I=n("a4fc"),v=Object(p.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h-container",[n("v-card",{staticClass:"pl-5 pr-5"},[n("v-row",[n("v-col",{attrs:{cols:"3"}},[n("h-organization-tree",{model:{value:e.organizationId,callback:function(t){e.organizationId=t},expression:"organizationId"}})],1),n("v-col",{attrs:{cols:"3"}},[n("h-department-tree",{attrs:{"organization-id":e.organizationId},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}})],1),n("v-col",{attrs:{cols:"6"}},[n("h-table",{attrs:{"show-select":"","external-pagination":"","table-headers":e.tableHeaders,"table-items":e.tableItems,"page-size":e.pageSize,"total-items":e.totalItems,"total-pages":e.totalPages,"table-title":e.tableTitle,"table-loading":e.tableLoading,"skeleton-loading":e.skeletonLoading,"column-slots":e.columnSlots,"item-key":e.getItemKey()},on:{pagination:function(t){return e.pagination(t)}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-btn",{staticClass:"mr-2",attrs:{color:"primary",dark:"",disabled:e.isDisabled},on:{click:function(t){return e.assign()}}},[e._v("配置人员")])]},proxy:!0},{key:"item.identity",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.parseIdentity(n))+" ")]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("h-action-button",{attrs:{remove:""},on:{remove:function(t){return e.deleteAllocatable(a)}}})]}}],null,!0)})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=v.exports;b()(v,{VBtn:h.a,VCard:u.a,VCol:y.a,VRow:I.a})}}]);