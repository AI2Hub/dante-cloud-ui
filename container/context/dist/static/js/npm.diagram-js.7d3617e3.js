(window.webpackJsonp=window.webpackJsonp||[]).push([["npm.diagram-js"],{"00de":function(t,e,n){"use strict";var i=n("0f13"),o=n("41d3"),r=n("b2ea"),c=n("f6d6");function a(t,e,n){this._eventBus=e,this._overlays=n;var i=Object(r.isDefined)(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}a.$inject=["config.contextPad","eventBus","overlays"],a.prototype._init=function(){var t=this._eventBus,e=this;t.on("selection.changed",(function(t){var n=t.newSelection;1===n.length?e.open(n[0]):e.close()})),t.on("elements.delete",(function(t){var n=t.elements;Object(r.forEach)(n,(function(t){e.isOpen(t)&&e.close()}))})),t.on("element.changed",(function(t){var n=t.element,i=e._current;i&&i.element===n&&e.open(n,!0)}))},a.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("contextPad.getProviders",t,(function(t){t.providers.push(e)}))},a.prototype.getEntries=function(t){var e=this._getProviders(),n={};return Object(r.forEach)(e,(function(e){var i=e.getContextPadEntries(t);Object(r.isFunction)(i)?n=i(n):Object(r.forEach)(i,(function(t,e){n[e]=t}))})),n},a.prototype.trigger=function(t,e,n){var i,o,a=this._current.element,s=this._current.entries,u=e.delegateTarget||e.target;if(!u)return e.preventDefault();if(i=s[Object(c.attr)(u,"data-action")].action,o=e.originalEvent||e,Object(r.isFunction)(i)){if("click"===t)return i(o,a,n)}else if(i[t])return i[t](o,a,n);e.preventDefault()},a.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},a.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},a.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this.getPad(t),i=n.html;Object(r.forEach)(e,(function(t,e){var n,o=t.group||"default",a=Object(c.domify)(t.html||'<div class="entry" draggable="true"></div>');Object(c.attr)(a,"data-action",e),(n=Object(c.query)("[data-group="+o+"]",i))||(n=Object(c.domify)('<div class="group" data-group="'+o+'"></div>'),i.appendChild(n)),n.appendChild(a),t.className&&function(t,e){var n=Object(c.classes)(t);(Object(r.isArray)(e)?e:e.split(/\s+/g)).forEach((function(t){n.add(t)}))}(a,t.className),t.title&&Object(c.attr)(a,"title",t.title),t.imageUrl&&a.appendChild(Object(c.domify)('<img src="'+t.imageUrl+'">'))})),Object(c.classes)(i).add("open"),this._current={element:t,pad:n,entries:e},this._eventBus.fire("contextPad.open",{current:this._current})},a.prototype.getPad=function(t){if(this.isOpen())return this._current.pad;var e=this,n=this._overlays,i=Object(c.domify)('<div class="djs-context-pad"></div>'),o=Object(r.assign)({html:i},this._overlaysConfig);c.delegate.bind(i,".entry","click",(function(t){e.trigger("click",t)})),c.delegate.bind(i,".entry","dragstart",(function(t){e.trigger("dragstart",t)})),c.event.bind(i,"mousedown",(function(t){t.stopPropagation()})),this._overlayId=n.add(t,"context-pad",o);var a=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:t,pad:a}),a},a.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},a.prototype.isOpen=function(t){return!(!this._current||t&&this._current.element!==t)};e.a={__depends__:[i.a,o.a],contextPad:["type",a]}},"02d8":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("b2ea");function o(t,e){this._actions={};var n=this;t.on("diagram.init",(function(){n._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:n})}))}function r(t,e){return new Error(t+" "+e)}o.$inject=["eventBus","injector"],o.prototype._registerDefaultActions=function(t){var e=t.get("commandStack",!1),n=t.get("modeling",!1),o=t.get("selection",!1),r=t.get("zoomScroll",!1),c=t.get("copyPaste",!1),a=t.get("canvas",!1),s=t.get("rules",!1),u=t.get("keyboardMove",!1),h=t.get("keyboardMoveSelection",!1);e&&(this.register("undo",(function(){e.undo()})),this.register("redo",(function(){e.redo()}))),c&&o&&this.register("copy",(function(){var t=o.get();c.copy(t)})),c&&this.register("paste",(function(){c.paste()})),r&&this.register("stepZoom",(function(t){r.stepZoom(t.value)})),a&&this.register("zoom",(function(t){a.zoom(t.value)})),n&&o&&s&&this.register("removeSelection",(function(){var t=o.get();if(t.length){var e,r=s.allowed("elements.delete",{elements:t});!1!==r&&(e=Object(i.isArray)(r)?r:t).length&&n.removeElements(e.slice())}})),u&&this.register("moveCanvas",(function(t){u.moveCanvas(t)})),h&&this.register("moveSelection",(function(t){h.moveSelection(t.direction,t.accelerated)}))},o.prototype.trigger=function(t,e){if(!this._actions[t])throw r(t,"is not a registered action");return this._actions[t](e)},o.prototype.register=function(t,e){var n=this;if("string"==typeof t)return this._registerAction(t,e);Object(i.forEach)(t,(function(t,e){n._registerAction(e,t)}))},o.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw r(t,"is already registered");this._actions[t]=e},o.prototype.unregister=function(t){if(!this.isRegistered(t))throw r(t,"is not a registered action");this._actions[t]=void 0},o.prototype.getActions=function(){return Object.keys(this._actions)},o.prototype.isRegistered=function(t){return!!this._actions[t]}},"04ae":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("9896");var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function o(t){return(t=""+t)&&t.replace(/[&<>"']/g,(function(t){return i[t]}))}},"0e13":function(t,e,n){"use strict";function i(t,e){if("function"!=typeof e)throw new Error("removeFn iterator must be a function");if(t){for(var n;n=t[0];)e(n);return t}}n.d(e,"a",(function(){return i}))},"0f13":function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6"),r=n("ac91"),c=n("bbf8"),a=n("3449");function s(t){return!0}function u(t){return Object(r.d)(t)||Object(r.c)(t)}function h(t,e,n){var h=this;function d(n,i,o){var c,a;(function(t,e){return!(v[t]||r.d)(e)})(n,i)||(o?a=e.getGraphics(o):(c=i.delegateTarget||i.target)&&(a=c,o=e.get(a)),a&&o&&!1===t.fire(n,{element:o,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var l={};function p(t){return l[t]}var f={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},v={"element.contextmenu":s,"element.mousedown":u,"element.mouseup":u,"element.click":u,"element.dblclick":u};function g(t,e,n,i){var r=l[n]=function(t){d(n,t)};i&&(v[n]=i),r.$delegate=o.delegate.bind(t,"svg, .djs-element",e,r)}function y(t,e,n){var i=p(n);i&&o.delegate.unbind(t,e,i.$delegate)}t.on("canvas.destroy",(function(t){var e;e=t.svg,Object(i.forEach)(f,(function(t,n){y(e,n,t)}))})),t.on("canvas.init",(function(t){var e;e=t.svg,Object(i.forEach)(f,(function(t,n){g(e,n,t)}))})),t.on(["shape.added","connection.added"],(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.createHit",{element:n,gfx:i})})),t.on(["shape.changed","connection.changed"],500,(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.updateHit",{element:n,gfx:i})})),t.on("interactionEvents.createHit",500,(function(t){var e=t.element,n=t.gfx;h.createDefaultHit(e,n)})),t.on("interactionEvents.updateHit",(function(t){var e=t.element,n=t.gfx;h.updateDefaultHit(e,n)}));var b=j("djs-hit djs-hit-stroke"),m=j("djs-hit djs-hit-click-stroke"),_={all:j("djs-hit djs-hit-all"),"click-stroke":m,stroke:b};function j(t,e){return e=Object(i.assign)({stroke:"white",strokeWidth:15},e||{}),n.cls(t,["no-fill","no-border"],e)}function x(t,e){var n=_[e];if(!n)throw new Error("invalid hit type <"+e+">");return Object(c.c)(t,n),t}function O(t,e){Object(c.a)(t,e)}this.removeHits=function(t){var e=Object(o.queryAll)(".djs-hit",t);Object(i.forEach)(e,c.k)},this.createDefaultHit=function(t,e){var n,i=t.waypoints,o=t.isFrame;return i?this.createWaypointsHit(e,i):(n=o?"stroke":"all",this.createBoxHit(e,n,{width:t.width,height:t.height}))},this.createWaypointsHit=function(t,e){var n=Object(a.b)(e);return x(n,"stroke"),O(t,n),n},this.createBoxHit=function(t,e,n){n=Object(i.assign)({x:0,y:0},n);var o=Object(c.g)("rect");return x(o,e),Object(c.c)(o,n),O(t,o),o},this.updateDefaultHit=function(t,e){var n=Object(o.query)(".djs-hit",e);if(n)return t.waypoints?Object(a.c)(n,t.waypoints):Object(c.c)(n,{width:t.width,height:t.height}),n},this.fire=d,this.triggerMouseEvent=function(t,e,n){var i=f[t];if(!i)throw new Error("unmapped DOM event name <"+t+">");return d(i,e,n)},this.mouseHandler=p,this.registerEvent=g,this.unregisterEvent=y}h.$inject=["eventBus","elementRegistry","styles"];e.a={__init__:["interactionEvents"],interactionEvents:["type",h]}},1046:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("b2ea"),o=n("b6f8");function r(t){return Object(i.assign)({original:t.point.original||t.point},t.actual)}function c(t,e){this._elementRegistry=t,this._graphicsFactory=e}c.$inject=["elementRegistry","graphicsFactory"],c.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var i=this.getDockingPoint(t,e,!0),o=this.getDockingPoint(t,n),c=t.waypoints.slice(i.idx+1,o.idx);return c.unshift(r(i)),c.push(r(o)),c},c.prototype.getDockingPoint=function(t,e,n){var i,o,r=t.waypoints;return{point:o=r[i=n?0:r.length-1],actual:this._getIntersection(e,t,n)||o,idx:i}},c.prototype._getIntersection=function(t,e,n){var i=this._getShapePath(t),r=this._getConnectionPath(e);return Object(o.d)(i,r,n)},c.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},c.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},c.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)}},"15f9":function(t,e,n){"use strict";var i=n("b2ea"),o=n("a092"),r=n.n(o),c=n("414d"),a=n("0e13"),s=n("971a");function u(t,e,n){s.a.call(this,e);var o=t.get("movePreview",!1);e.on("shape.move.start",1400,(function(t){var e=t.context,n=e.shapes,i=e.validatedShapes;e.shapes=h(n),e.validatedShapes=h(i)})),o&&e.on("shape.move.start",250,(function(t){var e=t.context,n=e.shapes,r=[];Object(i.forEach)(n,(function(t){Object(i.forEach)(t.labels,(function(n){n.hidden||-1!==e.shapes.indexOf(n)||r.push(n),t.labelTarget&&r.push(t)}))})),Object(i.forEach)(r,(function(t){o.makeDraggable(e,t,!0)}))})),this.preExecuted("elements.move",1400,(function(t){var e=t.context.closure,n=e.enclosedElements,o=[];Object(i.forEach)(n,(function(t){Object(i.forEach)(t.labels,(function(t){n[t.id]||o.push(t)}))})),e.addAll(o)})),this.preExecute(["connection.delete","shape.delete"],(function(t){var e=t.context,i=e.connection||e.shape;Object(a.a)(i.labels,(function(t){n.removeShape(t,{nested:!0})}))})),this.execute("shape.delete",(function(t){var e=t.context,n=e.shape,i=n.labelTarget;i&&(e.labelTargetIndex=Object(c.indexOf)(i.labels,n),e.labelTarget=i,n.labelTarget=null)})),this.revert("shape.delete",(function(t){var e=t.context,n=e.shape,i=e.labelTarget,o=e.labelTargetIndex;i&&(Object(c.add)(i.labels,n,o),n.labelTarget=i)}))}function h(t){return Object(i.filter)(t,(function(e){return-1===t.indexOf(e.labelTarget)}))}r()(u,s.a),u.$inject=["injector","eventBus","modeling"];e.a={__init__:["labelSupport"],labelSupport:["type",u]}},1680:function(t,e,n){"use strict";var i=n("59ef");function o(t,e,n,o){t.on("element.changed",(function(o){var r=o.element;(r.parent||r===e.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&t.fire(Object(i.f)(r)+".changed",o)})),t.on("elements.changed",(function(e){var n=e.elements;n.forEach((function(e){t.fire("element.changed",{element:e})})),o.updateContainments(n)})),t.on("shape.changed",(function(t){o.update("shape",t.element,t.gfx)})),t.on("connection.changed",(function(t){o.update("connection",t.element,t.gfx)}))}o.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];e.a={__init__:["changeSupport"],changeSupport:["type",o]}},"172a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a}));var i=n("b2ea");function o(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.altKey}function r(t){return!t.altKey&&(t.ctrlKey||t.metaKey)}function c(t,e){return-1!==(t=Object(i.isArray)(t)?t:[t]).indexOf(e.key)||-1!==t.indexOf(e.keyCode)}function a(t){return t.shiftKey}},"17a5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));function i(t,e){var n=this;e=e||1e3,t.on(["render.shape","render.connection"],e,(function(t,e){var i=t.type,o=e.element,r=e.gfx,c=e.attrs;if(n.canRender(o))return"render.shape"===i?n.drawShape(r,o,c):n.drawConnection(r,o,c)})),t.on(["render.getShapePath","render.getConnectionPath"],e,(function(t,e){if(n.canRender(e))return"render.getShapePath"===t.type?n.getShapePath(e):n.getConnectionPath(e)}))}i.prototype.canRender=function(){},i.prototype.drawShape=function(){},i.prototype.drawConnection=function(){},i.prototype.getShapePath=function(){},i.prototype.getConnectionPath=function(){}},"1aec":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("38f0"),o=n("b2ea");function r(){this._uid=12}r.prototype.createRoot=function(t){return this.create("root",t)},r.prototype.createLabel=function(t){return this.create("label",t)},r.prototype.createShape=function(t){return this.create("shape",t)},r.prototype.createConnection=function(t){return this.create("connection",t)},r.prototype.create=function(t,e){return(e=Object(o.assign)({},e||{})).id||(e.id=t+"_"+this._uid++),Object(i.c)(t,e)}},"1c00":function(t,e,n){"use strict";var i=n("b2ea");function o(t){return t&&t[t.length-1]}function r(t){return t.y}function c(t){return t.x}var a={left:c,center:c,right:function(t){return t.x+t.width},top:r,middle:r,bottom:function(t){return t.y+t.height}};function s(t){this._modeling=t}s.$inject=["modeling"],s.prototype._getOrientationDetails=function(t){var e="x",n="width";return-1!==["top","bottom","middle"].indexOf(t)&&(e="y",n="height"),{axis:e,dimension:n}},s.prototype._isType=function(t,e){return-1!==e.indexOf(t)},s.prototype._alignmentPosition=function(t,e){var n,r,c,a=this._getOrientationDetails(t),s=a.axis,u=a.dimension,h={},d={},l=!1;if(this._isType(t,["left","top"]))h[t]=e[0][s];else if(this._isType(t,["right","bottom"]))c=o(e),h[t]=c[s]+c[u];else if(this._isType(t,["center","middle"])){if(Object(i.forEach)(e,(function(t){var e=t[s]+Math.round(t[u]/2);d[e]?d[e].elements.push(t):d[e]={elements:[t],center:e}})),n=Object(i.sortBy)(d,(function(t){return t.elements.length>1&&(l=!0),t.elements.length})),l)return h[t]=o(n).center,h;r=e[0],c=o(e=Object(i.sortBy)(e,(function(t){return t[s]+t[u]}))),h[t]=function(t,e){return Math.round((t[s]+e[s]+e[u])/2)}(r,c)}return h},s.prototype.trigger=function(t,e){var n=this._modeling,o=Object(i.filter)(t,(function(t){return!(t.waypoints||t.host||t.labelTarget)}));if(!(o.length<2)){var r=a[e],c=Object(i.sortBy)(o,r),s=this._alignmentPosition(e,c);n.alignElements(c,s)}};e.a={__init__:["alignElements"],alignElements:["type",s]}},"210c":function(t,e,n){"use strict";var i=n("8aa3"),o=n("2e40"),r=n("ac91"),c=n("172a");function a(t,e,n,i,o,c){this._dragging=n,this._mouse=c;var a=this,u=i.get("keyboard",!1);o.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",1500,(function(t){if(Object(r.a)(t))return a.activateMove(t.originalEvent,!0),!1})),u&&u.addListener(1500,(function(t){if(s(t.keyEvent)&&!a.isActive()){var e=a._mouse.getLastMoveEvent();a.activateMove(e,!!e)}}),"keyboard.keydown"),u&&u.addListener(1500,(function(t){s(t.keyEvent)&&a.isActive()&&a.toggle()}),"keyboard.keyup"),t.on("hand.end",(function(e){var n=e.originalEvent.target;if(!(e.hover||n instanceof SVGElement))return!1;t.once("hand.ended",(function(){a.activateMove(e.originalEvent,{reactivate:!0})}))})),t.on("hand.move.move",(function(t){var n=e.viewbox().scale;e.scroll({dx:t.dx*n,dy:t.dy*n})})),t.on("hand.move.end",(function(e){var n=e.context.reactivate;return!Object(r.a)(e)&&n&&t.once("hand.move.ended",(function(t){a.activateHand(t.originalEvent,!0,!0)})),!1}))}function s(t){return Object(c.c)(" ",t)}a.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],a.prototype.activateMove=function(t,e,n){"object"==typeof e&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:"grab",data:{context:n||{}}})},a.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:"grab",data:{context:{reactivate:n}}})},a.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateHand(t,!!t)},a.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^(hand|hand\.move)$/.test(t.prefix)};e.a={__depends__:[i.a,o.a],__init__:["handTool"],handTool:["type",a]}},"2e40":function(t,e,n){"use strict";function i(t){var e=this;function n(t){e._lastMoveEvent=t}this._lastMoveEvent=null,t.on("canvas.init",(function(t){(e._svg=t.svg).addEventListener("mousemove",n)})),t.on("canvas.destroy",(function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",n)}))}i.$inject=["eventBus"],i.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(t,e){var n=document.createEvent("MouseEvent"),i=t,o=e,r=t,c=e;n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,o,r,c,!1,!1,!1,!1,0,null);return n}(0,0)};e.a={__init__:["mouse"],mouse:["type",i]}},"2f93":function(t,e,n){"use strict";function i(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}n.d(e,"a",(function(){return i})),i.prototype.next=function(){return this._prefix+ ++this._counter}},"30f7":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a}));var i=n("b2ea");function o(t,e){if("x"===t){if(e>0)return"e";if(e<0)return"w"}if("y"===t){if(e>0)return"s";if(e<0)return"n"}return null}function r(t,e){var n=[];return Object(i.forEach)(t.concat(e),(function(o){var r=o.incoming,a=o.outgoing;Object(i.forEach)(r.concat(a),(function(i){var o=i.source,r=i.target;(c(t,o)||c(t,r)||c(e,o)||c(e,r))&&(c(n,i)||n.push(i))}))})),n}function c(t,e){return-1!==t.indexOf(e)}function a(t,e,n){var i=t.x,o=t.y,r=t.width,c=t.height,a=n.x,s=n.y;switch(e){case"n":return{x:i,y:o+s,width:r,height:c-s};case"s":return{x:i,y:o,width:r,height:c+s};case"w":return{x:i+a,y:o,width:r-a,height:c};case"e":return{x:i,y:o,width:r+a,height:c};default:throw new Error("unknown direction: "+e)}}},3449:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a}));var i=n("bbf8");function o(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function r(t){for(var e,n="",i=0;e=t[i];i++)n+=e.x+","+e.y+" ";return n}function c(t,e){var n=Object(i.g)("polyline");return Object(i.c)(n,{points:r(t)}),e&&Object(i.c)(n,e),n}function a(t,e){return Object(i.c)(t,{points:r(e)}),t}},"38f0":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return m}));var i=n("b2ea"),o=n("a092"),r=n.n(o),c=n("49cd"),a=n.n(c),s=new a.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),u=new a.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),h=new a.a({name:"attachers",collection:!0},{name:"host"}),d=new a.a({name:"outgoing",collection:!0},{name:"source"}),l=new a.a({name:"incoming",collection:!0},{name:"target"});function p(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),s.bind(this,"parent"),u.bind(this,"labels"),d.bind(this,"outgoing"),l.bind(this,"incoming")}function f(){p.call(this),s.bind(this,"children"),h.bind(this,"host"),h.bind(this,"attachers")}function v(){f.call(this)}function g(){f.call(this),u.bind(this,"labelTarget")}function y(){p.call(this),d.bind(this,"source"),l.bind(this,"target")}r()(f,p),r()(v,f),r()(g,f),r()(y,p);var b={connection:y,shape:f,label:g,root:v};function m(t,e){var n=b[t];if(!n)throw new Error("unknown type: <"+t+">");return Object(i.assign)(new n,e)}},3944:function(t,e,n){"use strict";var i=n("02d8");e.a={__init__:["editorActions"],editorActions:["type",i.a]}},"3a16":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("a092"),o=n.n(i),r=n("971a");function c(t){r.a.call(this,t),this.init()}c.$inject=["eventBus"],o()(c,r.a),c.prototype.addRule=function(t,e,n){var i=this;"string"==typeof t&&(t=[t]),t.forEach((function(t){i.canExecute(t,e,(function(t,e,i){return n(t)}),!0)}))},c.prototype.init=function(){}},"3cc8":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("b6f8");function o(){}o.prototype.layoutConnection=function(t,e){return[(e=e||{}).connectionStart||Object(i.e)(e.source||t.source),e.connectionEnd||Object(i.e)(e.target||t.target)]}},"414d":function(t,e,n){"use strict";function i(t,e){if(!t||!e)return-1;var n=t.indexOf(e);return-1!==n&&t.splice(n,1),n}function o(t,e,n){if(t&&e){"number"!=typeof n&&(n=-1);var i=t.indexOf(e);if(-1!==i){if(i===n)return;if(-1===n)return;t.splice(i,1)}-1!==n?t.splice(n,0,e):t.push(e)}}function r(t,e){return t&&e?t.indexOf(e):-1}n.r(e),n.d(e,"remove",(function(){return i})),n.d(e,"add",(function(){return o})),n.d(e,"indexOf",(function(){return r}))},"41d3":function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6"),r=n("59ef"),c=new(n("2f93").a)("ov");function a(t,e,n,r){var a,s;this._eventBus=e,this._canvas=n,this._elementRegistry=r,this._ids=c,this._overlayDefaults=Object(i.assign)({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(a=n.getContainer(),s=Object(o.domify)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),a.insertBefore(s,a.firstChild),s),this._init()}function s(t,e,n){Object(i.assign)(t.style,{left:e+"px",top:n+"px"})}function u(t,e){t.style.display=!1===e?"none":""}function h(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){t.style[n+"transform"]=e}))}a.$inject=["config.overlays","eventBus","canvas","elementRegistry"],a.prototype.get=function(t){if(Object(i.isString)(t)&&(t={id:t}),Object(i.isString)(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?Object(i.filter)(e.overlays,Object(i.matchPattern)({type:t.type})):e.overlays.slice():[]}return t.type?Object(i.filter)(this._overlays,Object(i.matchPattern)({type:t.type})):t.id?this._overlays[t.id]:null},a.prototype.add=function(t,e,n){if(Object(i.isObject)(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var o=this._ids.next();return n=Object(i.assign)({},this._overlayDefaults,n,{id:o,type:e,element:t,html:n.html}),this._addOverlay(n),o},a.prototype.remove=function(t){var e=this.get(t)||[];Object(i.isArray)(e)||(e=[e]);var n=this;Object(i.forEach)(e,(function(t){var e=n._getOverlayContainer(t.element,!0);if(t&&(Object(o.remove)(t.html),Object(o.remove)(t.htmlContainer),delete t.htmlContainer,delete t.element,delete n._overlays[t.id]),e){var i=e.overlays.indexOf(t);-1!==i&&e.overlays.splice(i,1)}}))},a.prototype.show=function(){u(this._overlayRoot)},a.prototype.hide=function(){u(this._overlayRoot,!1)},a.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Object(o.clear)(this._overlayRoot)},a.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,i=e.x,c=e.y;if(e.waypoints){var a=Object(r.b)(e);i=a.x,c=a.y}s(n,i,c),Object(o.attr)(t.html,"data-container-id",e.id)},a.prototype._updateOverlay=function(t){var e,n,i=t.position,o=t.htmlContainer,c=t.element,a=i.left,u=i.top;void 0!==i.right&&(e=c.waypoints?Object(r.b)(c).width:c.width,a=-1*i.right+e);void 0!==i.bottom&&(n=c.waypoints?Object(r.b)(c).height:c.height,u=-1*i.bottom+n);s(o,a||0,u||0)},a.prototype._createOverlayContainer=function(t){var e=Object(o.domify)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},a.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";h(this._overlayRoot,n)},a.prototype._getOverlayContainer=function(t,e){var n=Object(i.find)(this._overlayContainers,(function(e){return e.element===t}));return n||e?n:this._createOverlayContainer(t)},a.prototype._addOverlay=function(t){var e,n,r=t.id,c=t.element,a=t.html;a.get&&a.constructor.prototype.jquery&&(a=a.get(0)),Object(i.isString)(a)&&(a=Object(o.domify)(a)),n=this._getOverlayContainer(c),(e=Object(o.domify)('<div class="djs-overlay" data-overlay-id="'+r+'" style="position: absolute">')).appendChild(a),t.type&&Object(o.classes)(e).add("djs-overlay-"+t.type);var s=this._canvas.findPlane(c),h=this._canvas.getActivePlane();t.plane=s,s!==h&&u(e,!1),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[r]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},a.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,o=t.plane,r=n&&n.minZoom,c=n&&n.maxZoom,a=t.htmlContainer,s=!0;(o!==this._canvas.getActivePlane()||n&&(Object(i.isDefined)(r)&&r>e.scale||Object(i.isDefined)(c)&&c<e.scale))&&(s=!1),u(a,s),this._updateOverlayScale(t,e)},a.prototype._updateOverlayScale=function(t,e){var n,o,r,c=t.scale,a=t.htmlContainer,s="";!0!==c&&(!1===c?(n=1,o=1):(n=c.min,o=c.max),Object(i.isDefined)(n)&&e.scale<n&&(r=(1/e.scale||1)*n),Object(i.isDefined)(o)&&e.scale>o&&(r=(1/e.scale||1)*o)),Object(i.isDefined)(r)&&(s="scale("+r+","+r+")"),h(a,s)},a.prototype._updateOverlaysVisibilty=function(t){var e=this;Object(i.forEach)(this._overlays,(function(n){e._updateOverlayVisibilty(n,t)}))},a.prototype._init=function(){var t=this._eventBus,e=this;t.on("canvas.viewbox.changing",(function(t){e.hide()})),t.on("canvas.viewbox.changed",(function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateOverlaysVisibilty(n),e.show()})),t.on(["shape.remove","connection.remove"],(function(t){var n=t.element,r=e.get({element:n});Object(i.forEach)(r,(function(t){e.remove(t.id)}));var c=e._getOverlayContainer(n);if(c){Object(o.remove)(c.html);var a=e._overlayContainers.indexOf(c);-1!==a&&e._overlayContainers.splice(a,1)}})),t.on("element.changed",500,(function(t){var n=t.element,o=e._getOverlayContainer(n,!0);o&&(Object(i.forEach)(o.overlays,(function(t){e._updateOverlay(t)})),e._updateOverlayContainer(o))})),t.on("element.marker.update",(function(t){var n=e._getOverlayContainer(t.element,!0);n&&Object(o.classes)(n.html)[t.add?"add":"remove"](t.marker)})),t.on("plane.set",(function(t){Object(i.forEach)(e._overlays,(function(e){u(e.htmlContainer,e.plane===t.plane)}))})),t.on("diagram.clear",this.clear,this)};e.a={__init__:["overlays"],overlays:["type",a]}},"42d8":function(t,e,n){"use strict";var i=n("0f13"),o=n("cc5d"),r=n("b2ea");function c(t,e){this._eventBus=t,this._canvas=e,this._selectedElements=[];var n=this;t.on(["shape.remove","connection.remove"],(function(t){var e=t.element;n.deselect(e)})),t.on(["diagram.clear","plane.set"],(function(t){n.select(null)}))}c.$inject=["eventBus","canvas"],c.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(-1!==n){var i=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},c.prototype.get=function(){return this._selectedElements},c.prototype.isSelected=function(t){return-1!==this._selectedElements.indexOf(t)},c.prototype.select=function(t,e){var n=this._selectedElements,i=n.slice();Object(r.isArray)(t)||(t=t?[t]:[]);var o=this._canvas;t=t.filter((function(t){return o.findPlane(t)===o.getActivePlane()})),e?Object(r.forEach)(t,(function(t){-1===n.indexOf(t)&&n.push(t)})):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};function a(t,e,n,i){function o(t,n){e.addMarker(t,n)}function c(t,n){e.removeMarker(t,n)}this._multiSelectionBox=null,t.on("element.hover",(function(t){o(t.element,"hover")})),t.on("element.out",(function(t){c(t.element,"hover")})),t.on("selection.changed",(function(t){var e=t.oldSelection,n=t.newSelection;Object(r.forEach)(e,(function(t){-1===n.indexOf(t)&&c(t,"selected")})),Object(r.forEach)(n,(function(t){-1===e.indexOf(t)&&o(t,"selected")}))}))}a.$inject=["eventBus","canvas","selection","styles"];var s=n("ac91");function u(t,e,n,i){t.on("create.end",500,(function(t){var n=t.context,i=n.canExecute,o=n.elements,c=(n.hints||{}).autoSelect;if(i){if(!1===c)return;Object(r.isArray)(c)?e.select(c):e.select(o.filter(h))}})),t.on("connect.end",500,(function(t){var n=t.context,i=n.canExecute,o=n.hover;i&&o&&e.select(o)})),t.on("shape.move.end",500,(function(t){var n=t.previousSelection||[],o=i.get(t.context.shape.id);Object(r.find)(n,(function(t){return o.id===t.id}))||e.select(o)})),t.on("element.click",(function(t){if(Object(s.d)(t)){var i=t.element;i===n.getRootElement()&&(i=null);var o=e.isSelected(i),r=e.get().length>1,c=Object(s.a)(t)||Object(s.b)(t);if(o&&r)return c?e.deselect(i):e.select(i);o?e.deselect(i):e.select(i,c)}}))}function h(t){return!t.hidden}u.$inject=["eventBus","selection","canvas","elementRegistry"];e.a={__init__:["selectionVisuals","selectionBehavior"],__depends__:[i.a,o.a],selection:["type",c],selectionVisuals:["type",a],selectionBehavior:["type",u]}},4486:function(t,e,n){"use strict";var i=n("8aa3"),o=n("2e40"),r=n("b2ea"),c=n("59ef"),a=n("ac91"),s=n("bbf8");function u(t,e,n,i,o,r,c){this._selection=o,this._dragging=n,this._mouse=c;var u=this,d=function(t){var n,i=e.getActiveLayer();n=t.frame=Object(s.g)("rect"),Object(s.c)(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Object(s.a)(i,n)},l=function(t){var e=t.frame,n=t.bbox;Object(s.c)(e,{x:n.x,y:n.y,width:n.width,height:n.height})},p=function(t){t.frame&&Object(s.k)(t.frame)};r.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",(function(e){var n=e.originalEvent.target;(e.hover||n instanceof SVGElement)&&t.once("lasso.selection.ended",(function(){u.activateLasso(e.originalEvent,!0)}))})),t.on("lasso.end",(function(t){var e=h(t),n=i.filter((function(t){return t}));u.select(n,e)})),t.on("lasso.start",(function(t){var e=t.context;e.bbox=h(t),d(e)})),t.on("lasso.move",(function(t){var e=t.context;e.bbox=h(t),l(e)})),t.on("lasso.cleanup",(function(t){var e=t.context;p(e)})),t.on("element.mousedown",1500,(function(t){if(Object(a.b)(t))return u.activateLasso(t.originalEvent),!0}))}function h(t){var e={x:t.x-t.dx,y:t.y-t.dy},n={x:t.x,y:t.y};return e.x<=n.x&&e.y<n.y||e.x<n.x&&e.y<=n.y?{x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y}:e.x>=n.x&&e.y<n.y||e.x>n.x&&e.y<=n.y?{x:n.x,y:e.y,width:e.x-n.x,height:n.y-e.y}:e.x<=n.x&&e.y>n.y||e.x<n.x&&e.y>=n.y?{x:e.x,y:n.y,width:n.x-e.x,height:e.y-n.y}:e.x>=n.x&&e.y>n.y||e.x>n.x&&e.y>=n.y?{x:n.x,y:n.y,width:e.x-n.x,height:e.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}u.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],u.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:"crosshair",data:{context:{}}})},u.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:"crosshair",data:{context:{}}})},u.prototype.select=function(t,e){var n=Object(c.d)(t,e);this._selection.select(Object(r.values)(n))},u.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},u.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};e.a={__depends__:[i.a,o.a],__init__:["lassoTool"],lassoTool:["type",u]}},"44f6":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("a092"),o=n.n(i),r=n("971a");function c(t){r.a.call(this,t);var e=this;this.preExecute(["shape.create","connection.create"],(function(t){var n=t.context,i=n.shape||n.connection,o=n.parent,r=e.getOrdering(i,o);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)})),this.preExecute(["shape.move","connection.move"],(function(t){var n=t.context,i=n.shape||n.connection,o=n.newParent||i.parent,r=e.getOrdering(i,o);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)}))}c.prototype.getOrdering=function(t,e){return null},o()(c,r.a)},"44f8":function(t,e,n){"use strict";function i(t){return Math.log(t)/Math.log(10)}n.d(e,"a",(function(){return i}))},"459f":function(t,e,n){"use strict";var i=n("f6d6"),o=n("bd53");function r(t,e,n){var r,c,a=this,s=n.get("dragging",!1);s&&e.on("drag.start",(function(n){e.once("drag.move",1500,(function(e){!function(e){if(!e.hover){var n=e.originalEvent,i=a._findTargetGfx(n),o=i&&t.get(i);i&&o&&(e.stopPropagation(),s.hover({element:o,gfx:i}),s.move(n))}}(e)}))})),e.on("element.hover",(function(t){r=t.gfx,c=t.element})),e.on("element.hover",1500,(function(t){c&&e.fire("element.out",{element:c,gfx:r})})),e.on("element.out",(function(){r=null,c=null})),this._findTargetGfx=function(t){var e;if(t instanceof MouseEvent)return e=Object(o.c)(t),function(t){return Object(i.closest)(t,"svg, .djs-element",!0)}(document.elementFromPoint(e.x,e.y))}}r.$inject=["elementRegistry","eventBus","injector"];var c={__init__:["hoverFix"],hoverFix:["type",r]},a=n("42d8"),s=n("b2ea"),u=n("a2d9"),h=n("889b"),d=n("f122"),l=Math.round;function p(t){t.preventDefault()}function f(t,e,n,r){var c,a={threshold:5,trapClick:!0};function f(t){var n=e.viewbox(),i=e._container.getBoundingClientRect();return{x:n.x+(t.x-i.left)/n.scale,y:n.y+(t.y-i.top)/n.scale}}function v(e,n){n=n||c;var i=t.createEvent(Object(s.assign)({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==t.fire("drag."+e,i)&&t.fire(n.prefix+"."+e,i)}function g(t,i){var r,a=c.payload,h=c.displacement,p=c.globalStart,g=Object(o.c)(t),y=Object(d.b)(g,p),b=c.localStart,m=f(g),_=Object(d.b)(m,b);if(!c.active&&(i||(r=y,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>c.threshold))){if(Object(s.assign)(a,{x:l(b.x+h.x),y:l(b.y+h.y),dx:0,dy:0},{originalEvent:t}),!1===v("start"))return O();c.active=!0,c.keepSelection||(a.previousSelection=n.get(),n.select(null)),c.cursor&&Object(u.a)(c.cursor),e.addMarker(e.getRootElement(),"djs-drag-active")}Object(o.b)(t),c.active&&(Object(s.assign)(a,{x:l(m.x+h.x),y:l(m.y+h.y),dx:l(_.x),dy:l(_.y)},{originalEvent:t}),v("move"))}function y(t){var e=!0;c.active&&(t&&(c.payload.originalEvent=t,Object(o.b)(t)),e=v("end")),!1===e&&v("rejected"),v("ended",w(!0!==e))}function b(t){27===t.which&&(p(t),O())}function m(e){var n;c.active&&(n=Object(h.a)(t),setTimeout(n,400),p(e)),y(e)}function _(t){g(t)}function j(t){var e=c.payload;e.hoverGfx=t.gfx,e.hover=t.element,v("hover")}function x(t){v("out");var e=c.payload;e.hoverGfx=null,e.hover=null}function O(t){var e;if(c){var n=c.active;n&&v("cancel"),e=w(t),n&&v("canceled",e)}}function w(o){var a,s;v("cleanup"),Object(u.b)(),s=c.trapClick?m:y,i.event.unbind(document,"mousemove",g),i.event.unbind(document,"dragstart",p),i.event.unbind(document,"selectstart",p),i.event.unbind(document,"mousedown",s,!0),i.event.unbind(document,"mouseup",s,!0),i.event.unbind(document,"keyup",b),i.event.unbind(document,"touchstart",_,!0),i.event.unbind(document,"touchcancel",O,!0),i.event.unbind(document,"touchmove",g,!0),i.event.unbind(document,"touchend",y,!0),t.off("element.hover",j),t.off("element.out",x),e.removeMarker(e.getRootElement(),"djs-drag-active");var h=c.payload.previousSelection;return!1!==o&&h&&!n.get().length&&function(t){var e=t.filter((function(t){return r.get(t.id)}));e.length&&n.select(e)}(h),a=c,c=null,a}t.on("diagram.destroy",O),this.init=function(e,n,r,u){c&&O(!1),"string"==typeof n&&(u=r,r=n,n=null);var h,l,w,E,S,k=(u=Object(s.assign)({},a,u||{})).data||{};E=u.trapClick?m:y,e?(h=Object(o.a)(e)||e,l=Object(o.c)(e),Object(o.b)(e),"dragstart"===h.type&&p(h)):(h=null,l={x:0,y:0}),w=f(l),n||(n=w),S=function(t){return"undefined"!=typeof TouchEvent&&t instanceof TouchEvent}(h),c=Object(s.assign)({prefix:r,data:k,payload:{},globalStart:l,displacement:Object(d.b)(n,w),localStart:w,isTouch:S},u),u.manual||(S?(i.event.bind(document,"touchstart",_,!0),i.event.bind(document,"touchcancel",O,!0),i.event.bind(document,"touchmove",g,!0),i.event.bind(document,"touchend",y,!0)):(i.event.bind(document,"mousemove",g),i.event.bind(document,"dragstart",p),i.event.bind(document,"selectstart",p),i.event.bind(document,"mousedown",E,!0),i.event.bind(document,"mouseup",E,!0)),i.event.bind(document,"keyup",b),t.on("element.hover",j),t.on("element.out",x)),v("init"),u.autoActivate&&g(e,!0)},this.move=g,this.hover=j,this.out=x,this.end=y,this.cancel=O,this.context=function(){return c},this.setOptions=function(t){Object(s.assign)(a,t)}}f.$inject=["eventBus","canvas","selection","elementRegistry"];e.a={__depends__:[c,a.a],dragging:["type",f]}},"45e3":function(t,e,n){"use strict";var i=n("b2ea"),o=n("bbf8"),r=n("f6d6"),c=n("5b49"),a=["marker-start","marker-mid","marker-end"],s=["circle","ellipse","line","path","polygon","polyline","rect"];function u(t,e,n,r){this._elementRegistry=t,this._canvas=n,this._styles=r,this._clonedMarkers={};var c=this;e.on("drag.cleanup",(function(){Object(i.forEach)(c._clonedMarkers,(function(t){Object(o.k)(t)})),c._clonedMarkers={}}))}u.$inject=["elementRegistry","eventBus","canvas","styles"],u.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},u.prototype.addDragger=function(t,e,n){n=n||this.getGfx(t);var i=Object(o.f)(n),r=n.getBoundingClientRect();return this._cloneMarkers(Object(c.b)(i)),Object(o.c)(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Object(o.a)(e,i),i},u.prototype.addFrame=function(t,e){var n=Object(o.g)("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return Object(o.a)(e,n),n},u.prototype._cloneMarkers=function(t){var e,n=this;if(t.childNodes)for(var i=0;i<t.childNodes.length;i++)n._cloneMarkers(t.childNodes[i]);(e=t,-1!==s.indexOf(e.nodeName))&&a.forEach((function(e){if(Object(o.c)(t,e)){var i=function(t,e,n){var i=(c=Object(o.c)(t,e),c.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]);var c;return Object(r.query)("marker#"+i,n||document)}(t,e,n._canvas.getContainer());n._cloneMarker(t,i,e)}}))},u.prototype._cloneMarker=function(t,e,n){var i=e.id,c=this._clonedMarkers[i];if(!c){var a=i+"-clone";(c=Object(o.f)(e)).id=a,Object(o.d)(c).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=c;var s=Object(r.query)("defs",this._canvas._svg);s||(s=Object(o.g)("defs"),Object(o.a)(this._canvas._svg,s)),Object(o.a)(s,c)}var u="url(#"+this._clonedMarkers[i].id+")";Object(o.c)(t,n,u)};e.a={__init__:["previewSupport"],previewSupport:["type",u]}},4887:function(t,e,n){"use strict";var i=n("41d3"),o=n("42d8"),r=n("f6d6"),c=n("59ef"),a=n("04ae");function s(t,e,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=t,this._eventBus=e,this._overlays=n,this._selection=i,this._container=Object(r.domify)(s.BOX_HTML),this._searchInput=Object(r.query)(s.INPUT_SELECTOR,this._container),this._resultsContainer=Object(r.query)(s.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy"],this.close,this)}function u(t,e,n){var i=function(t){var e="";return t.forEach((function(t){t.matched?e+='<strong class="'+s.RESULT_HIGHLIGHT_CLASS+'">'+Object(a.a)(t.matched)+"</strong>":e+=Object(a.a)(t.normal)})),""!==e?e:null}(e),o=Object(r.domify)(n);o.innerHTML=i,t.appendChild(o)}s.$inject=["canvas","eventBus","overlays","selection"],s.prototype._bindEvents=function(){var t=this;function e(e,n,i,o){t._eventMaps.push({el:e,type:i,listener:r.delegate.bind(e,n,i,o)})}e(document,"html","click",(function(e){t.close()})),e(this._container,s.INPUT_SELECTOR,"click",(function(t){t.stopPropagation(),t.delegateTarget.focus()})),e(this._container,s.RESULT_SELECTOR,"mouseover",(function(e){e.stopPropagation(),t._scrollToNode(e.delegateTarget),t._preselect(e.delegateTarget)})),e(this._container,s.RESULT_SELECTOR,"click",(function(e){e.stopPropagation(),t._select(e.delegateTarget)})),e(this._container,s.INPUT_SELECTOR,"keydown",(function(t){38===t.keyCode&&t.preventDefault(),40===t.keyCode&&t.preventDefault()})),e(this._container,s.INPUT_SELECTOR,"keyup",(function(e){if(27===e.keyCode)return t.close();if(13===e.keyCode){var n=t._getCurrentResult();return n?t._select(n):t.close()}return 38===e.keyCode?t._scrollToDirection(!0):40===e.keyCode?t._scrollToDirection():void(37!==e.keyCode&&39!==e.keyCode&&t._search(e.delegateTarget.value))}))},s.prototype._unbindEvents=function(){this._eventMaps.forEach((function(t){r.delegate.unbind(t.el,t.type,t.listener)}))},s.prototype._search=function(t){var e=this;if(this._clearResults(),t&&""!==t){var n=this._searchProvider.find(t);if(n.length){n.forEach((function(t){var n=t.element.id,i=e._createResultNode(t,n);e._results[n]={element:t.element,node:i}}));var i=Object(r.query)(s.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},s.prototype._scrollToDirection=function(t){var e=this._getCurrentResult();if(e){var n=t?e.previousElementSibling:e.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},s.prototype._scrollToNode=function(t){if(t&&t!==this._getCurrentResult()){var e=t.offsetTop,n=this._resultsContainer.scrollTop,i=e-this._resultsContainer.clientHeight+t.clientHeight;e<n?this._resultsContainer.scrollTop=e:n<i&&(this._resultsContainer.scrollTop=i)}},s.prototype._clearResults=function(){Object(r.clear)(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},s.prototype._getCurrentResult=function(){return Object(r.query)(s.RESULT_SELECTED_SELECTOR,this._resultsContainer)},s.prototype._createResultNode=function(t,e){var n=Object(r.domify)(s.RESULT_HTML);return t.primaryTokens.length>0&&u(n,t.primaryTokens,s.RESULT_PRIMARY_HTML),u(n,t.secondaryTokens,s.RESULT_SECONDARY_HTML),Object(r.attr)(n,s.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(n),n},s.prototype.registerProvider=function(t){this._searchProvider=t},s.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Object(r.classes)(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},s.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Object(r.classes)(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},s.prototype.toggle=function(){this.isOpen()?this.close():this.open()},s.prototype.isOpen=function(){return this._open},s.prototype._preselect=function(t){var e=this._getCurrentResult();if(t!==e){e&&Object(r.classes)(e).remove(s.RESULT_SELECTED_CLASS);var n=Object(r.attr)(t,s.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Object(r.classes)(t).add(s.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},s.prototype._select=function(t){var e=Object(r.attr)(t,s.RESULT_ID_ATTRIBUTE),n=this._results[e].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},s.prototype._resetOverlay=function(t){if(this._overlayId&&this._overlays.remove(this._overlayId),t){var e=function(t){var e=t.width+12,n=t.height+12,i=["width: "+e+"px","height: "+n+"px"].join("; ");return{position:{bottom:n-6,right:e-6},show:!0,html:'<div style="'+i+'" class="'+s.OVERLAY_CLASS+'"></div>'}}(Object(c.b)(t));this._overlayId=this._overlays.add(t,e)}},s.CONTAINER_SELECTOR=".djs-search-container",s.INPUT_SELECTOR=".djs-search-input input",s.RESULTS_CONTAINER_SELECTOR=".djs-search-results",s.RESULT_SELECTOR=".djs-search-result",s.RESULT_SELECTED_CLASS="djs-search-result-selected",s.RESULT_SELECTED_SELECTOR="."+s.RESULT_SELECTED_CLASS,s.RESULT_ID_ATTRIBUTE="data-result-id",s.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",s.OVERLAY_CLASS="djs-search-overlay",s.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',s.RESULT_HTML='<div class="djs-search-result"></div>',s.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',s.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';e.a={__depends__:[i.a,o.a],searchPad:["type",s]}},"4c7f":function(t,e,n){"use strict";var i=n("0f13"),o=n("b2ea"),r=n("f6d6"),c=n("92fe"),a=n.n(c),s=n("bd53"),u=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function h(t,e){return e.get(t,!1)}function d(t){t.preventDefault(),"function"==typeof t.stopPropagation?t.stopPropagation():t.srcEvent&&"function"==typeof t.srcEvent.stopPropagation&&t.srcEvent.stopPropagation(),"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation()}function l(t){function e(e){setTimeout((function(){Object(o.forEach)(u,(function(e){r.event.unbind(t,e,d,!0)}))}),500)}r.event.bind(t,"touchstart",(function(e){Object(o.forEach)(u,(function(e){r.event.bind(t,e,d,!0)}))}),!0),r.event.bind(t,"touchend",e,!0),r.event.bind(t,"touchcancel",e,!0);var n=new a.a.Manager(t,{inputClass:a.a.TouchInput,recognizers:[],domEvents:!0}),i=new a.a.Tap,c=new a.a.Pan({threshold:10}),s=new a.a.Press,h=new a.a.Pinch,l=new a.a.Tap({event:"doubletap",taps:2});return h.requireFailure(c),h.requireFailure(s),n.add([c,s,h,l,i]),n.reset=function(t){var e=this.recognizers,i=this.session;i.stopped||(n.stop(t),setTimeout((function(){var t,n;for(t=0;n=e[t];t++)n.reset(),n.state=8;i.curRecognizer=null}),0))},n.on("hammer.input",(function(t){t.srcEvent.defaultPrevented&&n.reset(!0)})),n}function p(t,e,n,i,o){var c,a=h("dragging",t),u=h("move",t),p=h("contextPad",t),f=h("palette",t);function v(t){return function(e){o.fire(t,e)}}function g(t){return Object(r.closest)(t,"svg, .djs-element",!0)}function y(t){function n(t){var n=g(t.target),o=n&&i.get(n);if(u&&e.getRootElement()!==o)return u.start(t,o,!0);!function(t){var n=0,i=0;function o(t){var o=t.deltaX-n,r=t.deltaY-i;e.scroll({dx:o,dy:r}),n=t.deltaX,i=t.deltaY}function r(t){c.off("panmove",o),c.off("panend",r),c.off("pancancel",r)}c.on("panmove",o),c.on("panend",r),c.on("pancancel",r)}()}(c=l(t)).on("doubletap",v("element.dblclick")),c.on("tap",v("element.click")),c.on("panstart",n),c.on("press",n),c.on("pinchstart",(function(t){var n=e.zoom(),i=t.center;function o(t){var o=1-(1-t.scale)/1.5,r=Math.max(.2,Math.min(4,o*n));e.zoom(r,i),d(t)}function r(t){c.off("pinchmove",o),c.off("pinchend",r),c.off("pinchcancel",r),c.reset(!0)}c.on("pinchmove",o),c.on("pinchend",r),c.on("pinchcancel",r)}))}a&&n.on("drag.move",(function(t){var e=t.originalEvent;if(e&&!(e instanceof MouseEvent)){var n=Object(s.c)(e),o=g(document.elementFromPoint(n.x,n.y)),r=o&&i.get(o);r!==t.hover&&(t.hover&&a.out(t),r&&(a.hover({element:r,gfx:o}),t.hover=r,t.hoverGfx=o))}})),p&&n.on("contextPad.create",(function(t){var e=l(t.pad.html);e.on("panstart",(function(t){p.trigger("dragstart",t,!0)})),e.on("press",(function(t){p.trigger("dragstart",t,!0)})),e.on("tap",(function(t){p.trigger("click",t)}))})),f&&n.on("palette.create",(function(t){var e=l(t.container);e.on("panstart",(function(t){f.trigger("dragstart",t,!0)})),e.on("press",(function(t){f.trigger("dragstart",t,!0)})),e.on("tap",(function(t){f.trigger("click",t)}))})),n.on("canvas.init",(function(t){y(t.svg)}))}p.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var f=n("bbf8");function v(t,e){var n=this;e.on("canvas.init",(function(t){n.addBBoxMarker(t.svg)}))}v.$inject=["canvas","eventBus"],v.prototype.addBBoxMarker=function(t){var e={fill:"none",class:"outer-bound-marker"},n=Object(f.g)("rect");Object(f.c)(n,{x:-1e4,y:1e4,width:10,height:10}),Object(f.c)(n,e),Object(f.a)(t,n);var i=Object(f.g)("rect");Object(f.c)(i,{x:1e4,y:1e4,width:10,height:10}),Object(f.c)(i,e),Object(f.a)(t,i)};var g={__depends__:[i.a],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",p],touchFix:["type",v]};e.a={__depends__:[g]}},"4d95":function(t,e,n){"use strict";var i=n("b2ea");function o(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}o.$inject=["eventBus","injector"],o.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction(n)},o.prototype.canExecute=function(t,e){var n={command:t,context:e},i=this._getHandler(t),o=this._fire(t,"canExecute",n);if(void 0===o){if(!i)return!1;i.canExecute&&(o=i.canExecute(e))}return o},o.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,!1!==t&&this._fire("changed",{trigger:"clear"})},o.prototype.undo=function(){var t,e=this._getUndoAction();if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),(t=this._getUndoAction())&&t.id===e.id);)e=t;this._popAction()}},o.prototype.redo=function(){var t,e=this._getRedoAction();if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),(t=this._getRedoAction())&&t.id===e.id);)e=t;this._popAction()}},o.prototype.register=function(t,e){this._setHandler(t,e)},o.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(e);this.register(t,n)},o.prototype.canUndo=function(){return!!this._getUndoAction()},o.prototype.canRedo=function(){return!!this._getRedoAction()},o.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},o.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},o.prototype._internalUndo=function(t){var e=this,n=t.command,i=t.context,o=this._getHandler(n);this._atomicDo((function(){e._fire(n,"revert",t),o.revert&&e._markDirty(o.revert(i)),e._revertedAction(t),e._fire(n,"reverted",t)}))},o.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);var i,o,r,c=e?[t+"."+e,e]:[t];for(n=this._eventBus.createEvent(n),i=0;(o=c[i])&&(r=this._eventBus.fire("commandStack."+o,n),!n.cancelBubble);i++);return r},o.prototype._createId=function(){return this._uid++},o.prototype._atomicDo=function(t){var e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},o.prototype._internalExecute=function(t,e){var n=this,i=t.command,o=t.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(t),e||(this._fire(i,"preExecute",t),r.preExecute&&r.preExecute(o),this._fire(i,"preExecuted",t)),this._atomicDo((function(){n._fire(i,"execute",t),r.execute&&n._markDirty(r.execute(o)),n._executedAction(t,e),n._fire(i,"executed",t)})),e||(this._fire(i,"postExecute",t),r.postExecute&&r.postExecute(o),this._fire(i,"postExecuted",t)),this._popAction(t)},o.prototype._pushAction=function(t){var e=this._currentExecution,n=e.actions,i=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=i&&i.id||this._createId()),n.push(t)},o.prototype._popAction=function(){var t=this._currentExecution,e=t.trigger,n=t.actions,o=t.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:Object(i.uniqueBy)("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:e}),t.trigger=null)},o.prototype._markDirty=function(t){var e=this._currentExecution;t&&(t=Object(i.isArray)(t)?t:[t],e.dirty=e.dirty.concat(t))},o.prototype._executedAction=function(t,e){var n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)},o.prototype._revertedAction=function(t){this._stackIdx--},o.prototype._getHandler=function(t){return this._handlerMap[t]},o.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};e.a={commandStack:["type",o]}},"4e92":function(t,e,n){"use strict";function i(){}i.prototype.get=function(){return this._data},i.prototype.set=function(t){this._data=t},i.prototype.clear=function(){var t=this._data;return delete this._data,t},i.prototype.isEmpty=function(){return!this._data};var o={clipboard:["type",i]},r=n("6494"),c=n("2e40"),a=n("6225"),s=n("b2ea"),u=n("59ef");function h(t,e,n,i,o,r,c,a){this._canvas=t,this._create=e,this._clipboard=n,this._elementFactory=i,this._eventBus=o,this._modeling=r,this._mouse=c,this._rules=a,o.on("copyPaste.copyElement",(function(t){var e=t.descriptor,n=t.element,i=t.elements;e.priority=1,e.id=n.id,Object(s.find)(i,(function(t){return t===n.parent}))&&(e.parent=n.parent.id),function(t){return!!t.host}(n)&&(e.priority=2,e.host=n.host.id),d(n)&&(e.priority=3,e.source=n.source.id,e.target=n.target.id,e.waypoints=function(t){return Object(s.map)(t.waypoints,(function(t){return(t=p(t)).original&&(t.original=p(t.original)),t}))}(n)),l(n)&&(e.priority=4,e.labelTarget=n.labelTarget.id),Object(s.forEach)(["x","y","width","height"],(function(t){Object(s.isNumber)(n[t])&&(e[t]=n[t])})),e.hidden=n.hidden,e.collapsed=n.collapsed})),o.on("copyPaste.pasteElements",(function(t){var e=t.hints;Object(s.assign)(e,{createElementsBehavior:!1})}))}function d(t){return!!t.waypoints}function l(t){return!!t.labelTarget}function p(t){return Object(s.assign)({},t)}function f(t,e){var n=e.indexOf(t);return-1===n?e:e.splice(n,1)}h.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],h.prototype.copy=function(t){var e,n;return Object(s.isArray)(t)||(t=t?[t]:[]),n=!1===(e=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}))?{}:this.createTree(Object(s.isArray)(e)?e:t),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:n}),n},h.prototype.paste=function(t){var e=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=t&&t.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(e);if(t&&t.element&&t.point)return this._paste(i,t.element,t.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},h.prototype._paste=function(t,e,n,i){Object(s.forEach)(t,(function(t){Object(s.isNumber)(t.x)||(t.x=0),Object(s.isNumber)(t.y)||(t.y=0)}));var o=Object(u.b)(t);return Object(s.forEach)(t,(function(t){d(t)&&(t.waypoints=Object(s.map)(t.waypoints,(function(t){return{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2}}))),Object(s.assign)(t,{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2})})),this._modeling.createElements(t,n,e,Object(s.assign)({},i))},h.prototype._createElements=function(t){var e=this,n=this._eventBus,i={},o=[];return Object(s.forEach)(t,(function(t,r){r=parseInt(r,10),t=Object(s.sortBy)(t,"priority"),Object(s.forEach)(t,(function(t){var r,c=Object(s.assign)({},Object(s.omit)(t,["priority"]));return i[t.parent]?c.parent=i[t.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c}),d(c)?(c.source=i[t.source],c.target=i[t.target],r=i[t.id]=e.createConnection(c),void o.push(r)):l(c)?(c.labelTarget=i[c.labelTarget],r=i[t.id]=e.createLabel(c),void o.push(r)):(c.host&&(c.host=i[c.host]),r=i[t.id]=e.createShape(c),void o.push(r))}))})),o},h.prototype.createConnection=function(t){return this._elementFactory.createConnection(Object(s.omit)(t,["id"]))},h.prototype.createLabel=function(t){return this._elementFactory.createLabel(Object(s.omit)(t,["id"]))},h.prototype.createShape=function(t){return this._elementFactory.createShape(Object(s.omit)(t,["id"]))},h.prototype.hasRelations=function(t,e){var n,i;return!(d(t)&&(n=Object(s.find)(e,Object(s.matchPattern)({id:t.source.id})),i=Object(s.find)(e,Object(s.matchPattern)({id:t.target.id})),!n||!i))&&!(l(t)&&!Object(s.find)(e,Object(s.matchPattern)({id:t.labelTarget.id})))},h.prototype.createTree=function(t){var e=this._rules,n=this,i={},o=[],r=Object(u.e)(t);function c(t,e){var n=Object(s.find)(o,(function(e){return t===e.element}));n?n.depth<e&&(o=function(t,e){var n=e.indexOf(t);-1!==n&&e.splice(n,1);return e}(n,o)).push({element:n.element,depth:e}):o.push({element:t,depth:e})}return Object(u.a)(r,(function(t,e,n){if(!l(t))return Object(s.forEach)(t.labels,(function(t){c(t,n)})),Object(s.forEach)([t.attachers,t.incoming,t.outgoing],(function(t){t&&t.length&&Object(s.forEach)(t,(function(t){Object(s.forEach)(t.labels,(function(t){c(t,n)})),c(t,n)}))})),c(t,n),t.children})),t=Object(s.map)(o,(function(t){return t.element})),o=Object(s.map)(o,(function(e){return e.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:e.descriptor,element:e.element,elements:t}),e})),o=Object(s.sortBy)(o,(function(t){return t.descriptor.priority})),t=Object(s.map)(o,(function(t){return t.element})),Object(s.forEach)(o,(function(o){var r=o.depth;n.hasRelations(o.element,t)?!function(t,n){return e.allowed("element.copy",{element:t,elements:n})}(o.element,t)?f(o.element,t):(i[r]||(i[r]=[]),i[r].push(o.descriptor)):f(o.element,t)})),i};e.a={__depends__:[o,r.a,c.a,a.a],__init__:["copyPaste"],copyPaste:["type",h]}},5677:function(t,e,n){"use strict";var i=n("b2ea"),o=Math.round;function r(t){this._modeling=t}r.$inject=["modeling"],r.prototype.replaceElement=function(t,e,n){if(t.waypoints)return null;var r=this._modeling,c=e.width||t.width,a=e.height||t.height,s=e.x||t.x,u=e.y||t.y,h=o(s+c/2),d=o(u+a/2);return r.replaceShape(t,Object(i.assign)({},e,{x:h,y:d,width:c,height:a}),n)};e.a={__init__:["replace"],replace:["type",r]}},"59ef":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return p}));var i=n("b2ea");function o(t){return Object(i.filter)(t,(function(e){return!Object(i.find)(t,(function(t){return t!==e&&function t(e,n){if(!n)return;if(e===n)return n;if(!e.parent)return;return t(e.parent,n)}(e,t)}))}))}function r(t,e,n){var i=!n||-1===t.indexOf(e);return i&&t.push(e),i}function c(t,e,n){n=n||0,Object(i.isArray)(t)||(t=[t]),Object(i.forEach)(t,(function(t,o){var r=e(t,o,n);Object(i.isArray)(r)&&r.length&&c(r,e,n+1)}))}function a(t,e,n){var i=[],o=[];return c(t,(function(t,c,a){r(i,t,e);var s=t.children;if((-1===n||a<n)&&s&&r(o,s,e))return s})),i}function s(t,e){return a(t,!e,-1)}function u(t,e,n){Object(i.isUndefined)(e)&&(e=!0),Object(i.isObject)(e)&&(n=e,e=!0);var o=f((n=n||{}).allShapes),r=f(n.allConnections),a=f(n.enclosedElements),s=f(n.enclosedConnections),u=f(n.topLevel,e&&Object(i.groupBy)(t,(function(t){return t.id})));function h(t){u[t.source.id]&&u[t.target.id]&&(u[t.id]=[t]),o[t.source.id]&&o[t.target.id]&&(s[t.id]=a[t.id]=t),r[t.id]=t}return c(t,(function(t){if(a[t.id]=t,!t.waypoints)return o[t.id]=t,Object(i.forEach)(t.incoming,h),Object(i.forEach)(t.outgoing,h),t.children;s[t.id]=r[t.id]=t})),{allShapes:o,allConnections:r,topLevel:u,enclosedConnections:s,enclosedElements:a}}function h(t,e){var n,o,r,c;return e=!!e,Object(i.isArray)(t)||(t=[t]),Object(i.forEach)(t,(function(t){var i=t;t.waypoints&&!e&&(i=h(t.waypoints,!0));var a=i.x,s=i.y,u=i.height||0,d=i.width||0;(a<n||void 0===n)&&(n=a),(s<o||void 0===o)&&(o=s),(a+d>r||void 0===r)&&(r=a+d),(s+u>c||void 0===c)&&(c=s+u)})),{x:n,y:o,height:c-o,width:r-n}}function d(t,e){var n={};return Object(i.forEach)(t,(function(t){var o=t;o.waypoints&&(o=h(o)),!Object(i.isNumber)(e.y)&&o.x>e.x&&(n[t.id]=t),!Object(i.isNumber)(e.x)&&o.y>e.y&&(n[t.id]=t),o.x>e.x&&o.y>e.y&&(Object(i.isNumber)(e.width)&&Object(i.isNumber)(e.height)&&o.width+o.x<e.width+e.x&&o.height+o.y<e.height+e.y?n[t.id]=t:Object(i.isNumber)(e.width)&&Object(i.isNumber)(e.height)||(n[t.id]=t))})),n}function l(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}function p(t){return!(!t||!t.isFrame)}function f(t,e){return Object(i.assign)({},t||{},e||{})}},"5b49":function(t,e,n){"use strict";function i(t){return t.childNodes[0]}function o(t){return t.parentNode.childNodes[1]}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}))},"60b6":function(t,e,n){"use strict";var i=n("b2ea"),o={horizontal:["x","width"],vertical:["y","height"]};function r(t){this._modeling=t,this._filters=[],this.registerFilter((function(t,e,n){var o,r=0,c=0;return Object(i.forEach)(t,(function(t){t.waypoints||t.labelTarget||(r+=t[n],c+=1)})),o=Math.round(r/c),Object(i.filter)(t,(function(t){return t[n]<o+50}))}))}r.$inject=["modeling"],r.prototype.registerFilter=function(t){if("function"!=typeof t)throw new Error("the filter has to be a function");this._filters.push(t)},r.prototype.trigger=function(t,e){var n,i,o=this._modeling;if(!(t.length<3||(this._setOrientation(e),i=this._filterElements(t),(n=this._createGroups(i)).length<=2)))return o.distributeElements(n,this._axis,this._dimension),n},r.prototype._filterElements=function(t){var e=this._filters,n=this._axis,o=this._dimension,r=[].concat(t);return e.length?(Object(i.forEach)(e,(function(t){r=t(r,n,o)})),r):t},r.prototype._createGroups=function(t){var e=[],n=this,o=this._axis,r=this._dimension;if(!o)throw new Error('must have a defined "axis" and "dimension"');var c=Object(i.sortBy)(t,o);return Object(i.forEach)(c,(function(t,i){var c,a=n._findRange(t,o,r),s=e[e.length-1];s&&n._hasIntersection(s.range,a)?e[e.length-1].elements.push(t):(c={range:a,elements:[t]},e.push(c))})),e},r.prototype._setOrientation=function(t){var e=o[t];this._axis=e[0],this._dimension=e[1]},r.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)},r.prototype._findRange=function(t){var e=t[this._axis];return{min:e+5,max:e+t[this._dimension]-5}};e.a={__init__:["distributeElements"],distributeElements:["type",r]}},6225:function(t,e,n){"use strict";function i(t){this._commandStack=t.get("commandStack",!1)}i.$inject=["injector"],i.prototype.allowed=function(t,e){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(t,e)),void 0===n||n};e.a={__init__:["rules"],rules:["type",i]}},6312:function(t,e,n){"use strict";var i=n("bbf8"),o=n("b2ea"),r=n("b6f8");function c(t,e,n,i){this._canvas=e,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}c.$inject=["injector","canvas","graphicsFactory","elementFactory"],c.prototype.drawPreview=function(t,e,n){n=n||{};var o,c,a,s=t.connectionPreviewGfx,u=t.getConnection,h=n.source,d=n.target,l=n.waypoints,p=n.connectionStart,f=n.connectionEnd,v=n.noLayout,g=n.noCropping,y=n.noNoop,b=this;s||(s=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),Object(i.e)(s),u||(u=t.getConnection=(c=function(t,e,n){return b.getConnection(t,e,n)},a={},function(t){var e=JSON.stringify(t),n=a[e];return n||(n=a[e]=c.apply(null,arguments)),n})),e&&(o=u(e,h,d)),o?(o.waypoints=l||[],this._layouter&&!v&&(o.waypoints=this._layouter.layoutConnection(o,{source:h,target:d,connectionStart:p,connectionEnd:f,waypoints:n.waypoints||o.waypoints})),o.waypoints&&o.waypoints.length||(o.waypoints=[h?Object(r.e)(h):p,d?Object(r.e)(d):f]),this._connectionDocking&&(h||d)&&!g&&(o.waypoints=this._connectionDocking.getCroppedWaypoints(o,h,d)),this._graphicsFactory.drawConnection(s,o)):!y&&this.drawNoopPreview(s,n)},c.prototype.drawNoopPreview=function(t,e){var n=e.source,o=e.target,c=e.connectionStart||Object(r.e)(n),a=e.connectionEnd||Object(r.e)(o),s=this.cropWaypoints(c,a,n,o),u=this.createNoopConnection(s[0],s[1]);Object(i.a)(t,u)},c.prototype.cropWaypoints=function(t,e,n,i){var o=this._graphicsFactory,c=n&&o.getShapePath(n),a=i&&o.getShapePath(i),s=o.getConnectionPath({waypoints:[t,e]});return[t=n&&Object(r.d)(c,s,!0)||t,e=i&&Object(r.d)(a,s,!1)||e]},c.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&Object(i.k)(t.connectionPreviewGfx)},c.prototype.getConnection=function(t){var e=function(t){return Object(o.isObject)(t)?t:{}}(t);return this._elementFactory.createConnection(e)},c.prototype.createConnectionPreviewGfx=function(){var t=Object(i.g)("g");return Object(i.c)(t,{pointerEvents:"none"}),Object(i.d)(t).add("djs-connection-preview"),Object(i.a)(this._canvas.getActiveLayer(),t),t},c.prototype.createNoopConnection=function(t,e){var n=Object(i.g)("polyline");return Object(i.c)(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),Object(i.c)(n,{points:[t.x,t.y,e.x,e.y]}),n};e.a={__init__:["connectionPreview"],connectionPreview:["type",c]}},6494:function(t,e,n){"use strict";var i=n("459f"),o=n("45e3"),r=n("6225"),c=n("42d8"),a=n("b2ea"),s=n("59ef"),u="drop-ok",h="drop-not-ok",d="attach-ok",l="new-parent";function p(t,e,n,i,o){function r(e,n){[d,u,h,l].forEach((function(i){i===n?t.addMarker(e,i):t.removeMarker(e,i)}))}function c(){var t=e.context();t&&"create"===t.prefix&&e.cancel()}n.on(["create.move","create.hover"],(function(t){var e=t.context,n=e.elements,i=t.hover,c=e.source,s=e.hints||{};if(!i)return e.canExecute=!1,void(e.target=null);f(t);var u={x:t.x,y:t.y},p=e.canExecute=i&&function(t,e,n,i,r){if(!e)return!1;t=Object(a.filter)(t,(function(e){var n=e.labelTarget;return!(e.parent||function(t){return!!t.labelTarget}(e)&&-1!==t.indexOf(n))}));var c=Object(a.find)(t,(function(t){return!v(t)})),s=!1,u=!1,h=!1;g(t)&&(s=o.allowed("shape.attach",{position:n,shape:c,target:e})),s||(h=g(t)?o.allowed("shape.create",{position:n,shape:c,source:i,target:e}):o.allowed("elements.create",{elements:t,position:n,target:e}));var d=r.connectionTarget;return h||s?(c&&i&&(u=o.allowed("connection.create",{source:d===i?c:i,target:d===i?i:c,hints:{targetParent:e,targetAttach:s}})),{attach:s,connect:u}):(null===h||null===s)&&null}(n,i,u,c,s);i&&null!==p&&(e.target=i,p&&p.attach?r(i,d):r(i,p?l:h))})),n.on(["create.end","create.out","create.cleanup"],(function(t){var e=t.hover;e&&r(e,null)})),n.on("create.end",(function(t){var e=t.context,n=e.source,o=e.shape,r=e.elements,c=e.target,s=e.canExecute,u=s&&s.attach,h=s&&s.connect,d=e.hints||{};if(!1===s||!c)return!1;f(t);var l={x:t.x,y:t.y};h?o=i.appendShape(n,o,l,c,{attach:u,connection:!0===h?{}:h,connectionTarget:d.connectionTarget}):(r=i.createElements(r,l,c,Object(a.assign)({},d,{attach:u})),o=Object(a.find)(r,(function(t){return!v(t)}))),Object(a.assign)(e,{elements:r,shape:o}),Object(a.assign)(t,{elements:r,shape:o})})),n.on("create.init",(function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],2e3,(function(){n.off("elements.changed",c)}))})),this.start=function(t,n,i){Object(a.isArray)(n)||(n=[n]);var o=Object(a.find)(n,(function(t){return!v(t)}));if(o){i=Object(a.assign)({elements:n,hints:{},shape:o},i||{}),Object(a.forEach)(n,(function(t){Object(a.isNumber)(t.x)||(t.x=0),Object(a.isNumber)(t.y)||(t.y=0)}));var r=Object(s.b)(n);Object(a.forEach)(n,(function(t){v(t)&&(t.waypoints=Object(a.map)(t.waypoints,(function(t){return{x:t.x-r.x-r.width/2,y:t.y-r.y-r.height/2}}))),Object(a.assign)(t,{x:t.x-r.x-r.width/2,y:t.y-r.y-r.height/2})})),e.init(t,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:o,elements:n,context:i}})}}}function f(t){var e=t.context.createConstraints;e&&(e.left&&(t.x=Math.max(t.x,e.left)),e.right&&(t.x=Math.min(t.x,e.right)),e.top&&(t.y=Math.max(t.y,e.top)),e.bottom&&(t.y=Math.min(t.y,e.bottom)))}function v(t){return!!t.waypoints}function g(t){return t&&1===t.length&&!v(t[0])}p.$inject=["canvas","dragging","eventBus","modeling","rules"];var y=n("cfe5"),b=n("5b49"),m=n("bbf8");function _(t,e,n,i,o){e.on("create.move",750,(function(e){var r,c=e.hover,a=e.context,s=a.elements,u=a.dragGroup;u||(u=a.dragGroup=function(t){var e=Object(m.g)("g");Object(m.c)(e,o.cls("djs-drag-group",["no-events"]));var r=Object(m.g)("g");return t.forEach((function(t){var o;t.hidden||(t.waypoints?(o=n._createContainer("connection",r),n.drawConnection(Object(b.b)(o),t)):(o=n._createContainer("shape",r),n.drawShape(Object(b.b)(o),t),Object(y.c)(o,t.x,t.y)),i.addDragger(t,e,o))})),e}(s)),c?(u.parentNode||(r=t.getActiveLayer(),Object(m.a)(r,u)),Object(y.c)(u,e.x,e.y)):Object(m.k)(u)})),e.on("create.cleanup",(function(t){var e=t.context.dragGroup;e&&Object(m.k)(e)}))}_.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];e.a={__depends__:[i.a,o.a,r.a,c.a],__init__:["create","createPreview"],create:["type",p],createPreview:["type",_]}},"6a23":function(t,e,n){"use strict";var i=n("b6f8"),o=n("f909");function r(t,e,n){t.on("autoPlace",100,(function(t){var e=t.shape;return function(t,e,n){n||(n={});var r=n.defaultDistance||o.a,c=Object(i.e)(t);return{x:Object(i.b)(t).right+r+e.width/2,y:c.y}}(t.source,e)})),t.on("autoPlace.end",(function(t){n.scrollToElement(t.shape)})),this.append=function(n,i,o){t.fire("autoPlace.start",{source:n,shape:i});var r=t.fire("autoPlace",{source:n,shape:i}),c=e.appendShape(n,i,r,n.parent,o);return t.fire("autoPlace.end",{source:n,shape:c}),c}}function c(t,e){t.on("autoPlace.end",500,(function(t){e.select(t.shape)}))}r.$inject=["eventBus","modeling","canvas"],c.$inject=["eventBus","selection"];e.a={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",r],autoPlaceSelectionBehavior:["type",c]}},"71bd":function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6"),r=new(n("2f93").a)("tt");function c(t,e){t.style.display=!1===e?"none":""}function a(t,e){var n,i;this._eventBus=t,this._canvas=e,this._ids=r,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=e.getContainer(),i=Object(o.domify)('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),n.insertBefore(i,n.firstChild),i);var c=this;o.delegate.bind(this._tooltipRoot,".djs-tooltip","mousedown",(function(t){t.stopPropagation()})),o.delegate.bind(this._tooltipRoot,".djs-tooltip","mouseover",(function(t){c.trigger("mouseover",t)})),o.delegate.bind(this._tooltipRoot,".djs-tooltip","mouseout",(function(t){c.trigger("mouseout",t)})),this._init()}a.$inject=["eventBus","canvas"],a.prototype.add=function(t){if(!t.position)throw new Error("must specifiy tooltip position");if(!t.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return t=Object(i.assign)({},this._tooltipDefaults,t,{id:e}),this._addTooltip(t),t.timeout&&this.setTimeout(t),e},a.prototype.trigger=function(t,e){var n=e.delegateTarget||e.target,i=this.get(Object(o.attr)(n,"data-tooltip-id"));i&&("mouseover"===t&&i.timeout&&this.clearTimeout(i),"mouseout"===t&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},a.prototype.get=function(t){return"string"!=typeof t&&(t=t.id),this._tooltips[t]},a.prototype.clearTimeout=function(t){if(t=this.get(t)){var e=t.removeTimer;e&&(clearTimeout(e),t.removeTimer=null)}},a.prototype.setTimeout=function(t){if(t=this.get(t)){this.clearTimeout(t);var e=this;t.removeTimer=setTimeout((function(){e.remove(t)}),t.timeout)}},a.prototype.remove=function(t){var e=this.get(t);e&&(Object(o.remove)(e.html),Object(o.remove)(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])},a.prototype.show=function(){c(this._tooltipRoot)},a.prototype.hide=function(){c(this._tooltipRoot,!1)},a.prototype._updateRoot=function(t){var e=t.scale||1,n=t.scale||1,i="matrix("+e+",0,0,"+n+","+-1*t.x*e+","+-1*t.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},a.prototype._addTooltip=function(t){var e,n=t.id,r=t.html,c=this._tooltipRoot;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Object(i.isString)(r)&&(r=Object(o.domify)(r)),(e=Object(o.domify)('<div data-tooltip-id="'+n+'" class="djs-tooltip" style="position: absolute">')).appendChild(r),t.type&&Object(o.classes)(e).add("djs-tooltip-"+t.type),t.className&&Object(o.classes)(e).add(t.className),t.htmlContainer=e,c.appendChild(e),this._tooltips[n]=t,this._updateTooltip(t)},a.prototype._updateTooltip=function(t){var e,n,o,r=t.position,c=t.htmlContainer;e=c,n=r.x,o=r.y,Object(i.assign)(e.style,{left:n+"px",top:o+"px"})},a.prototype._updateTooltipVisibilty=function(t){Object(i.forEach)(this._tooltips,(function(e){var n=e.show,i=e.htmlContainer,o=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(o=!1),c(i,o))}))},a.prototype._init=function(){var t=this;this._eventBus.on("canvas.viewbox.changing",(function(e){t.hide()})),this._eventBus.on("canvas.viewbox.changed",(function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateTooltipVisibilty(n),t.show()}))};e.a={__init__:["tooltips"],tooltips:["type",a]}},8180:function(t,e,n){"use strict";var i=n("0f13"),o=n("42d8"),r=n("cc5d"),c=n("6225"),a=n("459f"),s=n("45e3"),u=n("b2ea"),h=n("bd53"),d=n("ac91"),l=Math.round;function p(t,e,n,i,o){function r(t,e,n,i){return o.allowed("elements.move",{shapes:t,delta:e,position:n,target:i})}function c(t,n,i,o){if(Object(u.isObject)(i)&&(o=i,i=!1),!n.waypoints&&n.parent){var r=function(t){return{x:t.x+l(t.width/2),y:t.y+l(t.height/2)}}(n);return e.init(t,r,"shape.move",{cursor:"grabbing",autoActivate:i,data:{shape:n,context:o||{}}}),!0}}t.on("shape.move.start",1500,(function(t){var e,n,o=t.context,r=t.shape,c=i.get().slice();-1===c.indexOf(r)&&(c=[r]),e=c,n=Object(u.groupBy)(e,"id"),c=Object(u.filter)(e,(function(t){for(;t=t.parent;)if(n[t.id])return!1;return!0})),Object(u.assign)(o,{shapes:c,validatedShapes:c,shape:r})})),t.on("shape.move.start",1250,(function(t){var e=t.context,n=e.validatedShapes;if(!(e.canExecute=r(n)))return!1})),t.on("shape.move.move",500,(function(t){var e,n=t.context,i=n.validatedShapes,o=t.hover,c={x:t.dx,y:t.dy};e=r(i,c,{x:t.x,y:t.y},o),n.delta=c,n.canExecute=e,n.target=null!==e?o:null})),t.on("shape.move.end",(function(t){var e=t.context,i=e.delta,o=e.canExecute,r="attach"===o,c=e.shapes;if(!1===o)return!1;i.x=l(i.x),i.y=l(i.y),0===i.x&&0===i.y||n.moveElements(c,i,e.target,{primaryShape:e.shape,attach:r})})),t.on("element.mousedown",(function(t){if(Object(d.d)(t)){var e=Object(h.a)(t);if(!e)throw new Error("must supply DOM mousedown event");return c(e,t.element)}})),this.start=c}p.$inject=["eventBus","dragging","modeling","selection","rules"];var f=n("59ef"),v=n("bbf8"),g=n("cfe5"),y="drop-ok",b="drop-not-ok",m="new-parent",_="attach-ok";function j(t,e,n,i){function o(t){return function(t){return Object(u.filter)(t,(function(e){return!function(t){return t.waypoints}(e)||Object(u.find)(t,Object(u.matchPattern)({id:e.source.id}))&&Object(u.find)(t,Object(u.matchPattern)({id:e.target.id}))}))}(r(t))}function r(t){var e=Object(f.h)(t,!0),n=Object(u.map)(e,(function(t){return(t.incoming||[]).concat(t.outgoing||[])}));return Object(u.flatten)(e.concat(n))}function c(t,n){[_,y,b,m].forEach((function(i){i===n?e.addMarker(t,i):e.removeMarker(t,i)}))}t.on("shape.move.start",499,(function(t){var c,a=t.context,s=a.shapes,h=a.allDraggedElements,d=o(s);if(!a.dragGroup){var l=Object(v.g)("g");Object(v.c)(l,n.cls("djs-drag-group",["no-events"]));var p=e.getActiveLayer();Object(v.a)(p,l),a.dragGroup=l}d.forEach((function(t){i.addDragger(t,a.dragGroup)})),h=h?Object(u.flatten)([h,r(s)]):r(s),Object(u.forEach)(h,(function(t){e.addMarker(t,"djs-dragging")})),a.allDraggedElements=h,a.differentParents=(c=s,1!==Object(u.size)(Object(u.groupBy)(c,(function(t){return t.parent&&t.parent.id}))))})),t.on("shape.move.move",499,(function(t){var e=t.context,n=e.dragGroup,i=e.target,o=e.shape.parent,r=e.canExecute;i&&("attach"===r?c(i,_):e.canExecute&&i&&i.id!==o.id?c(i,m):c(i,e.canExecute?y:b)),Object(g.c)(n,t.dx,t.dy)})),t.on(["shape.move.out","shape.move.cleanup"],(function(t){var e=t.context.target;e&&c(e,null)})),t.on("shape.move.cleanup",(function(t){var n=t.context,i=n.allDraggedElements,o=n.dragGroup;Object(u.forEach)(i,(function(t){e.removeMarker(t,"djs-dragging")})),o&&Object(v.k)(o)})),this.makeDraggable=function(t,n,o){i.addDragger(n,t.dragGroup),o&&e.addMarker(n,"djs-dragging"),t.allDraggedElements?t.allDraggedElements.push(n):t.allDraggedElements=[n]}}j.$inject=["eventBus","canvas","styles","previewSupport"];e.a={__depends__:[i.a,o.a,r.a,c.a,a.a,s.a],__init__:["move","movePreview"],move:["type",p],movePreview:["type",j]}},84723:function(t,e,n){"use strict";var i=n("6225"),o=n("b2ea"),r=n("0e13"),c=n("bfa5"),a=n("a092"),s=n.n(a),u=n("971a");function h(t,e,n,i,a){u.a.call(this,e);var s=t.get("movePreview",!1);e.on("shape.move.start",1401,(function(t){var e,n,i=t.context,r=i.shapes,c=i.validatedShapes;i.shapes=(n=d(e=r),Object(o.unionBy)("id",e,n)),i.validatedShapes=function(t){var e=Object(o.groupBy)(t,"id");return Object(o.filter)(t,(function(t){for(;t;){if(t.host&&e[t.host.id])return!1;t=t.parent}return!0}))}(c)})),s&&e.on("shape.move.start",251,(function(t){var e=t.context,n=d(e.shapes);Object(o.forEach)(n,(function(t){s.makeDraggable(e,t,!0),Object(o.forEach)(t.labels,(function(t){s.makeDraggable(e,t,!0)}))}))})),s&&e.on("shape.move.start",(function(t){var i=t.context.shapes;if(1===i.length){var o=i[0].host;o&&(n.addMarker(o,"attach-ok"),e.once(["shape.move.out","shape.move.cleanup"],(function(){n.removeMarker(o,"attach-ok")})))}})),this.preExecuted("elements.move",1401,(function(t){var e=t.context,n=e.closure,i=d(e.shapes);Object(o.forEach)(i,(function(t){n.add(t,n.topLevel[t.host.id])}))})),this.postExecuted("elements.move",(function(t){var e,n=t.context,i=n.shapes,r=n.newHost;r&&1!==i.length||(e=r?i:Object(o.filter)(i,(function(t){var e,n=t.host;return function(t){return!!t.host}(t)&&(e=n,!(-1!==i.indexOf(e)))})),Object(o.forEach)(e,(function(t){a.updateAttachment(t,r)})))})),this.postExecuted("elements.move",(function(t){var e=t.context.shapes;Object(o.forEach)(e,(function(t){Object(o.forEach)(t.attachers,(function(t){Object(o.forEach)(t.outgoing.slice(),(function(t){i.allowed("connection.reconnect",{connection:t,source:t.source,target:t.target})||a.removeConnection(t)})),Object(o.forEach)(t.incoming.slice(),(function(t){i.allowed("connection.reconnect",{connection:t,source:t.source,target:t.target})||a.removeConnection(t)}))}))}))})),this.postExecute("shape.create",(function(t){var e=t.context,n=e.shape,i=e.host;i&&a.updateAttachment(n,i)})),this.postExecute("shape.replace",(function(t){var e=t.context,n=e.oldShape,s=e.newShape;Object(r.a)(n.attachers,(function(t){"attach"===i.allowed("elements.move",{target:s,shapes:[t]})?a.updateAttachment(t,s):a.removeShape(t)})),s.attachers.length&&Object(o.forEach)(s.attachers,(function(t){var e=Object(c.b)(t,n,s);a.moveShape(t,e,t.parent)}))})),this.postExecute("shape.resize",(function(t){var e=t.context,n=e.shape,i=e.oldBounds,r=e.newBounds,s=n.attachers;!1!==(e.hints||{}).attachSupport&&Object(o.forEach)(s,(function(t){var e=Object(c.b)(t,i,r);a.moveShape(t,e,t.parent),Object(o.forEach)(t.labels,(function(t){a.moveShape(t,e,t.parent)}))}))})),this.preExecute("shape.delete",(function(t){var e=t.context.shape;Object(r.a)(e.attachers,(function(t){a.removeShape(t)})),e.host&&a.updateAttachment(e,null)}))}function d(t){return Object(o.flatten)(Object(o.map)(t,(function(t){return t.attachers||[]})))}s()(h,u.a),h.$inject=["injector","eventBus","canvas","rules","modeling"];e.a={__depends__:[i.a],__init__:["attachSupport"],attachSupport:["type",h]}},"84d5":function(t,e,n){"use strict";var i=n("b0f7"),o=n("42d8"),r=n("b2ea"),c={moveSpeed:1,moveSpeedAccelerated:10},a={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},s={left:function(t){return{x:-t,y:0}},up:function(t){return{x:0,y:-t}},right:function(t){return{x:t,y:0}},down:function(t){return{x:0,y:t}}};function u(t,e,n,i,o){var u=this;this._config=Object(r.assign)({},c,t||{}),e.addListener(1500,(function(t){var n=t.keyEvent,i=a[n.key];if(i&&!e.isCmd(n)){var o=e.isShift(n);return u.moveSelection(i,o),!0}})),this.moveSelection=function(t,e){var r=o.get();if(r.length){var c=this._config[e?"moveSpeedAccelerated":"moveSpeed"],a=s[t](c);i.allowed("elements.move",{shapes:r})&&n.moveElements(r,a)}}}u.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];e.a={__depends__:[i.a,o.a],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",u]}},8541:function(t,e,n){"use strict";var i=n("42d8"),o=n("6225"),r=n("459f"),c=n("b6f8"),a=n("b2ea");function s(t,e,n,i){function o(t,e){return i.allowed("connection.create",{source:t,target:e})}t.on("connect.hover",(function(t){var e,n=t.context,i=n.start,r=t.hover;if(n.hover=r,e=n.canExecute=o(i,r),!Object(a.isNil)(e)){if(!1!==e)return n.source=i,void(n.target=r);e=n.canExecute=o(r,i),Object(a.isNil)(e)||!1!==e&&(n.source=r,n.target=i)}})),t.on(["connect.out","connect.cleanup"],(function(t){var e=t.context;e.hover=null,e.source=null,e.target=null,e.canExecute=!1})),t.on("connect.end",(function(t){var e=t.context,i=e.canExecute,o=e.connectionStart,r={x:t.x,y:t.y},c=e.source,s=e.target;if(!i)return!1;var h=null,d={connectionStart:u(e)?r:o,connectionEnd:u(e)?o:r};Object(a.isObject)(i)&&(h=i),n.connect(c,s,h,d)})),this.start=function(t,n,i,o){Object(a.isObject)(i)||(o=i,i=Object(c.e)(n)),e.init(t,"connect",{autoActivate:o,data:{shape:n,context:{start:n,connectionStart:i}}})}}function u(t){var e=t.hover,n=t.source,i=t.target;return e&&n&&e===n&&n!==i}s.$inject=["eventBus","dragging","modeling","rules"];function h(t,e,n){var i=t.get("connectionPreview",!1);i&&e.on("connect.move",(function(t){var e=t.context,n=e.canExecute,o=e.hover,r=e.source,c=e.start,a=e.startPosition,s=e.target,h=e.connectionStart||a,d=e.connectionEnd||{x:t.x,y:t.y},l=h,p=d;u(e)&&(l=d,p=h),i.drawPreview(e,n,{source:r||c,target:s||o,connectionStart:l,connectionEnd:p})})),e.on("connect.hover",900,(function(t){var e=t.context,i=t.hover,o=e.canExecute;null!==o&&n.addMarker(i,o?"connect-ok":"connect-not-ok")})),e.on(["connect.out","connect.cleanup"],1100,(function(t){var e=t.hover;e&&(n.removeMarker(e,"connect-ok"),n.removeMarker(e,"connect-not-ok"))})),i&&e.on("connect.cleanup",(function(t){i.cleanUp(t.context)}))}h.$inject=["injector","eventBus","canvas"];e.a={__depends__:[i.a,o.a,r.a],__init__:["connectPreview"],connect:["type",s],connectPreview:["type",h]}},"869b":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("a092"),o=n.n(i),r=n("59ef"),c=n("b6f8"),a=n("b2ea"),s=n("971a");function u(t,e,n,i){s.a.call(this,t),this._elementRegistry=e,this._modeling=n,this._rules=i;var o=this;this.postExecuted(["shape.create"],(function(t){var e=t.context,n=e.hints||{},i=e.shape,r=e.parent||e.newParent;!1!==n.autoResize&&o._expand([i],r)})),this.postExecuted(["elements.move"],(function(t){var e=t.context,n=Object(a.flatten)(Object(a.values)(e.closure.topLevel)),i=e.hints,r=!i||i.autoResize;if(!1!==r){var c=Object(a.groupBy)(n,(function(t){return t.parent.id}));Object(a.forEach)(c,(function(t,e){Object(a.isArray)(r)&&(t=t.filter((function(t){return Object(a.find)(r,Object(a.matchPattern)({id:t.id}))}))),o._expand(t,e)}))}})),this.postExecuted(["shape.toggleCollapse"],(function(t){var e=t.context,n=e.hints,i=e.shape;n&&!1===n.autoResize||i.collapsed||o._expand(i.children||[],i)})),this.postExecuted(["shape.resize"],(function(t){var e=t.context,n=e.hints,i=e.shape,r=i.parent;n&&!1===n.autoResize||r&&o._expand([i],r)}))}u.$inject=["eventBus","elementRegistry","modeling","rules"],o()(u,s.a),u.prototype._getOptimalBounds=function(t,e){var n=this.getOffset(e),i=this.getPadding(e),o=Object(c.b)(Object(r.b)(t)),s=Object(c.b)(e),u={};return o.top-s.top<i.top&&(u.top=o.top-n.top),o.left-s.left<i.left&&(u.left=o.left-n.left),s.right-o.right<i.right&&(u.right=o.right+n.right),s.bottom-o.bottom<i.bottom&&(u.bottom=o.bottom+n.bottom),Object(c.a)(Object(a.assign)({},s,u))},u.prototype._expand=function(t,e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._rules.allowed("element.autoResize",{elements:t,target:e})){var n=this._getOptimalBounds(t,e);if(function(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}(n,e)){var i=function(t,e){var n="";t=Object(c.b)(t),e=Object(c.b)(e),t.top>e.top&&(n=n.concat("n"));t.right<e.right&&(n=n.concat("w"));t.bottom<e.bottom&&(n=n.concat("s"));t.left>e.left&&(n=n.concat("e"));return n}(Object(a.pick)(e,["x","y","width","height"]),n);this.resize(e,n,{autoResize:i});var o=e.parent;o&&this._expand([e],o)}}},u.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}},u.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}},u.prototype.resize=function(t,e,n){this._modeling.resizeShape(t,e,null,n)}},"872d":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return y}));var i=n("b2ea"),o=n("b6f8"),r=n("f885"),c=Math.round,a={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function s(t,e,n){var i,r,a,s=Object(o.f)(e,t,5),u=n.split(":")[0],d=c((e.x-t.x)/2+t.x),l=c((e.y-t.y)/2+t.y),p=(a=s,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[u].test(a)),f=/h|r|l/.test(u),v=!1;return p?(i=f?{x:d,y:t.y}:{x:t.x,y:l},r=f?"h:h":"v:v"):(r=f?"h:v":"v:h",function(t,e){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[e].test(t)}(s,u)?f?(v=l===t.y,i={x:t.x+20*(/l/.test(u)?-1:1),y:v?l+20:l}):i={x:(v=d===t.x)?d+20:d,y:t.y+20*(/t/.test(u)?-1:1)}:i={x:d,y:l}),{waypoints:h(t,i,r).concat(i),directions:r,turnNextDirections:v}}function u(t){return t.split(":").reverse().join(":")}function h(t,e,n){if(!function(t){return t&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(t)}(n=n||"h:h"))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(v(n)){var i=function(t,e,n){return s(t,e,n)}(t,e,n),o=function(t,e,n){var i=s(e,t,u(n));return{waypoints:i.waypoints.slice().reverse(),directions:u(i.directions),turnNextDirections:i.turnNextDirections}}(t,e,n),r=function(t,e){var n=t.directions.split(":")[1],i=e.directions.split(":")[0];t.turnNextDirections&&(n="h"==n?"v":"h"),e.turnNextDirections&&(i="h"==i?"v":"h");var o=n+":"+i;return{waypoints:h(t.waypoints[t.waypoints.length-1],e.waypoints[0],o),directions:o}}(i,o);return[].concat(i.waypoints,r.waypoints,o.waypoints)}return function(t,e,n){var i=c((e.x-t.x)/2+t.x),o=c((e.y-t.y)/2+t.y);if("h:v"===n)return[{x:e.x,y:t.y}];if("v:h"===n)return[{x:t.x,y:e.y}];if("h:h"===n)return[{x:i,y:t.y},{x:i,y:e.y}];if("v:v"===n)return[{x:t.x,y:o},{x:e.x,y:o}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(t,e,n)}function d(t,e,n,r,c){var s=c&&c.preferredLayouts||[],u=Object(i.without)(s,"straight")[0]||"h:h",d=a[u]||0,l=Object(o.f)(t,e,d),p=function(t,e){if(v(e))return e;switch(t){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return e}}(l,u);n=n||Object(o.e)(t),r=r||Object(o.e)(e);var f=p.split(":");return function(t,e,n){var i=h(t,e,n);return i.unshift(t),i.push(e),y(i)}(g(n,t,f[0],function(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[t]}(l)),g(r,e,f[1],l),p)}function l(t,e,n,r,c,a){var s;return Object(i.isArray)(n)&&(c=n,a=r,n=Object(o.e)(t),r=Object(o.e)(e)),c=c||[],(s=-1!==(a=Object(i.assign)({preferredLayouts:[]},a)).preferredLayouts.indexOf("straight")&&function(t,e,n,i,r){var c,a,s={};if(a=Object(o.f)(t,e),!/^(top|bottom|left|right)$/.test(a))return null;/top|bottom/.test(a)&&(c="x");/left|right/.test(a)&&(c="y");return"target"===r.preserveDocking?p(c,i,t)?(s[c]=i[c],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:p(c,n,e)?(s[c]=n[c],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null}(t,e,n,r,a))||(s=a.connectionEnd&&function(t,e,n,i){var o=i.slice().reverse();return(o=f(t,e,n,o))?o.reverse():null}(e,t,r,c))?s:(s=a.connectionStart&&f(t,e,n,c))||(!a.connectionStart&&!a.connectionEnd&&c&&c.length?c:d(t,e,n,r,a))}function p(t,e,n){return function(t,e,n){return t>=e&&t<=n}(e[t],n[t],n[t]+n[{x:"width",y:"height"}[t]])}function f(t,e,n,o){if(function(t){return t.length<3||!(t.length>4)&&!!Object(i.find)(t,(function(e,n){var i=t[n-1];return i&&Object(r.b)(e,i)<3}))}(o))return null;var c,a=o[0],s=o.slice();return s[0]=n,s[1]=function(t,e,n){switch(Object(r.d)(e,t)){case"v":return{x:n.x,y:t.y};case"h":return{x:t.x,y:n.y}}return{x:t.x,y:t.y}}(s[1],a,n),(c=function(t,e,n){var i;for(i=t.length-2;0!==i;i--)if(Object(r.c)(t[i],e,20)||Object(r.c)(t[i],n,20))return t.slice(i);return t}(s,t,e))!==s&&(s=f(t,e,n,c)),s&&Object(r.d)(s)?null:s}function v(t){return t&&/t|r|b|l/.test(t)}function g(t,e,n,i){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:t,x:t.x,y:e.y};if("r"===n)return{original:t,x:e.x+e.width,y:t.y};if("b"===n)return{original:t,x:t.x,y:e.y+e.height};if("l"===n)return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function y(t){return t.reduce((function(e,n,i){var o=e[e.length-1],c=t[i+1];return Object(r.e)(o,c,n,0)||e.push(n),e}),[])}},"889b":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));function i(t,e){function n(){return!1}return e=e||"element.click",t.once(e,5e3,n),function(){t.off(e,n)}}},8939:function(t,e,n){"use strict";var i=n("459f"),o=n("6225"),r=n("b2ea"),c=n("f6d6"),a=n("bd53"),s=n("f885"),u=n("bbf8"),h=n("cfe5"),d=n("f41a");function l(t,e,n){var i=function(t,e){var n,i=Object(a.c)(e),o=t._container.getBoundingClientRect();n={x:o.left,y:o.top};var r=t.viewbox();return{x:r.x+(i.x-n.x)/r.scale,y:r.y+(i.y-n.y)/r.scale}}(t,n);return Object(d.a)(e,i)}function p(t,e){var n=Object(u.g)("g");Object(u.d)(n).add("djs-bendpoint"),Object(u.a)(t,n);var i=Object(u.g)("circle");Object(u.c)(i,{cx:0,cy:0,r:4}),Object(u.d)(i).add("djs-visual"),Object(u.a)(n,i);var o=Object(u.g)("circle");return Object(u.c)(o,{cx:0,cy:0,r:10}),Object(u.d)(o).add("djs-hit"),Object(u.a)(n,o),e&&Object(u.d)(n).add(e),n}function f(t,e,n,i){var o=Object(u.g)("g");Object(u.a)(t,o);var r=function(t,e,n){var i=e.x-t.x,o=e.y-t.y;return g("h"===n?i:o)}(e,n,i),c=Object(u.g)("rect");Object(u.c)(c,{x:-7,y:-1.5,width:14,height:3}),Object(u.d)(c).add("djs-visual"),Object(u.a)(o,c);var a=Object(u.g)("rect");return Object(u.c)(a,{x:-r/2,y:-7,width:r,height:14}),Object(u.d)(a).add("djs-hit"),Object(u.a)(o,a),Object(h.a)(o,"v"===i?90:0,0,0),o}function v(t,e,n){var i=Object(u.g)("g"),o=Object(s.a)(e,n),r=Object(s.d)(e,n);return Object(u.a)(t,i),f(i,e,n,r),Object(u.d)(i).add("djs-segment-dragger"),Object(u.d)(i).add("h"===r?"horizontal":"vertical"),Object(h.c)(i,o.x,o.y),i}function g(t){return Math.abs(Math.round(2*t/3))}var y=n("9896"),b=n.n(y),m=n("ac91");function _(t,e,n,i,o){function a(t,n){var r=n.waypoints,c=l(e,r,t);if(c)return!function(t,e,n){var i,o,r,c,a,u,h=t.index,d=t.point;return!(h<=0||t.bendpoint)&&(i=e[h-1],o=e[h],r=Object(s.a)(i,o),c=Object(s.d)(i,o),a=Math.abs(d.x-r.x),u=Math.abs(d.y-r.y),c&&a<=n&&u<=n)}(c,r,function(t,e){var n,i,o=t.waypoints;return e.index<=0||e.bendpoint?null:(n={start:o[e.index-1],end:o[e.index]},(i=Object(s.d)(n.start,n.end))?g("h"===i?n.end.x-n.start.x:n.end.y-n.start.y)/2:null)}(n,c))?i.start(t,n,c.index,!c.bendpoint):o.start(t,n,c.index),!0}function d(t,e,i){c.event.bind(t,e,(function(t){n.triggerMouseEvent(e,t,i),t.stopPropagation()}))}function f(t,n){var i=e.getLayer("overlays"),o=Object(c.query)('.djs-bendpoints[data-element-id="'+b()(t.id)+'"]',i);return!o&&n&&(o=Object(u.g)("g"),Object(u.c)(o,{"data-element-id":t.id}),Object(u.d)(o).add("djs-bendpoints"),Object(u.a)(i,o),d(o,"mousedown",t),d(o,"click",t),d(o,"dblclick",t)),o}function y(t,e){return Object(c.query)('.djs-segment-dragger[data-segment-idx="'+t+'"]',e)}function _(t,e){e.waypoints.forEach((function(e,n){var i=p(t);Object(u.a)(t,i),Object(h.c)(i,e.x,e.y)})),p(t,"floating")}function j(t,e){for(var n,i,o,r=e.waypoints,c=1;c<r.length;c++)n=r[c-1],i=r[c],Object(s.d)(n,i)&&(o=v(t,n,i),Object(u.c)(o,{"data-segment-idx":c}),d(o,"mousemove",e))}function x(t){var e=f(t);return e||(_(e=f(t,!0),t),j(e,t)),e}function O(t){var e=f(t);e&&(!function(t){Object(r.forEach)(Object(c.queryAll)(".djs-segment-dragger",t),(function(t){Object(u.k)(t)}))}(e),function(t){Object(r.forEach)(Object(c.queryAll)(".djs-bendpoint",t),(function(t){Object(u.k)(t)}))}(e),j(e,t),_(e,t))}function w(t,e,n){var i,o,r=y(e.index,t),a=n[e.index-1],u=n[e.index],d=e.point,l=Object(s.a)(a,u),p=Object(s.d)(a,u);r&&(i=function(t){return Object(c.query)(".djs-visual",t)}(r),o={x:d.x-l.x,y:d.y-l.y},"v"===p&&(o={x:o.y,y:o.x}),Object(h.c)(i,o.x,o.y))}t.on("connection.changed",(function(t){O(t.element)})),t.on("connection.remove",(function(t){var e=f(t.element);e&&Object(u.k)(e)})),t.on("element.marker.update",(function(t){var e,n=t.element;n.waypoints&&(e=x(n),t.add?Object(u.d)(e).add(t.marker):Object(u.d)(e).remove(t.marker))})),t.on("element.mousemove",(function(t){var n,i,o=t.element,r=o.waypoints;if(r){if(n=f(o,!0),!(i=l(e,r,t.originalEvent)))return;!function(t,e){var n=Object(c.query)(".floating",t),i=e.point;n&&Object(h.c)(n,i.x,i.y)}(n,i),i.bendpoint||w(n,i,r)}})),t.on("element.mousedown",(function(t){if(Object(m.d)(t)){var e=t.originalEvent,n=t.element;if(n.waypoints)return a(e,n)}})),t.on("selection.changed",(function(t){var e=t.newSelection[0];e&&e.waypoints&&x(e)})),t.on("element.hover",(function(t){var e=t.element;e.waypoints&&(x(e),n.registerEvent(t.gfx,"mousemove","element.mousemove"))})),t.on("element.out",(function(t){n.unregisterEvent(t.gfx,"mousemove","element.mousemove")})),t.on("element.updateId",(function(t){var e=t.element,n=t.newId;if(e.waypoints){var i=f(e);i&&Object(u.c)(i,{"data-element-id":n})}})),this.addHandles=x,this.updateHandles=O,this.getBendpointsContainer=f,this.getSegmentDragger=y}_.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var j=n("b6f8"),x=Math.round;function O(t,e,n,i,o,r){this._injector=t,this.start=function(t,e,r,c){var a,s=n.getGraphics(e),u=e.source,h=e.target,d=e.waypoints,l="updateWaypoints"===(a=c||0!==r?c||r!==d.length-1?"updateWaypoints":"reconnectEnd":"reconnectStart")?"connection.updateWaypoints":"connection.reconnect",p=o.allowed(l,{connection:e,source:u,target:h});!1===p&&(p=o.allowed(l,{connection:e,source:h,target:u})),!1!==p&&i.init(t,"bendpoint.move",{data:{connection:e,connectionGfx:s,context:{allowed:p,bendpointIndex:r,connection:e,source:u,target:h,insert:c,type:a}}})},e.on("bendpoint.move.hover",(function(t){var e,n=t.context,i=n.connection,r=i.source,c=i.target,a=t.hover,s=n.type;if(n.hover=a,a){var u="updateWaypoints"===s?"connection.updateWaypoints":"connection.reconnect";if(e=n.allowed=o.allowed(u,{connection:i,source:"reconnectStart"===s?a:r,target:"reconnectEnd"===s?a:c}))return n.source="reconnectStart"===s?a:r,void(n.target="reconnectEnd"===s?a:c);!1===e&&(e=n.allowed=o.allowed(u,{connection:i,source:"reconnectEnd"===s?a:c,target:"reconnectStart"===s?a:r})),e&&(n.source="reconnectEnd"===s?a:c,n.target="reconnectStart"===s?a:r)}})),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],(function(t){var e=t.context,n=e.type;e.hover=null,e.source=null,e.target=null,"updateWaypoints"!==n&&(e.allowed=!1)})),e.on("bendpoint.move.end",(function(t){var e=t.context,n=e.allowed,i=e.bendpointIndex,o=e.connection,c=e.insert,a=o.waypoints.slice(),s=e.source,u=e.target,h=e.type,d=e.hints||{},l={x:x(t.x),y:x(t.y)};if(!n)return!1;"updateWaypoints"===h?(c?a.splice(i,0,l):a[i]=l,d.bendpointMove={insert:c,bendpointIndex:i},a=this.cropWaypoints(o,a),r.updateWaypoints(o,Object(j.c)(a),d)):("reconnectStart"===h?(d.docking="source",w(e)&&(d.docking="target",d.newWaypoints=a.reverse())):"reconnectEnd"===h&&(d.docking="target",w(e)&&(d.docking="source",d.newWaypoints=a.reverse())),r.reconnect(o,s,u,l,d))}),this)}function w(t){var e=t.hover,n=t.source,i=t.target,o=t.type;return"reconnectStart"===o?e&&i&&e===i&&n!==i:"reconnectEnd"===o?e&&n&&e===n&&n!==i:void 0}O.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],O.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var i=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=i,e};function E(t,e,n,i){this._injector=e;var o=e.get("connectionPreview",!1);n.on("bendpoint.move.start",(function(t){var e=t.context,n=e.bendpointIndex,o=e.connection,r=e.insert,c=o.waypoints,a=c.slice();e.waypoints=c,r&&a.splice(n,0,{x:t.x,y:t.y}),o.waypoints=a;var s=e.draggerGfx=p(i.getLayer("overlays"));Object(u.d)(s).add("djs-dragging"),i.addMarker(o,"djs-element-hidden"),i.addMarker(o,"djs-updating")})),n.on("bendpoint.move.hover",(function(t){var e=t.context,n=e.allowed,o=e.hover,r=e.type;if(o){if(i.addMarker(o,"connect-hover"),"updateWaypoints"===r)return;n?(i.removeMarker(o,"connect-not-ok"),i.addMarker(o,"connect-ok")):!1===n&&(i.removeMarker(o,"connect-ok"),i.addMarker(o,"connect-not-ok"))}})),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,(function(t){var e=t.context,n=e.hover,o=e.target;n&&(i.removeMarker(n,"connect-hover"),i.removeMarker(n,o?"connect-ok":"connect-not-ok"))})),n.on("bendpoint.move.move",(function(e){var n=e.context,i=n.allowed,r=n.bendpointIndex,c=n.draggerGfx,a=n.hover,s=n.type,u=n.connection,d=u.source,l=u.target,p=u.waypoints.slice(),f={x:e.x,y:e.y},v=n.hints||{},g={};o&&(v.connectionStart&&(g.connectionStart=v.connectionStart),v.connectionEnd&&(g.connectionEnd=v.connectionEnd),"reconnectStart"===s?w(n)?(g.connectionEnd=g.connectionEnd||f,g.source=l,g.target=a||d,p=p.reverse()):(g.connectionStart=g.connectionStart||f,g.source=a||d,g.target=l):"reconnectEnd"===s?w(n)?(g.connectionStart=g.connectionStart||f,g.source=a||l,g.target=d,p=p.reverse()):(g.connectionEnd=g.connectionEnd||f,g.source=d,g.target=a||l):(g.noCropping=!0,g.noLayout=!0,p[r]=f),"updateWaypoints"===s&&(p=t.cropWaypoints(u,p)),g.waypoints=p,o.drawPreview(n,i,g)),Object(h.c)(c,e.x,e.y)}),this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,(function(t){var e=t.context,n=e.connection,r=e.draggerGfx,c=e.hover,a=e.target,s=e.waypoints;n.waypoints=s,Object(u.k)(r),i.removeMarker(n,"djs-updating"),i.removeMarker(n,"djs-element-hidden"),c&&(i.removeMarker(c,"connect-ok"),i.removeMarker(c,a?"connect-ok":"connect-not-ok")),o&&o.cleanUp(e)}))}E.$inject=["bendpointMove","injector","eventBus","canvas"];function S(t,e,n){return k(t,e,t[e]+n)}function k(t,e,n){return{x:"x"===e?n:t.x,y:"y"===e?n:t.y}}function C(t){return"x"===t?"y":"x"}function M(t,e,n){var i,o;return t.original?t.original:(i=Object(j.e)(e),k(t,o=C(n),i[o]))}function P(t,e,n,i,o,r){var c=t.get("connectionDocking",!1);function a(t,e){if(!c)return e;var n,i=t.waypoints;return t.waypoints=e,n=c.getCroppedWaypoints(t),t.waypoints=i,n}function d(t){o.update("connection",t.connection,t.connectionGfx)}function p(t,e,n){var i=t.newWaypoints,o=function(t,e,n,i){var o=Math.max(e[i],n[i]),r=Math.min(e[i],n[i]);return k(e,i,Math.min(Math.max(r+20,t[i]),o-20))}(n,i[t.segmentStartIndex+e],i[t.segmentEndIndex+e],C(t.axis));Object(h.c)(t.draggerGfx,o.x,o.y)}this.start=function(t,e,o){var r,c,a,u,h=n.getGraphics(e),d=o-1,p=o,f=e.waypoints,v=f[d],g=f[p],y=l(n,f,t);(c=Object(s.d)(v,g))&&(a="v"===c?"x":"y",0===d&&(v=M(v,e.source,a)),p===f.length-1&&(g=M(g,e.target,a)),r={connection:e,segmentStartIndex:d,segmentEndIndex:p,segmentStart:v,segmentEnd:g,axis:a,dragPosition:u=y?y.point:{x:(v.x+g.x)/2,y:(v.y+g.y)/2}},i.init(t,u,"connectionSegment.move",{cursor:"x"===a?"resize-ew":"resize-ns",data:{connection:e,connectionGfx:h,context:r}}))},e.on("connectionSegment.move.start",(function(t){var e=t.context,i=t.connection,o=n.getLayer("overlays");e.originalWaypoints=i.waypoints.slice(),e.draggerGfx=v(o,e.segmentStart,e.segmentEnd),Object(u.d)(e.draggerGfx).add("djs-dragging"),n.addMarker(i,"djs-updating")})),e.on("connectionSegment.move.move",(function(t){var e,n,i=t.context,o=i.connection,r=i.segmentStartIndex,c=i.segmentEndIndex,s=i.segmentStart,u=i.segmentEnd,h=i.axis,l=i.originalWaypoints.slice(),f=S(s,h,t["d"+h]),v=S(u,h,t["d"+h]),g=l.length,y=0;l[r]=f,l[c]=v,r<2&&(e=Object(j.f)(o.source,f),1===r?"intersect"===e&&(l.shift(),l[0]=f,y--):"intersect"!==e&&(l.unshift(s),y++)),c>g-3&&(n=Object(j.f)(o.target,v),c===g-2?"intersect"===n&&(l.pop(),l[l.length-1]=v):"intersect"!==n&&l.push(u)),i.newWaypoints=o.waypoints=a(o,l),p(i,y,t),i.newSegmentStartIndex=r+y,d(t)})),e.on("connectionSegment.move.hover",(function(t){t.context.hover=t.hover,n.addMarker(t.hover,"connect-hover")})),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],(function(t){var e=t.context.hover;e&&n.removeMarker(e,"connect-hover")})),e.on("connectionSegment.move.cleanup",(function(t){var e=t.context,i=e.connection;e.draggerGfx&&Object(u.k)(e.draggerGfx),n.removeMarker(i,"djs-updating")})),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],(function(t){var e=t.context;e.connection.waypoints=e.originalWaypoints,d(t)})),e.on("connectionSegment.move.end",(function(t){var e=t.context,n=e.connection,i=e.newWaypoints,o=e.newSegmentStartIndex,c=function(t,e){var n=0;return{waypoints:t.filter((function(i,o){return!Object(s.e)(t[o-1],t[o+1],i)||(n=o<=e?n-1:n,!1)})),segmentOffset:n}}(i=i.map((function(t){return{original:t.original,x:Math.round(t.x),y:Math.round(t.y)}})),o),u=a(n,c.waypoints),h=c.segmentOffset,d={segmentMove:{segmentStartIndex:e.segmentStartIndex,newSegmentStartIndex:o+h}};r.updateWaypoints(n,u,d)}))}P.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var T=n("e7cf"),B=Math.abs,R=Math.round;function A(t){function e(t,e){if(Object(r.isArray)(t)){for(var n=t.length;n--;)if(B(t[n]-e)<=10)return t[n]}else{var i=e%(t=+t);if(i<10)return e-i;if(i>t-10)return e-i+t}return e}function n(t){if(t.width)return{x:R(t.width/2+t.x),y:R(t.height/2+t.y)}}t.on("connectionSegment.move.move",1500,(function(t){var i,o,c=function(t){var e=t.snapPoints,i=t.connection,o=i.waypoints,c=t.segmentStart,a=t.segmentStartIndex,s=t.segmentEnd,u=t.segmentEndIndex,h=t.axis;if(e)return e;var d=[o[a-1],c,s,o[u+1]];return a<2&&d.unshift(n(i.source)),u>o.length-3&&d.unshift(n(i.target)),t.snapPoints=e={horizontal:[],vertical:[]},Object(r.forEach)(d,(function(t){t&&(t=t.original||t,"y"===h&&e.horizontal.push(t.y),"x"===h&&e.vertical.push(t.x))})),e}(t.context),a=t.x,s=t.y;if(c){var u=a-(i=e(c.vertical,a)),h=s-(o=e(c.horizontal,s));Object(r.assign)(t,{dx:t.dx-u,dy:t.dy-h,x:i,y:o}),(u||-1!==c.vertical.indexOf(a))&&Object(T.e)(t,"x",i),(h||-1!==c.horizontal.indexOf(s))&&Object(T.e)(t,"y",o)}})),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,(function(t){var i,o,c=t.context,a=function(t){var e=t.snapPoints,n=t.connection.waypoints,i=t.bendpointIndex;if(e)return e;var o=[n[i-1],n[i+1]];return t.snapPoints=e={horizontal:[],vertical:[]},Object(r.forEach)(o,(function(t){t&&(t=t.original||t,e.horizontal.push(t.y),e.vertical.push(t.x))})),e}(c),s=c.hover,u=s&&n(s),h=t.x,d=t.y;if(a){var l=h-(i=e(u?a.vertical.concat([u.x]):a.vertical,h)),p=d-(o=e(u?a.horizontal.concat([u.y]):a.horizontal,d));Object(r.assign)(t,{dx:t.dx-l,dy:t.dy-p,x:t.x-l,y:t.y-p}),(l||-1!==a.vertical.indexOf(h))&&Object(T.e)(t,"x",i),(p||-1!==a.horizontal.indexOf(d))&&Object(T.e)(t,"y",o)}}))}A.$inject=["eventBus"];e.a={__depends__:[i.a,o.a],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",_],bendpointMove:["type",O],bendpointMovePreview:["type",E],connectionSegmentMove:["type",P],bendpointSnapping:["type",A]}},"8aa3":function(t,e,n){"use strict";var i=n("459f"),o=n("b2ea"),r=n("f6d6");function c(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}c.$inject=["eventBus","dragging"],c.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error('A tool has to be registered with it\'s "events"');n.push(t),this.bindEvents(t,e)},c.prototype.isActive=function(t){return t&&this._active===t},c.prototype.length=function(t){return this._tools.length},c.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},c.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,c=[];n.on(e.tool+".init",(function(e){if(!e.context.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)}),this),Object(o.forEach)(e,(function(t){c.push(t+".ended"),c.push(t+".canceled")})),n.on(c,250,(function(t){this._active&&(function(t){var e=t.originalEvent&&t.originalEvent.target;return e&&Object(r.closest)(e,'.group[data-group="tools"]')}(t)||this.setActive(null))}),this)};e.a={__depends__:[i.a],__init__:["toolManager"],toolManager:["type",c]}},"8bcb":function(t,e,n){"use strict";var i=n("6225"),o=n("459f"),r=n("45e3"),c=n("b2ea"),a=n("abb7"),s=n("b6f8");function u(t,e,n,i){this._dragging=i,this._rules=e;var o=this;t.on("resize.start",(function(t){var e,n,i;e=t.context,n=e.resizeConstraints,i=e.minBounds,void 0===n&&(void 0===i&&(i=o.computeMinResizeBox(e)),e.resizeConstraints={min:Object(s.b)(i)})})),t.on("resize.move",(function(t){var e={x:t.dx,y:t.dy};!function(t,e){var n,i=t.shape,r=t.direction,c=t.resizeConstraints;t.delta=e,n=Object(a.d)(i,r,e),t.newBounds=Object(a.b)(n,c),t.canExecute=o.canResize(t)}(t.context,e)})),t.on("resize.end",(function(t){!function(t){var e=t.shape,i=t.canExecute,o=t.newBounds;if(i){if(!function(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}(e,o=Object(s.g)(o)))return;n.resizeShape(e,o)}}(t.context)}))}function h(t,e){var n=Object(s.e)(t),i=Object(s.b)(t),o={x:n.x,y:n.y};return-1!==e.indexOf("n")?o.y=i.top:-1!==e.indexOf("s")&&(o.y=i.bottom),-1!==e.indexOf("e")?o.x=i.right:-1!==e.indexOf("w")&&(o.x=i.left),o}function d(t){return"n"===t||"s"===t?"resize-ns":"e"===t||"w"===t?"resize-ew":"nw"===t||"se"===t?"resize-nwse":"resize-nesw"}u.prototype.canResize=function(t){var e=this._rules,n=Object(c.pick)(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)},u.prototype.activate=function(t,e,n){var i,o,r=this._dragging;if("string"==typeof n&&(n={direction:n}),!(o=(i=Object(c.assign)({shape:e},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(t,h(e,o),"resize",{autoActivate:!0,cursor:d(o),data:{shape:e,context:i}})},u.prototype.computeMinResizeBox=function(t){var e,n,i=t.shape,o=t.direction;return e=t.minDimensions||{width:10,height:10},n=Object(a.a)(i,t.childrenBoxPadding),Object(a.c)(o,i,e,n)},u.$inject=["eventBus","rules","modeling","dragging"];var l=n("bbf8");function p(t,e,n){t.on("resize.move",500,(function(t){var i,o,r,c;i=t.context,o=i.shape,r=i.newBounds,(c=i.frame)||(c=i.frame=n.addFrame(o,e.getActiveLayer()),e.addMarker(o,"djs-resizing")),r.width>5&&Object(l.c)(c,{x:r.x,width:r.width}),r.height>5&&Object(l.c)(c,{y:r.y,height:r.height}),i.canExecute?Object(l.d)(c).remove("resize-not-ok"):Object(l.d)(c).add("resize-not-ok")})),t.on("resize.cleanup",(function(t){var n,i;n=t.context,i=n.shape,n.frame&&Object(l.k)(n.frame),e.removeMarker(i,"djs-resizing")}))}p.$inject=["eventBus","canvas","previewSupport"];var f=n("f6d6"),v=n("ac91"),g=n("cfe5"),y=["n","w","s","e","nw","ne","se","sw"];function b(t,e,n,i){this._resize=i,this._canvas=e;var o=this;t.on("selection.changed",(function(t){var e=t.newSelection;o.removeResizers(),1===e.length&&Object(c.forEach)(e,Object(c.bind)(o.addResizer,o))})),t.on("shape.changed",(function(t){var e=t.element;n.isSelected(e)&&(o.removeResizers(),o.addResizer(e))}))}b.prototype.makeDraggable=function(t,e,n){var i=this._resize;function o(e){Object(v.d)(e)&&i.activate(e,t,n)}f.event.bind(e,"mousedown",o),f.event.bind(e,"touchstart",o)},b.prototype._createResizer=function(t,e,n,i){var o=this._getResizersParent(),r=function(t){var e={x:0,y:0};-1!==t.indexOf("e")?e.x=6:-1!==t.indexOf("w")&&(e.x=-6);-1!==t.indexOf("s")?e.y=6:-1!==t.indexOf("n")&&(e.y=-6);return e}(i),c=Object(l.g)("g");Object(l.d)(c).add("djs-resizer"),Object(l.d)(c).add("djs-resizer-"+t.id),Object(l.d)(c).add("djs-resizer-"+i),Object(l.a)(o,c);var a=Object(l.g)("rect");Object(l.c)(a,{x:-2+r.x,y:-2+r.y,width:4,height:4}),Object(l.d)(a).add("djs-resizer-visual"),Object(l.a)(c,a);var s=Object(l.g)("rect");return Object(l.c)(s,{x:-10+r.x,y:-10+r.y,width:20,height:20}),Object(l.d)(s).add("djs-resizer-hit"),Object(l.a)(c,s),Object(g.b)(c,e,n),c},b.prototype.createResizer=function(t,e){var n=h(t,e),i=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,i,e)},b.prototype.addResizer=function(t){var e=this;this._resize.canResize({shape:t})&&Object(c.forEach)(y,(function(n){e.createResizer(t,n)}))},b.prototype.removeResizers=function(){var t=this._getResizersParent();Object(l.e)(t)},b.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},b.$inject=["eventBus","canvas","selection","resize"];e.a={__depends__:[i.a,o.a,r.a],__init__:["resize","resizePreview","resizeHandles"],resize:["type",u],resizePreview:["type",p],resizeHandles:["type",b]}},"8c85":function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6");function r(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",(function(t){var e=t.tool;n.updateToolHighlight(e)})),t.on("i18n.changed",(function(){n._update()})),t.on("diagram.init",(function(){n._diagramInitialized=!0,n._rebuild()}))}function c(t,e){var n=e.getPaletteEntries();return Object(i.isFunction)(n)?n(t):(Object(i.forEach)(n,(function(e,n){t[n]=e})),t)}r.$inject=["eventBus","canvas"],r.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("palette.getProviders",t,(function(t){t.providers.push(e)})),this._rebuild()},r.prototype.getEntries=function(){return this._getProviders().reduce(c,{})},r.prototype._rebuild=function(){this._diagramInitialized&&(this._getProviders().length&&(this._container||this._init(),this._update()))},r.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),i=this._container=Object(o.domify)(r.HTML_MARKUP);n.appendChild(i),Object(o.classes)(n).add("djs-palette-shown"),o.delegate.bind(i,".djs-palette-toggle, .entry","click",(function(e){var n=e.delegateTarget;if(Object(o.matches)(n,".djs-palette-toggle"))return t.toggle();t.trigger("click",e)})),o.event.bind(i,"mousedown",(function(t){t.stopPropagation()})),o.delegate.bind(i,".entry","dragstart",(function(e){t.trigger("dragstart",e)})),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:i})},r.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},r.prototype._toggleState=function(t){t=t||{};var e,n=this._getParentContainer(),i=this._container,r=this._eventBus,c=Object(o.classes)(i),a=Object(o.classes)(n);e="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),c.toggle("two-column",e),a.toggle("djs-palette-two-column",e),"open"in t&&(c.toggle("open",t.open),a.toggle("djs-palette-open",t.open)),r.fire("palette.changed",{twoColumn:e,open:this.isOpen()})},r.prototype._update=function(){var t=Object(o.query)(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Object(o.clear)(t),Object(i.forEach)(e,(function(e,n){var r=e.group||"default",c=Object(o.query)("[data-group="+r+"]",t);c||(c=Object(o.domify)('<div class="group" data-group="'+r+'"></div>'),t.appendChild(c));var a,s,u,h=e.html||(e.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),d=Object(o.domify)(h);c.appendChild(d),e.separator||(Object(o.attr)(d,"data-action",n),e.title&&Object(o.attr)(d,"title",e.title),e.className&&(a=d,s=e.className,u=Object(o.classes)(a),(Object(i.isArray)(s)?s:s.split(/\s+/g)).forEach((function(t){u.add(t)}))),e.imageUrl&&d.appendChild(Object(o.domify)('<img src="'+e.imageUrl+'">')))})),this.open()},r.prototype.trigger=function(t,e,n){var r,c,a,s=this._entries,u=e.delegateTarget||e.target;if(!u)return e.preventDefault();(r=s[Object(o.attr)(u,"data-action")])&&(c=r.action,a=e.originalEvent||e,Object(i.isFunction)(c)?"click"===t&&c(a,n):c[t]&&c[t](a,n),e.preventDefault())},r.prototype._layoutChanged=function(){this._toggleState({})},r.prototype._needsCollapse=function(t,e){return t<46*Object.keys(e).length+50},r.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},r.prototype.open=function(){this._toggleState({open:!0})},r.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},r.prototype.isActiveTool=function(t){return t&&this._activeTool===t},r.prototype.updateToolHighlight=function(t){var e,n;this._toolsContainer||(e=Object(o.query)(".djs-palette-entries",this._container),this._toolsContainer=Object(o.query)("[data-group=tools]",e)),n=this._toolsContainer,Object(i.forEach)(n.children,(function(e){var n=e.getAttribute("data-action");if(n){var i=Object(o.classes)(e);n=n.replace("-tool",""),i.contains("entry")&&n===t?i.add("highlighted-entry"):i.remove("highlighted-entry")}}))},r.prototype.isOpen=function(){return Object(o.classes)(this._container).has("open")},r.prototype._getParentContainer=function(){return this._canvas.getContainer()},r.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';e.a={__init__:["palette"],palette:["type",r]}},"971a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("b2ea");function o(t){this._eventBus=t}o.$inject=["eventBus"],o.prototype.on=function(t,e,n,o,r,c){if((Object(i.isFunction)(e)||Object(i.isNumber)(e))&&(c=r,r=o,o=n,n=e,e=null),Object(i.isFunction)(n)&&(c=r,r=o,o=n,n=1e3),Object(i.isObject)(r)&&(c=r,r=!1),!Object(i.isFunction)(o))throw new Error("handlerFn must be a function");Object(i.isArray)(t)||(t=[t]);var a=this._eventBus;Object(i.forEach)(t,(function(t){var i=["commandStack",t,e].filter((function(t){return t})).join(".");a.on(i,n,r?function(t,e){return function(n){return t.call(e||null,n.context,n.command,n)}}(o,c):o,c)}))};Object(i.forEach)(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],(function(t){o.prototype[t]=function(e,n,o,r,c){(Object(i.isFunction)(e)||Object(i.isNumber)(e))&&(c=r,r=o,o=n,n=e,e=null),this.on(e,t,n,o,r,c)}}))},"9e29":function(t,e,n){"use strict";var i=n("459f"),o=n("b2ea"),r=n("bd53");function c(t,e,n){this._canvas=n,this._opts=Object(o.assign)({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},t);var i=this;e.on("drag.move",(function(t){var e=i._toBorderPoint(t);i.startScroll(e)})),e.on(["drag.cleanup"],(function(){i.stopScroll()}))}function a(t,e,n){return e<t&&t<n}c.$inject=["config.autoScroll","eventBus","canvas"],c.prototype.startScroll=function(t){var e=this._canvas,n=this._opts,i=this,o=e.getContainer().getBoundingClientRect(),r=[t.x,t.y,o.width-t.x,o.height-t.y];this.stopScroll();for(var c=0,s=0,u=0;u<4;u++)a(r[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(0===u?c=n.scrollStep:1==u?s=n.scrollStep:2==u?c=-n.scrollStep:3==u&&(s=-n.scrollStep));0===c&&0===s||(e.scroll({dx:c,dy:s}),this._scrolling=setTimeout((function(){i.startScroll(t)}),n.scrollRepeatTimeout))},c.prototype.stopScroll=function(){clearTimeout(this._scrolling)},c.prototype.setOptions=function(t){this._opts=Object(o.assign)({},this._opts,t)},c.prototype._toBorderPoint=function(t){var e=this._canvas._container.getBoundingClientRect(),n=Object(r.c)(t.originalEvent);return{x:n.x-e.left,y:n.y-e.top}};e.a={__depends__:[i.a],__init__:["autoScroll"],autoScroll:["type",c]}},a2d9:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var i=n("f6d6"),o=/^djs-cursor-.*$/;function r(t){var e=Object(i.classes)(document.body);e.removeMatching(o),t&&e.add("djs-cursor-"+t)}function c(){r(null)}},a326:function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6"),r=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function c(t,e,n){var o=Object(i.isDefined)(t&&t.scale)?t.scale:{min:1,max:1.5};this._config={scale:o},this._eventBus=e,this._canvas=n,this._providers={},this._current={}}c.$inject=["config.popupMenu","eventBus","canvas"],c.prototype.registerProvider=function(t,e,n){n||(n=e,e=1e3),this._eventBus.on("popupMenu.getProviders."+t,e,(function(t){t.providers.push(n)}))},c.prototype.isEmpty=function(t,e){if(!t)throw new Error("element parameter is missing");if(!e)throw new Error("providerId parameter is missing");var n=this._getProviders(e);if(!n)return!0;var o=this._getEntries(t,n),r=this._getHeaderEntries(t,n),c=Object(i.size)(o)>0,a=r&&Object(i.size)(r)>0;return!c&&!a},c.prototype.open=function(t,e,n){var o=this._getProviders(e);if(!t)throw new Error("Element is missing");if(!o||!o.length)throw new Error("No registered providers for: "+e);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:e,element:t,position:n},c=this._getEntries(t,o),a=this._getHeaderEntries(t,o);r.entries=Object(i.assign)({},c,a),r.container=this._createContainer(),Object(i.size)(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-header")),Object(i.size)(c)&&r.container.appendChild(this._createEntries(c,"djs-popup-body"));var s=this._canvas.getContainer();this._attachContainer(r.container,s,n.cursor),this._bindAutoClose()},c.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),Object(o.remove)(this._current.container),this._current.container=null)},c.prototype.isOpen=function(){return!!this._current.container},c.prototype.trigger=function(t){t.preventDefault();var e=t.delegateTarget||t.target,n=Object(o.attr)(e,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,t,i)},c.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+t,providers:[]});return this._eventBus.fire(e),e.providers},c.prototype._getEntries=function(t,e){var n={};return Object(i.forEach)(e,(function(e){if(e.getPopupMenuEntries){var o=e.getPopupMenuEntries(t);Object(i.isFunction)(o)?n=o(n):Object(i.forEach)(o,(function(t,e){n[e]=t}))}else Object(i.forEach)(e.getEntries(t),(function(t){var e=t.id;if(!e)throw new Error("every entry must have the id property set");n[e]=Object(i.omit)(t,["id"])}))})),n},c.prototype._getHeaderEntries=function(t,e){var n={};return Object(i.forEach)(e,(function(e){if(e.getPopupMenuHeaderEntries){var o=e.getPopupMenuHeaderEntries(t);Object(i.isFunction)(o)?n=o(n):Object(i.forEach)(o,(function(t,e){n[e]=t}))}else{if(!e.getHeaderEntries)return;Object(i.forEach)(e.getHeaderEntries(t),(function(t){var e=t.id;if(!e)throw new Error("every entry must have the id property set");n[e]=Object(i.omit)(t,["id"])}))}})),n},c.prototype._getEntry=function(t){var e=this._current.entries[t];if(!e)throw new Error("entry not found");return e},c.prototype._emit=function(t){this._eventBus.fire("popupMenu."+t)},c.prototype._createContainer=function(){var t=Object(o.domify)('<div class="djs-popup">'),e=this._current.position,n=this._current.className;return Object(i.assign)(t.style,{position:"absolute",left:e.x+"px",top:e.y+"px",visibility:"hidden"}),Object(o.classes)(t).add(n),t},c.prototype._attachContainer=function(t,e,n){var i=this;o.delegate.bind(t,".entry","click",(function(t){i.trigger(t)})),this._updateScale(t),e.appendChild(t),n&&this._assureIsInbounds(t,n)},c.prototype._updateScale=function(t){var e,n,o,r,c=this._canvas.zoom(),a=this._config.scale,s=c;!0!==a&&(!1===a?(e=1,n=1):(e=a.min,n=a.max),Object(i.isDefined)(e)&&c<e&&(s=e),Object(i.isDefined)(n)&&c>n&&(s=n)),r="scale("+s+")",(o=t).style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(t){o.style[t+"transform"]=r}))},c.prototype._assureIsInbounds=function(t,e){var n,o,r=this._canvas._container.getBoundingClientRect(),c=t.offsetLeft,a=t.offsetTop,s=t.scrollWidth,u=t.scrollHeight,h={},d=e.x-r.left,l=e.y-r.top;c+s>r.width&&(h.x=!0),a+u>r.height&&(h.y=!0),h.x&&h.y?(n=d-s+"px",o=l-u+"px"):h.x?(n=d-s+"px",o=l+"px"):h.y&&l<u?(n=d+"px",o="10px"):h.y&&(n=d+"px",o=l-u+"px"),Object(i.assign)(t.style,{left:n,top:o},{visibility:"visible","z-index":1e3})},c.prototype._createEntries=function(t,e){var n=Object(o.domify)("<div>"),r=this;return Object(o.classes)(n).add(e),Object(i.forEach)(t,(function(t,e){var i=r._createEntry(t,e);n.appendChild(i)})),n},c.prototype._createEntry=function(t,e){var n=Object(o.domify)("<div>"),i=Object(o.classes)(n);if(i.add("entry"),t.className&&t.className.split(" ").forEach((function(t){i.add(t)})),Object(o.attr)(n,"data-id",e),t.label){var r=Object(o.domify)("<span>");r.textContent=t.label,n.appendChild(r)}return t.imageUrl&&n.appendChild(Object(o.domify)('<img src="'+t.imageUrl+'" />')),!0===t.active&&i.add("active"),!0===t.disabled&&i.add("disabled"),t.title&&(n.title=t.title),n},c.prototype._bindAutoClose=function(){this._eventBus.once(r,this.close,this)},c.prototype._unbindAutoClose=function(){this._eventBus.off(r,this.close,this)};e.a={__init__:["popupMenu"],popupMenu:["type",c]}},a38c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("b2ea"),o=n("e7cf");function r(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function c(t){this._snapValues={}}r.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},r.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,-1===this._snapLocations.indexOf(t)&&this._snapLocations.push(t)},r.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)},r.prototype.getSnapLocations=function(){return this._snapLocations},r.prototype.setSnapLocations=function(t){this._snapLocations=t},r.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new c).initDefaults(this._defaultSnaps),n},c.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),-1===n.x.indexOf(e.x)&&n.x.push(e.x),-1===n.y.indexOf(e.y)&&n.y.push(e.y)},c.prototype.snap=function(t,e,n,i){var r=this._snapValues[e];return r&&Object(o.f)(t[n],r[n],i)},c.prototype.initDefaults=function(t){var e=this;Object(i.forEach)(t||{},(function(t,n){Object(i.forEach)(t,(function(t){e.add(n,t)}))}))}},a479:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("a38c"),o=n("e7cf"),r=n("172a"),c=n("b2ea");function a(t,e,n){var i=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],(function(t){i.initSnap(t)})),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,(function(t){var e=t.context,c=e.shape,a=e.snapContext,s=e.target;if((!t.originalEvent||!Object(r.b)(t.originalEvent))&&!Object(o.c)(t)&&s){var u=a.pointsForTarget(s);u.initialized||((u=i.addSnapTargetPoints(u,c,s)).initialized=!0),n.snap(t,u)}})),e.on(["create.cleanup","shape.move.cleanup"],(function(){n.hide()}))}function s(t){return!!t.labelTarget}a.$inject=["elementRegistry","eventBus","snapping"],a.prototype.initSnap=function(t){var e,n=this._elementRegistry,r=t.context,c=r.shape,a=r.snapContext;a||(a=r.snapContext=new i.a);var u=(e=n.get(c.id)?Object(o.d)(c,t):{x:t.x+Object(o.d)(c).x,y:t.y+Object(o.d)(c).y}).x-c.width/2,h=e.y-c.height/2,d=e.x+c.width/2,l=e.y+c.height/2;return a.setSnapOrigin("mid",{x:e.x-t.x,y:e.y-t.y}),s(c)||(a.setSnapOrigin("top-left",{x:u-t.x,y:h-t.y}),a.setSnapOrigin("bottom-right",{x:d-t.x,y:l-t.y})),a},a.prototype.addSnapTargetPoints=function(t,e,n){var i=this.getSnapTargets(e,n);return Object(c.forEach)(i,(function(n){if(s(n))s(e)&&t.add("mid",Object(o.d)(n));else if(n.waypoints){if(n.waypoints.length<3)return;var i=n.waypoints.slice(1,-1);Object(c.forEach)(i,(function(e){t.add("mid",e)}))}else{t.add("mid",Object(o.d)(n))}})),Object(c.isNumber)(e.x)&&Object(c.isNumber)(e.y)?(this._elementRegistry.get(e.id)&&t.add("mid",Object(o.d)(e)),t):t},a.prototype.getSnapTargets=function(t,e){return Object(o.b)(e).filter((function(t){return!t.hidden}))}},a59c:function(t,e,n){"use strict";var i=n("f6d6"),o=n("44f8");function r(t,e){var n=Object(o.a)(t.min),i=Object(o.a)(t.max);return(Math.abs(n)+Math.abs(i))/e}var c=n("b2ea"),a=Math.sign||function(t){return t>=0?1:-1},s={min:.2,max:4};function u(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Object(c.bind)(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",(function(e){i._init(!1!==t.enabled)}))}u.$inject=["config.zoomScroll","eventBus","canvas"],u.prototype.scroll=function(t){this._canvas.scroll(t)},u.prototype.reset=function(){this._canvas.zoom("fit-viewport")},u.prototype.zoom=function(t,e){var n=r(s,20);this._totalDelta+=t,Math.abs(this._totalDelta)>.1&&(this._zoom(t,e,n),this._totalDelta=0)},u.prototype._handleWheel=function(t){if(!Object(i.closest)(t.target,".djs-scrollable",!0)){var e=this._container;t.preventDefault();var n,o=t.ctrlKey,r=t.shiftKey,c=-1*this._scale;if(c*=o?0===t.deltaMode?.02:.32:0===t.deltaMode?1:16,o){var s=e.getBoundingClientRect(),u={x:t.clientX-s.left,y:t.clientY-s.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*a(t.deltaY)*c,this.zoom(n,u)}else n=r?{dx:c*t.deltaY,dy:0}:{dx:c*t.deltaX,dy:c*t.deltaY},this.scroll(n)}},u.prototype.stepZoom=function(t,e){var n=r(s,10);this._zoom(t,e,n)},u.prototype._zoom=function(t,e,n){var i=this._canvas,r=t>0?1:-1,c=Object(o.a)(i.zoom()),a=Math.round(c/n)*n;a+=n*r;var u,h,d=Math.pow(10,a);i.zoom((u=s,h=d,Math.max(u.min,Math.min(u.max,h))),e)},u.prototype.toggle=function(t){var e=this._container,n=this._handleWheel,o=this._enabled;return void 0===t&&(t=!o),o!==t&&i.event[t?"bind":"unbind"](e,"wheel",n,!1),this._enabled=t,t},u.prototype._init=function(t){this.toggle(t)};e.a={__init__:["zoomScroll"],zoomScroll:["type",u]}},a814:function(t,e,n){"use strict";var i=n("e7cf"),o=n("172a"),r=n("b2ea");function c(t,e,n){return n||(n="round"),Math[n](t/e)*e}function a(t,e,n){var c=!n||!1!==n.active;this._eventBus=e;var a=this;e.on("diagram.init",800,(function(){a.setActive(c)})),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,(function(e){var n=e.originalEvent;if(!(!a.active||n&&Object(o.b)(n))){var c=e.context,d=c.gridSnappingContext;d||(d=c.gridSnappingContext={}),["x","y"].forEach((function(n){var o={},c=function(t,e,n){var i=t.context,o=t.shape,c=i.gridSnappingContext,a=c.snapLocation,u=c.snapOffset;if(u&&Object(r.isNumber)(u[e]))return u[e];u||(u=c.snapOffset={});Object(r.isNumber)(u[e])||(u[e]=0);if(!o)return u[e];n.get(o.id)||(s(e)?u[e]+=o[e]+o.width/2:u[e]+=o[e]+o.height/2);if(!a)return u[e];"x"===e?/left/.test(a)?u[e]-=o.width/2:/right/.test(a)&&(u[e]+=o.width/2):/top/.test(a)?u[e]-=o.height/2:/bottom/.test(a)&&(u[e]+=o.height/2);return u[e]}(e,n,t);c&&(o.offset=c);var d=function(t,e){var n=t.context,i=n.createConstraints,o=n.resizeConstraints||{},r=n.gridSnappingContext,c=r.snapConstraints;if(c&&c[e])return c[e];c||(c=r.snapConstraints={});c[e]||(c[e]={});var a=n.direction;i&&(s(e)?(c.x.min=i.left,c.x.max=i.right):(c.y.min=i.top,c.y.max=i.bottom));var d=o.min,l=o.max;d&&(s(e)?h(a)?c.x.max=d.left:c.x.min=d.right:u(a)?c.y.max=d.top:c.y.min=d.bottom);l&&(s(e)?h(a)?c.x.min=l.left:c.x.max=l.right:u(a)?c.y.min=l.top:c.y.max=l.bottom);return c[e]}(e,n);d&&Object(r.assign)(o,d),Object(i.c)(e,n)||a.snapEvent(e,n,o)}))}}))}function s(t){return"x"===t}function u(t){return-1!==t.indexOf("n")}function h(t){return-1!==t.indexOf("w")}a.prototype.snapEvent=function(t,e,n){var o=this.snapValue(t[e],n);Object(i.e)(t,e,o)},a.prototype.getGridSpacing=function(){return 10},a.prototype.snapValue=function(t,e){var n,i,o=0;return e&&e.offset&&(o=e.offset),t=c(t+=o,10),e&&e.min&&(n=e.min,Object(r.isNumber)(n)&&(n=c(n+o,10,"ceil"),t=Math.max(t,n))),e&&e.max&&(i=e.max,Object(r.isNumber)(i)&&(i=c(i+o,10,"floor"),t=Math.min(t,i))),t-=o},a.prototype.isActive=function(){return this.active},a.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})},a.prototype.toggleActive=function(){this.setActive(!this.active)},a.$inject=["elementRegistry","eventBus","config.gridSnapping"];var d=n("a092"),l=n.n(d),p=n("971a");function f(t,e){p.a.call(this,t),this._gridSnapping=e;var n=this;this.preExecute("shape.resize",(function(t){var e=t.context,i=(e.hints||{}).autoResize;if(i){var o=e.shape,c=e.newBounds;Object(r.isString)(i)?e.newBounds=n.snapComplex(c,i):e.newBounds=n.snapSimple(o,c)}}))}f.$inject=["eventBus","gridSnapping","modeling"],l()(f,p.a),f.prototype.snapSimple=function(t,e){var n=this._gridSnapping;return e.width=n.snapValue(e.width,{min:e.width}),e.height=n.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e},f.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t},f.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,i=/w/.test(e),o=/e/.test(e),c={};return c.width=n.snapValue(t.width,{min:t.width}),o&&(i?(c.x=n.snapValue(t.x,{max:t.x}),c.width+=n.snapValue(t.x-c.x,{min:t.x-c.x})):t.x=t.x+t.width-c.width),Object(r.assign)(t,c),t},f.prototype.snapVertically=function(t,e){var n=this._gridSnapping,i=/n/.test(e),o=/s/.test(e),c={};return c.height=n.snapValue(t.height,{min:t.height}),i&&(o?(c.y=n.snapValue(t.y,{max:t.y}),c.height+=n.snapValue(t.y-c.y,{min:t.y-c.y})):t.y=t.y+t.height-c.height),Object(r.assign)(t,c),t};function v(t,e){t.on(["spaceTool.move","spaceTool.end"],2e3,(function(t){var n,i=t.context;i.initialized&&("x"===i.axis?(n=e.snapValue(t.dx),t.x=t.x+n-t.dx,t.dx=n):(n=e.snapValue(t.dy),t.y=t.y+n-t.dy,t.dy=n))}))}v.$inject=["eventBus","gridSnapping"];var g={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",f],gridSnappingSpaceToolBehavior:["type",v]};e.a={__depends__:[g],__init__:["gridSnapping"],gridSnapping:["type",a]}},a958:function(t,e,n){"use strict";n.d(e,"a",(function(){return K}));var i=n("b2ea"),o=n("38f0");function r(t,e){this._modeling=t,this._canvas=e}function c(t){this._modeling=t}function a(t,e){this._canvas=t,this._layouter=e}r.$inject=["modeling","canvas"],r.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,o=t.alignment;Object(i.forEach)(n,(function(t){var n={x:0,y:0};o.left?n.x=o.left-t.x:o.right?n.x=o.right-t.width-t.x:o.center?n.x=o.center-Math.round(t.width/2)-t.x:o.top?n.y=o.top-t.y:o.bottom?n.y=o.bottom-t.height-t.y:o.middle&&(n.y=o.middle-Math.round(t.height/2)-t.y),e.moveElements([t],n,t.parent)}))},r.prototype.postExecute=function(t){},c.$inject=["modeling"],c.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,i=t.shape,o=t.hints||{};i=t.shape=this._modeling.createShape(i,t.position,n,{attach:o.attach}),t.shape=i},c.prototype.postExecute=function(t){var e,n,o=t.hints||{};e=t.source,n=t.shape,Object(i.some)(e.outgoing,(function(t){return t.target===n}))||(o.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))},a.$inject=["canvas","layouter"],a.prototype.execute=function(t){var e=t.connection,n=t.source,i=t.target,o=t.parent,r=t.parentIndex,c=t.hints;if(!n||!i)throw new Error("source and target required");if(!o)throw new Error("parent required");return e.source=n,e.target=i,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,c)),this._canvas.addConnection(e,o,r),e},a.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var s=n("59ef"),u=Math.round;function h(t){this._modeling=t}function d(t){return!!t.waypoints}h.$inject=["modeling"],h.prototype.preExecute=function(t){var e=t.elements,n=t.parent,o=t.parentIndex,r=t.position,c=t.hints,a=this._modeling;Object(i.forEach)(e,(function(t){Object(i.isNumber)(t.x)||(t.x=0),Object(i.isNumber)(t.y)||(t.y=0)}));var h=Object(s.b)(e);Object(i.forEach)(e,(function(t){d(t)&&(t.waypoints=Object(i.map)(t.waypoints,(function(t){return{x:u(t.x-h.x-h.width/2+r.x),y:u(t.y-h.y-h.height/2+r.y)}}))),Object(i.assign)(t,{x:u(t.x-h.x-h.width/2+r.x),y:u(t.y-h.y-h.height/2+r.y)})}));var l=Object(s.e)(e),p={};Object(i.forEach)(e,(function(t){if(d(t))p[t.id]=Object(i.isNumber)(o)?a.createConnection(p[t.source.id],p[t.target.id],o,t,t.parent||n,c):a.createConnection(p[t.source.id],p[t.target.id],t,t.parent||n,c);else{var e=Object(i.assign)({},c);-1===l.indexOf(t)&&(e.autoResize=!1),p[t.id]=Object(i.isNumber)(o)?a.createShape(t,Object(i.pick)(t,["x","y","width","height"]),t.parent||n,o,e):a.createShape(t,Object(i.pick)(t,["x","y","width","height"]),t.parent||n,e)}})),t.elements=Object(i.values)(p)};var l=n("a092"),p=n.n(l),f=Math.round;function v(t){this._canvas=t}function g(t){v.call(this,t)}v.$inject=["canvas"],v.prototype.execute=function(t){var e=t.shape,n=t.position,o=t.parent,r=t.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?Object(i.assign)(e,n):Object(i.assign)(e,{x:n.x-f(e.width/2),y:n.y-f(e.height/2)}),this._canvas.addShape(e,o,r),e},v.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e},p()(g,v),g.$inject=["canvas"];var y=v.prototype.execute;g.prototype.execute=function(t){var e=t.shape;return function(t){["width","height"].forEach((function(e){void 0===t[e]&&(t[e]=0)}))}(e),e.labelTarget=t.labelTarget,y.call(this,t)};var b=v.prototype.revert;g.prototype.revert=function(t){return t.shape.labelTarget=null,b.call(this,t)};var m=n("414d");function _(t,e){this._canvas=t,this._modeling=e}function j(t,e){this._modeling=t,this._elementRegistry=e}_.$inject=["canvas","modeling"],_.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=Object(m.indexOf)(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},_.prototype.revert=function(t){var e=t.connection,n=t.parent,i=t.parentIndex;return e.source=t.source,e.target=t.target,Object(m.add)(n.children,e,i),this._canvas.addConnection(e,n),e},j.$inject=["modeling","elementRegistry"],j.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry,o=t.elements;Object(i.forEach)(o,(function(t){n.get(t.id)&&(t.waypoints?e.removeConnection(t):e.removeShape(t))}))};var x=n("0e13");function O(t,e){this._canvas=t,this._modeling=e}function w(t){this._modeling=t}O.$inject=["canvas","modeling"],O.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;Object(x.a)(n.incoming,(function(t){e.removeConnection(t,{nested:!0})})),Object(x.a)(n.outgoing,(function(t){e.removeConnection(t,{nested:!0})})),Object(x.a)(n.children,(function(t){t.waypoints?e.removeConnection(t,{nested:!0}):e.removeShape(t,{nested:!0})}))},O.prototype.execute=function(t){var e=this._canvas,n=t.shape,i=n.parent;return t.oldParent=i,t.oldParentIndex=Object(m.indexOf)(i.children,n),e.removeShape(n),n},O.prototype.revert=function(t){var e=this._canvas,n=t.shape,i=t.oldParent,o=t.oldParentIndex;return Object(m.add)(i.children,n,o),e.addShape(n,i),n},w.$inject=["modeling"];var E={x:"y",y:"x"};function S(t,e){this._layouter=t,this._canvas=e}function k(){}w.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,o=t.axis,r=t.dimension;function c(t,e){t.range.min=Math.min(e[o],t.range.min),t.range.max=Math.max(e[o]+e[r],t.range.max)}function a(t){return t[o]+t[r]/2}function s(t){return t.length-1}function u(t){return t.max-t.min}var h,d,l=n[0],p=s(n),f=n[p],v=0;Object(i.forEach)(n,(function(t,h){var d,l,f;t.elements.length<2?h&&h!==n.length-1&&(c(t,t.elements[0]),v+=u(t.range)):(l=(d=Object(i.sortBy)(t.elements,o))[0],h===p&&(l=d[s(d)]),f=a(l),t.range=null,Object(i.forEach)(d,(function(n){!function(t,n){var i={y:0};i[o]=t-a(n),i[o]&&(i[E[o]]=0,e.moveElements([n],i,n.parent))}(f,n),null!==t.range?c(t,n):t.range={min:n[o],max:n[o]+n[r]}})),h&&h!==n.length-1&&(v+=u(t.range)))})),d=Math.abs(f.range.min-l.range.max),(h=Math.round((d-v)/(n.length-1)))<n.length-1||Object(i.forEach)(n,(function(t,c){var a,s={};t!==l&&t!==f&&(a=n[c-1],t.range.max=0,Object(i.forEach)(t.elements,(function(n,i){s[E[o]]=0,s[o]=a.range.max-n[o]+h,t.range.min!==n[o]&&(s[o]+=n[o]-t.range.min),s[o]&&e.moveElements([n],s,n.parent),t.range.max=Math.max(n[o]+n[r],i?t.range.max:0)})))}))},w.prototype.postExecute=function(t){},S.$inject=["layouter","canvas"],S.prototype.execute=function(t){var e=t.connection,n=e.waypoints;return Object(i.assign)(t,{oldWaypoints:n}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e},S.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e},k.prototype.execute=function(t){var e=t.connection,n=t.delta,o=t.newParent||e.parent,r=t.newParentIndex,c=e.parent;return t.oldParent=c,t.oldParentIndex=Object(m.remove)(c.children,e),Object(m.add)(o.children,e,r),e.parent=o,Object(i.forEach)(e.waypoints,(function(t){t.x+=n.x,t.y+=n.y,t.original&&(t.original.x+=n.x,t.original.y+=n.y)})),e},k.prototype.revert=function(t){var e=t.connection,n=e.parent,o=t.oldParent,r=t.oldParentIndex,c=t.delta;return Object(m.remove)(n.children,e),Object(m.add)(o.children,e,r),e.parent=o,Object(i.forEach)(e.waypoints,(function(t){t.x-=c.x,t.y-=c.y,t.original&&(t.original.x-=c.x,t.original.y-=c.y)})),e};var C=n("c50c");function M(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function P(t){this._modeling=t}function T(t){this._helper=new P(t)}function B(t){this._modeling=t,this._helper=new P(t)}function R(t){this._modeling=t}function A(t){return t.original||t}function L(t,e){this._modeling=t,this._rules=e}function z(t){this._modeling=t}M.prototype.add=function(t,e){return this.addAll([t],e)},M.prototype.addAll=function(t,e){var n=Object(s.c)(t,!!e,this);return Object(i.assign)(this,n),this},P.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]},P.prototype.moveClosure=function(t,e,n,o,r){var c=this._modeling,a=t.allShapes,s=t.allConnections,u=t.enclosedConnections,h=t.topLevel,d=!1;r&&r.parent===n&&(d=!0),Object(i.forEach)(a,(function(t){c.moveShape(t,e,h[t.id]&&!d&&n,{recurse:!1,layout:!1})})),Object(i.forEach)(s,(function(t){var i=!!a[t.source.id],o=!!a[t.target.id];u[t.id]&&i&&o?c.moveConnection(t,e,h[t.id]&&!d&&n):c.layoutConnection(t,{connectionStart:i&&Object(C.a)(t,t.source,e),connectionEnd:o&&Object(C.b)(t,t.target,e)})}))},P.prototype.getClosure=function(t){return(new M).addAll(t,!0)},T.$inject=["modeling"],T.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)},T.prototype.postExecute=function(t){var e,n=t.hints;n&&n.primaryShape&&(e=n.primaryShape,n.oldParent=e.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,e)},B.$inject=["modeling"],B.prototype.execute=function(t){var e=t.shape,n=t.delta,o=t.newParent||e.parent,r=t.newParentIndex,c=e.parent;return t.oldBounds=Object(i.pick)(e,["x","y","width","height"]),t.oldParent=c,t.oldParentIndex=Object(m.remove)(c.children,e),Object(m.add)(o.children,e,r),Object(i.assign)(e,{parent:o,x:e.x+n.x,y:e.y+n.y}),e},B.prototype.postExecute=function(t){var e=t.shape,n=t.delta,o=t.hints,r=this._modeling;!1!==o.layout&&(Object(i.forEach)(e.incoming,(function(t){r.layoutConnection(t,{connectionEnd:Object(C.b)(t,e,n)})})),Object(i.forEach)(e.outgoing,(function(t){r.layoutConnection(t,{connectionStart:Object(C.a)(t,e,n)})}))),!1!==o.recurse&&this.moveChildren(t)},B.prototype.revert=function(t){var e=t.shape,n=t.oldParent,o=t.oldParentIndex,r=t.delta;return Object(m.add)(n.children,e,o),Object(i.assign)(e,{parent:n,x:e.x-r.x,y:e.y-r.y}),e},B.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)},B.prototype.getNewParent=function(t){return t.newParent||t.shape.parent},R.$inject=["modeling"],R.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,o=t.connection,r=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return Object(i.isArray)(r)&&(t.oldWaypoints=o.waypoints,o.waypoints=r),e&&(t.oldSource=o.source,o.source=e),n&&(t.oldTarget=o.target,o.target=n),o},R.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,o=t.newTarget,r=t.dockingOrPoints,c=t.hints||{},a={};c.connectionStart&&(a.connectionStart=c.connectionStart),c.connectionEnd&&(a.connectionEnd=c.connectionEnd),!1!==c.layoutConnection&&(!n||o&&"source"!==c.docking||(a.connectionStart=a.connectionStart||A(Object(i.isArray)(r)?r[0]:r)),!o||n&&"target"!==c.docking||(a.connectionEnd=a.connectionEnd||A(Object(i.isArray)(r)?r[r.length-1]:r)),c.newWaypoints&&(a.waypoints=c.newWaypoints),this._modeling.layoutConnection(e,a))},R.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,i=t.oldWaypoints,o=t.connection;return e&&(o.source=e),n&&(o.target=n),i&&(o.waypoints=i),o},L.$inject=["modeling","rules"],L.prototype.preExecute=function(t){var e,n=this,o=this._modeling,r=this._rules,c=t.oldShape,a=t.newData,s=t.hints||{};function u(t,e,n){return r.allowed("connection.reconnect",{connection:n,source:t,target:e})}var h,d={x:a.x,y:a.y},l={x:c.x,y:c.y,width:c.width,height:c.height};e=t.newShape=t.newShape||n.createShape(a,d,c.parent,s),c.host&&o.updateAttachment(e,c.host),!1!==s.moveChildren&&(h=c.children.slice(),o.moveElements(h,{x:0,y:0},e,s));var p=c.incoming.slice(),f=c.outgoing.slice();Object(i.forEach)(p,(function(t){u(t.source,e,t)&&n.reconnectEnd(t,e,Object(C.d)(t,e,l),s)})),Object(i.forEach)(f,(function(t){var i=t.target;u(e,i,t)&&n.reconnectStart(t,e,Object(C.c)(t,e,l),s)}))},L.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)},L.prototype.execute=function(t){},L.prototype.revert=function(t){},L.prototype.createShape=function(t,e,n,i){return this._modeling.createShape(t,e,n,i)},L.prototype.reconnectStart=function(t,e,n,i){this._modeling.reconnectStart(t,e,n,i)},L.prototype.reconnectEnd=function(t,e,n,i){this._modeling.reconnectEnd(t,e,n,i)},z.$inject=["modeling"],z.prototype.execute=function(t){var e=t.shape,n=t.newBounds,o=t.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},Object(i.assign)(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},z.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,o=t.oldBounds;!1!==(t.hints||{}).layout&&(Object(i.forEach)(n.incoming,(function(t){e.layoutConnection(t,{connectionEnd:Object(C.d)(t,n,o)})})),Object(i.forEach)(n.outgoing,(function(t){e.layoutConnection(t,{connectionStart:Object(C.c)(t,n,o)})})))},z.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return Object(i.assign)(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e};var D=n("30f7");function I(t){this._modeling=t}function N(t){return Object(i.assign)({},t)}function $(t){switch(t){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function H(t,e,n){var i=$(n);return/e|s/.test(n)?t[i]>e:/n|w/.test(n)?t[i]<e:void 0}function G(t,e){return-1!==t.indexOf(e)}function F(t){this._modeling=t}function U(t){this._modeling=t}function W(t,e){return Object(m.remove)(t&&t.attachers,e)}function V(t,e,n){if(t){var i=t.attachers;i||(t.attachers=i=[]),Object(m.add)(i,e,n)}}function q(){}function K(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var i=this;t.on("diagram.init",(function(){i.registerHandlers(n)}))}I.$inject=["modeling"],I.prototype.preExecute=function(t){var e=t.delta,n=t.direction,o=t.movingShapes,r=t.resizingShapes,c=t.start,a={};this.moveShapes(o,e),Object(i.forEach)(r,(function(t){a[t.id]=function(t){return{x:t.x,y:t.y,height:t.height,width:t.width}}(t)})),this.resizeShapes(r,e,n),this.updateConnectionWaypoints(Object(D.b)(o,r),e,n,c,o,r,a)},I.prototype.execute=function(){},I.prototype.revert=function(){},I.prototype.moveShapes=function(t,e){var n=this;Object(i.forEach)(t,(function(t){n._modeling.moveShape(t,e,null,{autoResize:!1,layout:!1,recurse:!1})}))},I.prototype.resizeShapes=function(t,e,n){var o=this;Object(i.forEach)(t,(function(t){var i=Object(D.c)(t,n,e);o._modeling.resizeShape(t,i,null,{attachSupport:!1,autoResize:!1,layout:!1})}))},I.prototype.updateConnectionWaypoints=function(t,e,n,o,r,c,a){var s=this,u=r.concat(c);Object(i.forEach)(t,(function(t){var h=t.source,d=t.target,l=function(t){return Object(i.map)(t.waypoints,(function(t){return(t=N(t)).original&&(t.original=N(t.original)),t}))}(t),p=$(n),f={labelBehavior:!1};G(u,h)&&G(u,d)?(l=Object(i.map)(l,(function(t){return H(t,o,n)&&(t[p]=t[p]+e[p]),t.original&&H(t.original,o,n)&&(t.original[p]=t.original[p]+e[p]),t})),s._modeling.updateWaypoints(t,l,{labelBehavior:!1})):(G(u,h)||G(u,d))&&(G(r,h)?f.connectionStart=Object(C.a)(t,h,e):G(r,d)?f.connectionEnd=Object(C.b)(t,d,e):G(c,h)?f.connectionStart=Object(C.c)(t,h,a[h.id]):G(c,d)&&(f.connectionEnd=Object(C.d)(t,d,a[d.id])),s._modeling.layoutConnection(t,f))}))},F.$inject=["modeling"],F.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=function t(e){var n={};return Object(i.forEach)(e,(function(e){n[e.id]=e.hidden,e.children&&(n=Object(i.assign)({},n,t(e.children)))})),n}(n),e.collapsed=!e.collapsed;var o=function t(e,n){var o=[];return Object(i.forEach)(e,(function(e){e.hidden=n,o=o.concat(e),e.children&&(o=o.concat(t(e.children,e.collapsed||n)))})),o}(n,e.collapsed);return[e].concat(o)},F.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,o=function t(e,n){var o=[];return Object(i.forEach)(e,(function(e){e.hidden=n[e.id],o=o.concat(e),e.children&&(o=o.concat(t(e.children,n)))})),o}(e.children,n);return e.collapsed=!e.collapsed,[e].concat(o)},U.$inject=["modeling"],U.prototype.execute=function(t){var e=t.shape,n=t.newHost,i=e.host;return t.oldHost=i,t.attacherIdx=W(i,e),V(n,e),e.host=n,e},U.prototype.revert=function(t){var e=t.shape,n=t.newHost,i=t.oldHost,o=t.attacherIdx;return e.host=i,W(n,e),V(i,e,o),e},q.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e},q.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e},K.$inject=["eventBus","elementFactory","commandStack"],K.prototype.getHandlers=function(){return{"shape.append":c,"shape.create":v,"shape.delete":O,"shape.move":B,"shape.resize":z,"shape.replace":L,"shape.toggleCollapse":F,spaceTool:I,"label.create":g,"connection.create":a,"connection.delete":_,"connection.move":k,"connection.layout":S,"connection.updateWaypoints":q,"connection.reconnect":R,"elements.create":h,"elements.move":T,"elements.delete":j,"elements.distribute":w,"elements.align":r,"element.updateAttachment":U}},K.prototype.registerHandlers=function(t){Object(i.forEach)(this.getHandlers(),(function(e,n){t.registerHandler(n,e)}))},K.prototype.moveShape=function(t,e,n,i,o){"object"==typeof i&&(o=i,i=null);var r={shape:t,delta:e,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("shape.move",r)},K.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)},K.prototype.moveElements=function(t,e,n,i){var o,r=(i=i||{}).attach,c=n;!0===r?(o=n,c=n.parent):!1===r&&(o=null);var a={shapes:t,delta:e,newParent:c,newHost:o,hints:i};this._commandStack.execute("elements.move",a)},K.prototype.moveConnection=function(t,e,n,i,o){"object"==typeof i&&(o=i,i=void 0);var r={connection:t,delta:e,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("connection.move",r)},K.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)},K.prototype.createConnection=function(t,e,n,i,o,r){"object"==typeof n&&(r=o,o=i,i=n,n=void 0);var c={source:t,target:e,parent:o,parentIndex:n,connection:i=this._create("connection",i),hints:r};return this._commandStack.execute("connection.create",c),c.connection},K.prototype.createShape=function(t,e,n,i,o){"number"!=typeof i&&(o=i,i=void 0);var r,c,a=(o=o||{}).attach;t=this._create("shape",t),a?(r=n.parent,c=n):r=n;var s={position:e,shape:t,parent:r,parentIndex:i,host:c,hints:o};return this._commandStack.execute("shape.create",s),s.shape},K.prototype.createElements=function(t,e,n,o,r){Object(i.isArray)(t)||(t=[t]),"number"!=typeof o&&(r=o,o=void 0);var c={position:e,elements:t,parent:n,parentIndex:o,hints:r=r||{}};return this._commandStack.execute("elements.create",c),c.elements},K.prototype.createLabel=function(t,e,n,i){n=this._create("label",n);var o={labelTarget:t,position:e,parent:i||t.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape},K.prototype.appendShape=function(t,e,n,i,o){o=o||{};var r={source:t,position:n,target:i,shape:e=this._create("shape",e),connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",r),r.shape},K.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)},K.prototype.distributeElements=function(t,e,n){var i={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",i)},K.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)},K.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)},K.prototype.replaceShape=function(t,e,n){var i={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},K.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)},K.prototype.resizeShape=function(t,e,n,i){var o={shape:t,newBounds:e,minBounds:n,hints:i};this._commandStack.execute("shape.resize",o)},K.prototype.createSpace=function(t,e,n,i,o){var r={delta:n,direction:i,movingShapes:t,resizingShapes:e,start:o};this._commandStack.execute("spaceTool",r)},K.prototype.updateWaypoints=function(t,e,n){var i={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},K.prototype.reconnect=function(t,e,n,i,o){var r={connection:t,newSource:e,newTarget:n,dockingOrPoints:i,hints:o||{}};this._commandStack.execute("connection.reconnect",r)},K.prototype.reconnectStart=function(t,e,n,o){o||(o={}),this.reconnect(t,e,t.target,n,Object(i.assign)(o,{docking:"source"}))},K.prototype.reconnectEnd=function(t,e,n,o){o||(o={}),this.reconnect(t,t.source,e,n,Object(i.assign)(o,{docking:"target"}))},K.prototype.connect=function(t,e,n,i){return this.createConnection(t,e,n||{},t.parent,i)},K.prototype._create=function(t,e){return e instanceof o.a?e:this._elementFactory.create(t,e)},K.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)}},abb7:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return g}));var i=n("b2ea"),o=n("59ef"),r=n("b6f8"),c=Math.max,a=Math.min;function s(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function u(t,e,n){var i=n.x,o=n.y,r={x:t.x,y:t.y,width:t.width,height:t.height};return-1!==e.indexOf("n")?(r.y=t.y+o,r.height=t.height-o):-1!==e.indexOf("s")&&(r.height=t.height+o),-1!==e.indexOf("e")?r.width=t.width+i:-1!==e.indexOf("w")&&(r.x=t.x+i,r.width=t.width-i),r}function h(t,e){return{x:t.x+(e.left||0),y:t.y+(e.top||0),width:t.width-(e.left||0)+(e.right||0),height:t.height-(e.top||0)+(e.bottom||0)}}function d(t,e,n){var o=e[t],r=n.min&&n.min[t],s=n.max&&n.max[t];return Object(i.isNumber)(r)&&(o=(/top|left/.test(t)?a:c)(o,r)),Object(i.isNumber)(s)&&(o=(/top|left/.test(t)?c:a)(o,s)),o}function l(t,e){if(!e)return t;var n=Object(r.b)(t);return Object(r.a)({top:d("top",n,e),right:d("right",n,e),bottom:d("bottom",n,e),left:d("left",n,e)})}function p(t,e,n,i){var o=Object(r.b)(e),s={top:/n/.test(t)?o.bottom-n.height:o.top,left:/w/.test(t)?o.right-n.width:o.left,bottom:/s/.test(t)?o.top+n.height:o.bottom,right:/e/.test(t)?o.left+n.width:o.right},u=i?Object(r.b)(i):s,h={top:a(s.top,u.top),left:a(s.left,u.left),bottom:c(s.bottom,u.bottom),right:c(s.right,u.right)};return Object(r.a)(h)}function f(t,e){return void 0!==t?t:20}function v(t){return!t.waypoints&&"label"!==t.type}function g(t,e){var n;if((n=void 0===t.length?Object(i.filter)(t.children,v):t).length)return function(t,e){var n,i,o,r;return"object"==typeof e?(n=f(e.left),i=f(e.right),o=f(e.top),r=f(e.bottom)):n=i=o=r=f(e),{x:t.x-n,y:t.y-o,width:t.width+n+i,height:t.height+o+r}}(Object(o.b)(n),e)}},ac91:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var i=n("bd53");function o(t,e){return(Object(i.a)(t)||t).button===e}function r(t){return o(t,0)}function c(t){return o(t,1)}function a(t){var e=Object(i.a)(t)||t;return!!r(t)&&(/mac/i.test(navigator.platform)?e.metaKey:e.ctrlKey)}function s(t){var e=Object(i.a)(t)||t;return r(t)&&e.shiftKey}},b0d0:function(t,e,n){"use strict";var i=n("8541"),o=n("6225"),r=n("459f"),c=n("8aa3"),a=n("2e40");function s(t,e,n,i,o,r,c){var a=this;this._dragging=e,this._rules=r,this._mouse=c,o.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",(function(t){var e=t.context,n=t.hover,o=e.canStartConnect=a.canStartConnect(n);null!==o&&(e.startTarget=n,i.addMarker(n,o?"connect-ok":"connect-not-ok"))})),t.on(["global-connect.out","global-connect.cleanup"],(function(t){var e=t.context.startTarget,n=t.context.canStartConnect;e&&i.removeMarker(e,n?"connect-ok":"connect-not-ok")})),t.on(["global-connect.ended"],(function(e){var i=e.context.startTarget,o={x:e.x,y:e.y};if(a.canStartConnect(i))return t.once("element.out",(function(){t.once(["connect.ended","connect.canceled"],(function(){t.fire("global-connect.drag.ended")})),n.start(null,i,o)})),!1}))}s.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],s.prototype.start=function(t,e){this._dragging.init(t,"global-connect",{autoActivate:e,trapClick:!1,data:{context:{}}})},s.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)},s.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},s.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};e.a={__depends__:[i.a,o.a,r.a,c.a,a.a],globalConnect:["type",s]}},b0f7:function(t,e,n){"use strict";var i=n("b2ea"),o=n("f6d6"),r=n("172a");function c(t,e){var n=this;this._config=t||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",(function(){n._fire("destroy"),n.unbind()})),e.on("diagram.init",(function(){n._fire("init")})),e.on("attach",(function(){t&&t.bindTo&&n.bind(t.bindTo)})),e.on("detach",(function(){n.unbind()}))}c.$inject=["config.keyboard","eventBus"],c.prototype._keydownHandler=function(t){this._keyHandler(t,"keyboard.keydown")},c.prototype._keyupHandler=function(t){this._keyHandler(t,"keyboard.keyup")},c.prototype._keyHandler=function(t,e){if(!this._isEventIgnored(t)){var n={keyEvent:t};this._eventBus.fire(e||"keyboard.keydown",n)&&t.preventDefault()}},c.prototype._isEventIgnored=function(t){return(e=t.target)&&(Object(o.matches)(e,"input, textarea")||"true"===e.contentEditable)&&this._isModifiedKeyIgnored(t);var e},c.prototype._isModifiedKeyIgnored=function(t){return!Object(r.b)(t)||!this._getAllowedModifiers(t.target).includes(t.key)},c.prototype._getAllowedModifiers=function(t){var e=Object(o.closest)(t,"[input-handle-modified-keys]",!0);return!e||this._node&&!this._node.contains(e)?[]:e.getAttribute("input-handle-modified-keys").split(",")},c.prototype.bind=function(t){this.unbind(),this._node=t,o.event.bind(t,"keydown",this._keydownHandler,!0),o.event.bind(t,"keyup",this._keyupHandler,!0),this._fire("bind")},c.prototype.getBinding=function(){return this._node},c.prototype.unbind=function(){var t=this._node;t&&(this._fire("unbind"),o.event.unbind(t,"keydown",this._keydownHandler,!0),o.event.unbind(t,"keyup",this._keyupHandler,!0)),this._node=null},c.prototype._fire=function(t){this._eventBus.fire("keyboard."+t,{node:this._node})},c.prototype.addListener=function(t,e,n){Object(i.isFunction)(t)&&(n=e,e=t,t=1e3),this._eventBus.on(n||"keyboard.keydown",t,e)},c.prototype.removeListener=function(t,e){this._eventBus.off(e||"keyboard.keydown",t)},c.prototype.hasModifier=r.a,c.prototype.isCmd=r.b,c.prototype.isShift=r.d,c.prototype.isKey=r.c;var a=n("fa45");e.a={__init__:["keyboard","keyboardBindings"],keyboard:["type",c],keyboardBindings:["type",a.a]}},b6f8:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return f}));var i=n("b2ea"),o=n("f885"),r=n("3c00"),c=n.n(r);function a(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function s(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function u(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function h(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function d(t){return s({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function l(t,e,n){n=n||0,Object(i.isObject)(n)||(n={x:n,y:n});var o=u(t),r=u(e),c=o.bottom+n.y<=r.top,a=o.left-n.x>=r.right,s=o.top-n.y>=r.bottom,h=c?"top":s?"bottom":null,d=o.right+n.x<=r.left?"left":a?"right":null;return d&&h?h+"-"+d:d||h||"intersect"}function p(t,e,n){var r,a,u=(r=t,a=e,c()(r,a));return 1===u.length||2===u.length&&Object(o.b)(u[0],u[1])<1?s(u[0]):u.length>1?s((u=Object(i.sortBy)(u,(function(t){var e=Math.floor(100*t.t2)||1;return e=((e=100-e)<10?"0":"")+e,t.segment2+"#"+e})))[n?0:u.length-1]):null}function f(t){t=t.slice();for(var e,n,i,r=0;t[r];)e=t[r],n=t[r-1],i=t[r+1],0===Object(o.b)(e,i)||Object(o.e)(n,i,e)?t.splice(r,1):r++;return t}},bd53:function(t,e,n){"use strict";function i(t){t&&"function"==typeof t.stopPropagation&&t.stopPropagation()}function o(t){return t.originalEvent||t.srcEvent}function r(t,e){i(t),i(o(t))}function c(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c}))},bfa5:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var i=n("b6f8"),o=n("f122");function r(t,e,n){var r=Object(o.a)(e),c=Object(o.a)(n),a=Object(o.b)(t,r),s=a.x*(n.width/e.width),u=a.y*(n.height/e.height);return Object(i.h)({x:c.x+s,y:c.y+u})}function c(t,e,n){var r=Object(o.a)(t),c=Object(o.a)(e),a=Object(o.a)(n),s=Object(o.b)(t,r),u=Object(o.b)(r,c),h=function(t,e,n){var o=Object(i.b)(e),r=Object(i.b)(n);if(function(t,e){return function(t,e){return t.right!==e.right&&t.left!==e.left}(t,e)||function(t,e){return t.top!==e.top&&t.bottom!==e.bottom}(t,e)}(o,r))return null;var c,a,s=Object(i.f)(e,t);if("top"===s)c={x:0,y:r.bottom-o.bottom};else if("bottom"===s)c={x:0,y:r.top-o.top};else if("right"===s)c={x:r.left-o.left,y:0};else{if("left"!==s)return null;c={x:r.right-o.right,y:0}}if(a={x:t.x+c.x,y:t.y+c.y},Object(i.f)(n,a)!==s)return null;return c}(r,e,n);if(h)return h;var d=u.x*(n.width/e.width),l=u.y*(n.height/e.height),p=a.x+d,f=a.y+l;return Object(i.h)({x:p+s.x-t.x,y:f+s.y-t.y})}},c50c:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var i=n("bfa5"),o=n("b6f8"),r=n("b2ea");function c(t,e,n){var o=d(t),r=l(o,e),c=o[0];return r.length?r[r.length-1]:Object(i.a)(c.original||c,n,e)}function a(t,e,n){var o=d(t),r=l(o,e),c=o[o.length-1];return r.length?r[0]:Object(i.a)(c.original||c,n,e)}function s(t,e,n){var o=d(t),r=h(e,n),c=o[0];return Object(i.a)(c.original||c,r,e)}function u(t,e,n){var o=d(t),r=h(e,n),c=o[o.length-1];return Object(i.a)(c.original||c,r,e)}function h(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function d(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function l(t,e){var n=Object(r.map)(t,p);return Object(r.filter)(n,(function(t){return function(t,e){return"intersect"===Object(o.f)(e,t,1)}(t,e)}))}function p(t){return t.original||t}},cc5d:function(t,e,n){"use strict";var i=n("59ef"),o=n("bbf8"),r=n("f6d6"),c=n("b2ea");function a(t,e,n){this.offset=6;var i=e.cls("djs-outline",["no-fill"]),a=this;function s(t,e){var n=Object(o.g)("rect");return Object(o.c)(n,Object(c.assign)({x:10,y:10,width:100,height:100},i)),Object(o.a)(t,n),n}t.on(["shape.added","shape.changed"],500,(function(t){var e=t.element,n=t.gfx,i=Object(r.query)(".djs-outline",n);i||(i=s(n)),a.updateShapeOutline(i,e)})),t.on(["connection.added","connection.changed"],(function(t){var e=t.element,n=t.gfx,i=Object(r.query)(".djs-outline",n);i||(i=s(n)),a.updateConnectionOutline(i,e)}))}a.prototype.updateShapeOutline=function(t,e){Object(o.c)(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},a.prototype.updateConnectionOutline=function(t,e){var n=Object(i.b)(e);Object(o.c)(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},a.$inject=["eventBus","styles","elementRegistry"];e.a={__init__:["outline"],outline:["type",a]}},cfe5:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c}));var i=n("bbf8");function o(t,e,n,o,r){var c=Object(i.i)();c.setTranslate(e,n);var a=Object(i.i)();a.setRotate(o||0,0,0);var s=Object(i.i)();s.setScale(r||1,r||1),Object(i.l)(t,[c,a,s])}function r(t,e,n){var o=Object(i.i)();o.setTranslate(e,n),Object(i.l)(t,o)}function c(t,e){var n=Object(i.i)();n.setRotate(e,0,0),Object(i.l)(t,n)}},d12c:function(t,e,n){"use strict";var i=n("b0f7"),o=n("b2ea"),r={moveSpeed:50,moveSpeedAccelerated:200};function c(t,e,n){var i=this;this._config=Object(o.assign)({},r,t||{}),e.addListener((function(t){var n=t.keyEvent,o=i._config;if(!e.isCmd(n))return;if(e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],n)){var r,c=e.isShift(n)?o.moveSpeedAccelerated:o.moveSpeed;switch(n.key){case"ArrowLeft":case"Left":r="left";break;case"ArrowUp":case"Up":r="up";break;case"ArrowRight":case"Right":r="right";break;case"ArrowDown":case"Down":r="down"}return i.moveCanvas({speed:c,direction:r}),!0}})),this.moveCanvas=function(t){var e=0,i=0,o=t.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(t.direction){case"left":e=o;break;case"up":i=o;break;case"right":e=-o;break;case"down":i=-o}n.scroll({dx:e,dy:i})}}c.$inject=["config.keyboardMove","keyboard","canvas"];e.a={__depends__:[i.a],__init__:["keyboardMove"],keyboardMove:["type",c]}},d2ba:function(t,e,n){"use strict";var i=n("459f"),o=n("6225"),r=n("8aa3"),c=n("45e3"),a=n("2e40"),s=n("b2ea"),u=n("b6f8"),h=n("59ef"),d=n("30f7"),l=n("ac91"),p=n("a2d9"),f=Math.abs,v=Math.round,g={x:"width",y:"height"},y={n:"top",w:"left",s:"bottom",e:"right"},b={n:"s",w:"e",s:"n",e:"w"};function m(t,e,n,i,o,r,c){this._canvas=t,this._dragging=e,this._eventBus=n,this._modeling=i,this._rules=o,this._toolManager=r,this._mouse=c;var a=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",(function(t){n.once("spaceTool.selection.ended",(function(){a.activateMakeSpace(t.originalEvent)}))})),n.on("spaceTool.move",1500,(function(t){var e=t.context,n=e.initialized;n||(n=e.initialized=a.init(t,e)),n&&j(t)})),n.on("spaceTool.end",(function(t){var e=t.context,i=e.axis,o=e.direction,r=e.movingShapes,c=e.resizingShapes,s=e.start;if(e.initialized){j(t);var u={x:0,y:0};u[i]=v(t["d"+i]),a.makeSpace(r,c,u,o,s),n.once("spaceTool.ended",(function(t){a.activateSelection(t.originalEvent,!0,!0)}))}}))}function _(t){return{top:t.top-20,right:t.right+20,bottom:t.bottom+20,left:t.left-20}}function j(t){var e,n,i=t.context.spaceToolConstraints;i&&(Object(s.isNumber)(i.left)&&(e=Math.max(t.x,i.left),t.dx=t.dx+e-t.x,t.x=e),Object(s.isNumber)(i.right)&&(e=Math.min(t.x,i.right),t.dx=t.dx+e-t.x,t.x=e),Object(s.isNumber)(i.top)&&(n=Math.max(t.y,i.top),t.dy=t.dy+n-t.y,t.y=n),Object(s.isNumber)(i.bottom)&&(n=Math.min(t.y,i.bottom),t.dy=t.dy+n-t.y,t.y=n))}function x(t,e){return-1!==t.indexOf(e)}function O(t){return!!t.waypoints}function w(t){return!!t.labelTarget}m.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],m.prototype.activateSelection=function(t,e,n){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:"crosshair",data:{context:{reactivate:n}},trapClick:!1})},m.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:"crosshair",data:{context:{}}})},m.prototype.makeSpace=function(t,e,n,i,o){return this._modeling.createSpace(t,e,n,i,o)},m.prototype.init=function(t,e){var n=f(t.dx)>f(t.dy)?"x":"y",i=t["d"+n],o=t[n]-i;if(f(i)<5)return!1;i<0&&(i*=-1),Object(l.a)(t)&&(i*=-1);var r=Object(d.a)(n,i),c=this._canvas.getRootElement(),a=Object(h.h)(c,!0),v=this.calculateAdjustments(a,n,i,o),m=function(t,e,n,i,o){var r=t.movingShapes,c=t.resizingShapes;if(!c.length)return;var a,d,l={};return Object(s.forEach)(c,(function(t){var p,f,v,m=Object(u.b)(t),j=Object(s.filter)(t.children,(function(t){return!(O(t)||w(t)||x(r,t)||x(c,t))})),E=Object(s.filter)(t.children,(function(t){return!O(t)&&!w(t)&&x(r,t)}));j.length&&(f=_(Object(u.b)(Object(h.b)(j))),p=i-m[y[n]]+f[y[n]],"n"===n?l.bottom=d=Object(s.isNumber)(d)?Math.min(d,p):p:"w"===n?l.right=d=Object(s.isNumber)(d)?Math.min(d,p):p:"s"===n?l.top=a=Object(s.isNumber)(a)?Math.max(a,p):p:"e"===n&&(l.left=a=Object(s.isNumber)(a)?Math.max(a,p):p)),E.length&&(v=_(Object(u.b)(Object(h.b)(E))),p=i-v[y[b[n]]]+m[y[b[n]]],"n"===n?l.bottom=d=Object(s.isNumber)(d)?Math.min(d,p):p:"w"===n?l.right=d=Object(s.isNumber)(d)?Math.min(d,p):p:"s"===n?l.top=a=Object(s.isNumber)(a)?Math.max(a,p):p:"e"===n&&(l.left=a=Object(s.isNumber)(a)?Math.max(a,p):p));var S=o&&o[t.id];S&&("n"===n?(p=i+t[g[e]]-S[g[e]],l.bottom=d=Object(s.isNumber)(d)?Math.min(d,p):p):"w"===n?(p=i+t[g[e]]-S[g[e]],l.right=d=Object(s.isNumber)(d)?Math.min(d,p):p):"s"===n?(p=i-t[g[e]]+S[g[e]],l.top=a=Object(s.isNumber)(a)?Math.max(a,p):p):"e"===n&&(p=i-t[g[e]]+S[g[e]],l.left=a=Object(s.isNumber)(a)?Math.max(a,p):p))})),l}(v,n,r,o,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:r,shapes:v.resizingShapes,start:o}));return Object(s.assign)(e,v,{axis:n,direction:r,spaceToolConstraints:m,start:o}),Object(p.a)("resize-"+("x"===n?"ew":"ns")),!0},m.prototype.calculateAdjustments=function(t,e,n,i){var o=this._rules,r=[],c=[];return Object(s.forEach)(t,(function(t){if(t.parent&&!O(t)){var a=t[e],s=a+t[g[e]];return n>0&&a>i||n<0&&s<i?r.push(t):a<i&&s>i&&o.allowed("shape.resize",{shape:t})?c.push(t):void 0}})),{movingShapes:r,resizingShapes:c}},m.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},m.prototype.isActive=function(){var t=this._dragging.context();return t&&/^spaceTool/.test(t.prefix)};var E=n("bbf8"),S=n("cfe5"),k=Math.max;function C(t,e,n,i,o){function r(t,e){Object(s.forEach)(t,(function(t){o.addDragger(t,e),n.addMarker(t,"djs-dragging")}))}t.on("spaceTool.selection.start",(function(t){var e=n.getLayer("space"),o=t.context,r="M 0,-10000 L 0,10000",c="M -10000,0 L 10000,0",a=Object(E.g)("g");Object(E.c)(a,i.cls("djs-crosshair-group",["no-events"])),Object(E.a)(e,a);var s=Object(E.g)("path");Object(E.c)(s,"d",r),Object(E.d)(s).add("djs-crosshair"),Object(E.a)(a,s);var u=Object(E.g)("path");Object(E.c)(u,"d",c),Object(E.d)(u).add("djs-crosshair"),Object(E.a)(a,u),o.crosshairGroup=a})),t.on("spaceTool.selection.move",(function(t){var e=t.context.crosshairGroup;Object(S.c)(e,t.x,t.y)})),t.on("spaceTool.selection.cleanup",(function(t){var e=t.context.crosshairGroup;e&&Object(E.k)(e)})),t.on("spaceTool.move",250,(function(t){var c=t.context,a=c.line,u=c.axis,h=c.movingShapes,d=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var l=n.getLayer("space");a=Object(E.g)("path"),Object(E.c)(a,"d","M0,0 L0,0"),Object(E.d)(a).add("djs-crosshair"),Object(E.a)(l,a),c.line=a;var p=Object(E.g)("g");Object(E.c)(p,i.cls("djs-drag-group",["no-events"])),Object(E.a)(n.getActiveLayer(),p),r(h,p),r(c.movingConnections=e.filter((function(t){var e=!1;Object(s.forEach)(h,(function(n){Object(s.forEach)(n.outgoing,(function(n){t===n&&(e=!0)}))}));var n=!1;Object(s.forEach)(h,(function(e){Object(s.forEach)(e.incoming,(function(e){t===e&&(n=!0)}))}));var i=!1;Object(s.forEach)(d,(function(e){Object(s.forEach)(e.outgoing,(function(e){t===e&&(i=!0)}))}));var o=!1;return Object(s.forEach)(d,(function(e){Object(s.forEach)(e.incoming,(function(e){t===e&&(o=!0)}))})),function(t){return t.waypoints}(t)&&(e||i)&&(n||o)})),p),c.dragGroup=p}if(!c.frameGroup){var f=Object(E.g)("g");Object(E.c)(f,i.cls("djs-frame-group",["no-events"])),Object(E.a)(n.getActiveLayer(),f);var v=[];Object(s.forEach)(d,(function(t){var e=o.addFrame(t,f),i=e.getBBox();v.push({element:e,initialBounds:i}),n.addMarker(t,"djs-resizing")})),c.frameGroup=f,c.frames=v}var g={x:"M"+t.x+", -10000 L"+t.x+", 10000",y:"M -10000, "+t.y+" L 10000, "+t.y};Object(E.c)(a,{d:g[u]});var y={x:t.dx,y:t.dy};y[{x:"y",y:"x"}[c.axis]]=0,Object(S.c)(c.dragGroup,y.x,y.y),Object(s.forEach)(c.frames,(function(t){var e,n,i=t.element,o=t.initialBounds;"e"===c.direction?Object(E.c)(i,{width:k(o.width+y.x,5)}):(e=k(o.width-y.x,5),Object(E.c)(i,{width:e,x:o.x+o.width-e})),"s"===c.direction?Object(E.c)(i,{height:k(o.height+y.y,5)}):(n=k(o.height-y.y,5),Object(E.c)(i,{height:n,y:o.y+o.height-n}))}))}})),t.on("spaceTool.cleanup",(function(t){var e=t.context,i=e.movingShapes,o=e.movingConnections,r=e.resizingShapes,c=e.line,a=e.dragGroup,u=e.frameGroup;Object(s.forEach)(i,(function(t){n.removeMarker(t,"djs-dragging")})),Object(s.forEach)(o,(function(t){n.removeMarker(t,"djs-dragging")})),a&&(Object(E.k)(c),Object(E.k)(a)),Object(s.forEach)(r,(function(t){n.removeMarker(t,"djs-resizing")})),u&&Object(E.k)(u)}))}C.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];e.a={__init__:["spaceToolPreview"],__depends__:[i.a,o.a,r.a,c.a,a.a],spaceTool:["type",m],spaceToolPreview:["type",C]}},dd30:function(t,e,n){"use strict";n.r(e);e.default={translate:["value",function(t,e){return e=e||{},t.replace(/{([^}]+)}/g,(function(t,n){return e[n]||"{"+n+"}"}))}]}},e1ba:function(t,e,n){"use strict";var i=n("a2d9"),o=n("889b"),r=n("f122"),c=n("f6d6"),a=n("bd53");function s(t,e){var n;function s(c){var s,u=n.start,h=n.button,d=Object(a.c)(c),l=Object(r.b)(d,u);if(!n.dragging&&(s=l,Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))>15)&&(n.dragging=!0,0===h&&Object(o.a)(t),Object(i.a)("grab")),n.dragging){var p=n.last||n.start;l=Object(r.b)(d,p),e.scroll({dx:l.x,dy:l.y}),n.last=d}c.preventDefault()}function u(t){c.event.unbind(document,"mousemove",s),c.event.unbind(document,"mouseup",u),n=null,Object(i.b)()}t.on("element.mousedown",500,(function(t){return function(t){if(Object(c.closest)(t.target,".djs-draggable"))return;var e=t.button;if(e>=2||t.ctrlKey||t.shiftKey||t.altKey)return;return n={button:e,start:Object(a.c)(t)},c.event.bind(document,"mousemove",s),c.event.bind(document,"mouseup",u),!0}(t.originalEvent)})),this.isActive=function(){return!!n}}s.$inject=["eventBus","canvas"];e.a={__init__:["moveCanvas"],moveCanvas:["type",s]}},e3e1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("3a16"),o=n("a092"),r=n.n(o);function c(t){i.a.call(this,t);var e=this;this.addRule("element.autoResize",(function(t){return e.canResize(t.elements,t.target)}))}c.$inject=["eventBus"],r()(c,i.a),c.prototype.canResize=function(t,e){return!1}},e7cf:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return d}));var i=Math.abs,o=Math.round;function r(t,e,n){var o,r;for(n=void 0===n?10:n,o=0;o<e.length;o++)if(r=e[o],i(r-t)<=n)return r}function c(t){return{x:t.x,y:t.y}}function a(t){return{x:t.x+t.width,y:t.y+t.height}}function s(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:o(t.x+t.width/2),y:o(t.y+t.height/2)}}function u(t,e){var n=t.snapped;return!!n&&("string"==typeof e?n[e]:n.x&&n.y)}function h(t,e,n){if("string"!=typeof e)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw new Error("value must be Number or false");var i,o=t[e],r=t.snapped=t.snapped||{};return!1===n?r[e]=!1:(r[e]=!0,i=n-o,t[e]+=i,t["d"+e]+=i),o}function d(t){return t.children||[]}},ef36:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("b2ea"),o=n("bbf8"),r={width:150,height:50};function c(t,e){var n;e.textContent=t;try{var i,o=""===t;return e.textContent=o?"dummy":t,i={width:(n=e.getBBox()).width+2*n.x,height:n.height},o&&(i.width=0),i}catch(t){return{width:0,height:0}}}function a(t,e,n){for(var i,o=t.shift(),r=o;;){if((i=c(r,n)).width=r?i.width:0," "===r||""===r||i.width<Math.round(e)||r.length<2)return s(t,r,o,i);r=u(r,i.width,e)}}function s(t,e,n,i){if(e.length<n.length){var o=n.slice(e.length).trim();t.unshift(o)}return{width:i.width,height:i.height,text:e}}function u(t,e,n){var i=Math.max(t.length*(n/e),1),o=function(t,e){var n,i=t.split(/(\s|-|\u00AD)/g),o=[],r=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+r<e)){"-"!==n&&"­"!==n||o.pop();break}o.push(n),r+=n.length}var c=o[o.length-1];return c&&"­"===c&&(o[o.length-1]="-"),o.join("")}(t,i);return o||(o=t.slice(0,Math.max(Math.round(i-1),1))),o}function h(t){this._config=Object(i.assign)({},{size:r,padding:0,style:{},align:"center-top"},t||{})}h.prototype.createText=function(t,e){return this.layoutText(t,e).element},h.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},h.prototype.layoutText=function(t,e){var n=Object(i.assign)({},this._config.size,e.box),r=Object(i.assign)({},this._config.style,e.style),c=function(t){var e=t.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}(e.align||this._config.align),s=function(t){return Object(i.isObject)(t)?Object(i.assign)({top:0,left:0,right:0,bottom:0},t):{top:t,left:t,right:t,bottom:t}}(void 0!==e.padding?e.padding:this._config.padding),u=e.fitBox||!1,h=function(t){if("fontSize"in t&&"lineHeight"in t)return t.lineHeight*parseInt(t.fontSize,10)}(r),d=t.split(/\u00AD?\r?\n/),l=[],p=n.width-s.left-s.right,f=Object(o.g)("text");Object(o.c)(f,{x:0,y:0}),Object(o.c)(f,r);var v=function(){var t=document.getElementById("helper-svg");return t||(t=Object(o.g)("svg"),Object(o.c)(t,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(t)),t}();for(Object(o.a)(v,f);d.length;)l.push(a(d,p,f));"middle"===c.vertical&&(s.top=s.bottom=0);var g=Object(i.reduce)(l,(function(t,e,n){return t+(h||e.height)}),0)+s.top+s.bottom,y=Object(i.reduce)(l,(function(t,e,n){return e.width>t?e.width:t}),0),b=s.top;"middle"===c.vertical&&(b+=(n.height-g)/2),b-=(h||l[0].height)/4;var m=Object(o.g)("text");return Object(o.c)(m,r),Object(i.forEach)(l,(function(t){var e;switch(b+=h||t.height,c.horizontal){case"left":e=s.left;break;case"right":e=(u?y:p)-s.right-t.width;break;default:e=Math.max(((u?y:p)-t.width)/2+s.left,0)}var n=Object(o.g)("tspan");Object(o.c)(n,{x:e,y:b}),n.textContent=t.text,Object(o.a)(m,n)})),Object(o.k)(f),{dimensions:{width:y,height:g},element:m}}},f122:function(t,e,n){"use strict";function i(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}))},f41a:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("f885"),o=n("3c00"),r=n.n(o),c=Math.round,a=Math.max;function s(t,e){return function(t,e){var n,o;for(n=0;o=t[n];n++)if(Object(i.b)(o,e)<=10)return{point:t[n],bendpoint:!0,index:n};return null}(t,e)||function(t,e){var n,i,o,s,u=r()((o=10,[["M",(i=e).x,i.y],["m",0,-o],["a",o,o,0,1,1,0,2*o],["a",o,o,0,1,1,0,-2*o],["z"]]),(n=[],t.forEach((function(t,e){n.push([0===e?"M":"L",t.x,t.y])})),n)),h=u[0],d=u[u.length-1];return h?h!==d?h.segment2!==d.segment2?{point:t[s=a(h.segment2,d.segment2)-1],bendpoint:!0,index:s}:{point:{x:c(h.x+d.x)/2,y:c(h.y+d.y)/2},index:h.segment2}:{point:{x:c(h.x),y:c(h.y)},index:h.segment2}:null}(t,e)}},f885:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));var i=n("b2ea");function o(t,e){return t&&e?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):-1}function r(t,e,n,i){if(void 0===i&&(i=5),!t||!e||!n)return!1;var r=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),c=o(t,e);return Math.abs(r/c)<=i}function c(t,e){var n;return function(t,e){var n;n=Object(i.isArray)(t)?t:[t,e];var o=n.slice().shift();return Object(i.every)(n,(function(t){return Math.abs(o.y-t.y)<=2}))}(n=Object(i.isArray)(t)?t:[t,e])?"h":!!function(t,e){var n;n=Object(i.isArray)(t)?t:[t,e];var o=n.slice().shift();return Object(i.every)(n,(function(t){return Math.abs(o.x-t.x)<=2}))}(n)&&"v"}function a(t,e,n){return n=n||0,t.x>e.x-n&&t.y>e.y-n&&t.x<e.x+e.width+n&&t.y<e.y+e.height+n}function s(t,e){return{x:Math.round(t.x+(e.x-t.x)/2),y:Math.round(t.y+(e.y-t.y)/2)}}},f909:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return u}));var i=n("b6f8"),o=n("b2ea"),r=50;function c(t,e,n,i){for(var o;o=s(t,n,e);)n=i(e,n,o);return n}function a(t){return function(e,n,i){var o={x:n.x,y:n.y};return["x","y"].forEach((function(r){var c=t[r];if(c){var a="x"===r?"width":"height",s=c.margin,u=c.minDistance;o[r]=s<0?Math.min(i[r]+s-e[a]/2,n[r]-u+s):Math.max(i[r]+i[a]+s+e[a]/2,n[r]+u+s)}})),o}}function s(t,e,n){var r={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},c=function(t){var e=h(t);t.host&&(e=e.concat(h(t.host)));t.attachers&&(e=e.concat(t.attachers.reduce((function(t,e){return t.concat(h(e))}),[])));return e}(t);return Object(o.find)(c,(function(t){return t!==n&&"intersect"===Object(i.f)(t,r,10)}))}function u(t,e){e||(e={});var n=e.defaultDistance||r,c=e.direction||"e",a=e.filter,s=e.getWeight||function(e){return e.source===t?1:-1},u=e.maxDistance||250,h=e.reference||"start";function l(t,e){return"n"===c?"start"===h?Object(i.b)(t).top-Object(i.b)(e).bottom:"center"===h?Object(i.b)(t).top-Object(i.e)(e).y:Object(i.b)(t).top-Object(i.b)(e).top:"w"===c?"start"===h?Object(i.b)(t).left-Object(i.b)(e).right:"center"===h?Object(i.b)(t).left-Object(i.e)(e).x:Object(i.b)(t).left-Object(i.b)(e).left:"s"===c?"start"===h?Object(i.b)(e).top-Object(i.b)(t).bottom:"center"===h?Object(i.e)(e).y-Object(i.b)(t).bottom:Object(i.b)(e).bottom-Object(i.b)(t).bottom:"start"===h?Object(i.b)(e).left-Object(i.b)(t).right:"center"===h?Object(i.e)(e).x-Object(i.b)(t).right:Object(i.b)(e).right-Object(i.b)(t).right}a||(a=d);var p=t.incoming.filter(a).map((function(e){var n=s(e),i=n<0?l(e.source,t):l(t,e.source);return{id:e.source.id,distance:i,weight:n}})),f=t.outgoing.filter(a).map((function(e){var n=s(e),i=n>0?l(t,e.target):l(e.target,t);return{id:e.target.id,distance:i,weight:n}})),v=p.concat(f).reduce((function(t,e){return t[e.id+"__weight_"+e.weight]=e,t}),{});return Object(o.reduce)(v,(function(t,e){var n=e.distance,i=e.weight;return n<0||n>u||(t[String(n)]||(t[String(n)]=0),t[String(n)]+=1*i,(!t.distance||t[t.distance]<t[String(n)])&&(t.distance=n)),t}),{}).distance||n}function h(t){return(e=t,e.outgoing.map((function(t){return t.target}))).concat(function(t){return t.incoming.map((function(t){return t.source}))}(t));var e}function d(){return!0}},fa45:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("172a"),o=["c","C",67],r=["v","V",86],c=["y","Y",89],a=["z","Z",90];function s(t,e){var n=this;t.on("editorActions.init",500,(function(t){var i=t.editorActions;n.registerBindings(e,i)}))}s.$inject=["eventBus","keyboard"],s.prototype.registerBindings=function(t,e){function n(n,i){e.isRegistered(n)&&t.addListener(i)}n("undo",(function(t){var n=t.keyEvent;if(Object(i.b)(n)&&!Object(i.d)(n)&&Object(i.c)(a,n))return e.trigger("undo"),!0})),n("redo",(function(t){var n=t.keyEvent;if(Object(i.b)(n)&&(Object(i.c)(c,n)||Object(i.c)(a,n)&&Object(i.d)(n)))return e.trigger("redo"),!0})),n("copy",(function(t){var n=t.keyEvent;if(Object(i.b)(n)&&Object(i.c)(o,n))return e.trigger("copy"),!0})),n("paste",(function(t){var n=t.keyEvent;if(Object(i.b)(n)&&Object(i.c)(r,n))return e.trigger("paste"),!0})),n("stepZoom",(function(t){var n=t.keyEvent;if(Object(i.c)(["+","Add","="],n)&&Object(i.b)(n))return e.trigger("stepZoom",{value:1}),!0})),n("stepZoom",(function(t){var n=t.keyEvent;if(Object(i.c)(["-","Subtract"],n)&&Object(i.b)(n))return e.trigger("stepZoom",{value:-1}),!0})),n("zoom",(function(t){var n=t.keyEvent;if(Object(i.c)("0",n)&&Object(i.b)(n))return e.trigger("zoom",{value:1}),!0})),n("removeSelection",(function(t){var n=t.keyEvent;if(Object(i.c)(["Backspace","Delete","Del"],n))return e.trigger("removeSelection"),!0}))}},fe385:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n("9214"),o=n("a092"),r=n.n(o),c=n("17a5"),a=n("3449"),s=n("bbf8"),u=n("b2ea"),h=n("59ef");function d(t,e){c.a.call(this,t,1),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}r()(d,c.a),d.prototype.canRender=function(){return!0},d.prototype.drawShape=function(t,e,n){var i=Object(s.g)("rect");return Object(s.c)(i,{x:0,y:0,width:e.width||0,height:e.height||0}),Object(h.g)(e)?Object(s.c)(i,Object(u.assign)({},this.FRAME_STYLE,n||{})):Object(s.c)(i,Object(u.assign)({},this.SHAPE_STYLE,n||{})),Object(s.a)(t,i),i},d.prototype.drawConnection=function(t,e,n){var i=Object(a.b)(e.waypoints,Object(u.assign)({},this.CONNECTION_STYLE,n||{}));return Object(s.a)(t,i),i},d.prototype.getShapePath=function(t){var e=t.x,n=t.y,i=t.width,o=[["M",e,n],["l",i,0],["l",0,t.height],["l",-i,0],["z"]];return Object(a.a)(o)},d.prototype.getConnectionPath=function(t){var e,n,i=t.waypoints,o=[];for(e=0;n=i[e];e++)n=n.original||n,o.push([0===e?"M":"L",n.x,n.y]);return Object(a.a)(o)},d.$inject=["eventBus","styles"];var l={__init__:["defaultRenderer"],defaultRenderer:["type",d],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){var i=this.style(e,n);return Object(u.assign)(i,{class:t})},this.style=function(e,n){Object(u.isArray)(e)||n||(n=e,e=[]);var i=Object(u.reduce)(e,(function(e,n){return Object(u.assign)(e,t[n]||{})}),{});return n?Object(u.assign)(i,n):i},this.computeStyle=function(t,n,i){return Object(u.isArray)(n)||(i=n,n=[]),e.style(n||[],Object(u.assign)({},i,t||{}))}}]},p=n("414d"),f=n("b6f8");function v(t,e){return Math.round(t*e)/e}function g(t){return Object(u.isNumber)(t)?t+"px":t}function y(t,e,n){var i=Object(s.g)("g");Object(s.d)(i).add(e);var o=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(i,t.childNodes[o]||null),i}var b={shape:["x","y","width","height"],connection:["waypoints"]};function m(t,e,n,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=n,this._init(t||{})}function _(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}m.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],m.prototype._init=function(t){var e=this._eventBus,n=this._container=function(t){var e=(t=Object(u.assign)({},{width:"100%",height:"100%"},t)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),Object(u.assign)(n.style,{position:"relative",overflow:"hidden",width:g(t.width),height:g(t.height)}),e.appendChild(n),n}(t),i=this._svg=Object(s.g)("svg");Object(s.c)(i,{width:"100%",height:"100%"}),Object(s.a)(n,i);var o=this._viewport=y(i,"viewport");this._layers={},this._planes={},!1!==t.deferUpdate&&(this._viewboxChanged=Object(u.debounce)(Object(u.bind)(this._viewboxChanged,this),300)),e.on("diagram.init",(function(){e.fire("canvas.init",{svg:i,viewport:o})}),this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],(function(){delete this._cachedViewbox}),this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},m.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},m.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach((function(e){var n=Object(h.f)(e);"root"===n?t.setRootElementForPlane(null,t.findPlane(e),!0):t._removeElement(e,n)})),this._activePlane=null,this._planes={},delete this._cachedViewbox},m.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},m.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),void 0!==e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},m.prototype._createLayer=function(t,e){void 0===e&&(e=1);var n=Object(u.reduce)(this._layers,(function(t,n){return e>=n.index&&t++,t}),0);return{group:y(this._viewport,"layer-"+t,n),index:e}},m.prototype.getPlane=function(t){if(!t)throw new Error("must specify a name");return this._planes[t]},m.prototype.createPlane=function(t,e){if(!t)throw new Error("must specify a name");if(this._planes[t])throw new Error("plane "+t+" already exists");e||(e={id:"__implicitroot"+t,children:[],isImplicit:!0});var n=this.getLayer(t,0);Object(s.d)(n).add("djs-element-hidden");var i=this._planes[t]={layer:n,name:t,rootElement:null};return this.setRootElementForPlane(e,i),i},m.prototype.setActivePlane=function(t){if(!t)throw new Error("must specify a plane");return"string"==typeof t&&(t=this.getPlane(t)),this._activePlane&&Object(s.d)(this._activePlane.layer).add("djs-element-hidden"),this._activePlane=t,Object(s.d)(t.layer).remove("djs-element-hidden"),t.rootElement&&this._elementRegistry.updateGraphics(t.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:t}),t},m.prototype.getActiveLayer=function(){return this.getActivePlane().layer},m.prototype.getActivePlane=function(){var t=this._activePlane;return t||(t=this.createPlane("base"),this.setActivePlane("base")),t},m.prototype.findPlane=function(t){"string"==typeof t&&(t=this._elementRegistry.get(t));var e=function(t){for(;t.parent;)t=t.parent;return t}(t);return Object(u.find)(this._planes,(function(t){return t.rootElement===e}))},m.prototype.getContainer=function(){return this._container},m.prototype._updateMarker=function(t,e,n){var i;t.id||(t=this._elementRegistry.get(t)),(i=this._elementRegistry._elements[t.id])&&(Object(u.forEach)([i.gfx,i.secondaryGfx],(function(t){t&&(n?Object(s.d)(t).add(e):Object(s.d)(t).remove(e))})),this._eventBus.fire("element.marker.update",{element:t,gfx:i.gfx,marker:e,add:!!n}))},m.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},m.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},m.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));var n=this.getGraphics(t);return Object(s.d)(n).has(e)},m.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},m.prototype.getRootElement=function(){return this.getActivePlane().rootElement},m.prototype.setRootElement=function(t,e){var n=this._activePlane;if(n)return this.setRootElementForPlane(t,n,e);var i=this.createPlane("base",t);return this.setActivePlane(i),i.rootElement},m.prototype.setRootElementForPlane=function(t,e,n){"string"==typeof e&&(e=this.getPlane(e)),t&&this._ensureValid("root",t);var i=e.rootElement,o=this._elementRegistry,r=this._eventBus;if(i){if(!n)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:i}),r.fire("root.removed",{element:i}),o.remove(i)}if(t){var c=e.layer;r.fire("root.add",{element:t}),o.add(t,c),r.fire("root.added",{element:t,gfx:c}),e===this._activePlane&&this._elementRegistry.updateGraphics(t,this._svg,!0)}return e.rootElement=t,t},m.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=b[t];if(!Object(u.every)(n,(function(t){return void 0!==e[t]})))throw new Error("must supply { "+n.join(", ")+" } with "+t)},m.prototype._setParent=function(t,e,n){Object(p.add)(e.children,t,n),t.parent=e},m.prototype._addElement=function(t,e,n,i){n=n||this.getRootElement();var o=this._eventBus,r=this._graphicsFactory;this._ensureValid(t,e),o.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,i);var c=r.create(t,e,i);return this._elementRegistry.add(e,c),r.update(t,e,c),o.fire(t+".added",{element:e,gfx:c}),e},m.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},m.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},m.prototype._removeElement=function(t,e){var n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(t=n.get(t.id||t))return o.fire(e+".remove",{element:t}),i.remove(t),Object(p.remove)(t.parent&&t.parent.children,t),t.parent=null,o.fire(e+".removed",{element:t}),n.remove(t),t},m.prototype.removeShape=function(t){return this._removeElement(t,"shape")},m.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},m.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},m.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},m.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},m.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,o,r,c,a=this._viewport,u=this.getSize();return t?(this._changeViewbox((function(){o=Math.min(u.width/t.width,u.height/t.height);var e=this._svg.createSVGMatrix().scale(o).translate(-t.x,-t.y);Object(s.l)(a,e)})),t):(e=this._activePlane&&this._activePlane.layer.getBBox()||{},n=(i=Object(s.l)(a))?i.matrix:Object(s.h)(),o=v(n.a,1e3),r=v(-n.e||0,1e3),c=v(-n.f||0,1e3),t=this._cachedViewbox={x:r?r/o:0,y:c?c/o:0,width:u.width/o,height:u.height/o,scale:o,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:u})},m.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox((function(){t=Object(u.assign)({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),_(e,n)})),{x:n.e,y:n.f}},m.prototype.scrollToElement=function(t,e){var n=100;"string"==typeof t&&(t=this._elementRegistry.get(t));var i=this.findPlane(t);i!==this._activePlane&&this.setActivePlane(i),e||(e={}),"number"==typeof e&&(n=e),e={top:e.top||n,right:e.right||n,bottom:e.bottom||n,left:e.left||n};var o,r,c=Object(h.b)(t),a=Object(f.b)(c),s=this.viewbox(),u=this.zoom();s.y+=e.top/u,s.x+=e.left/u,s.width-=(e.right+e.left)/u,s.height-=(e.bottom+e.top)/u;var d=Object(f.b)(s);if(c.width<s.width&&c.height<s.height){var l=Math.max(0,a.right-d.right),p=Math.min(0,a.left-d.left),v=Math.max(0,a.bottom-d.bottom),g=Math.min(0,a.top-d.top);o=l||p,r=v||g}else o=c.x-s.x,r=c.y-s.y;this.scroll({dx:-o*u,dy:-r*u})},m.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox((function(){"object"!=typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),i=this._setZoom(t,e)})),v(i.a,1e3)):this.viewbox(t).scale;var n,i},m.prototype._fitViewport=function(t){var e,n,i=this.viewbox(),o=i.outer,r=i.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=o.width&&r.y+r.height<=o.height&&!t?n={x:0,y:0,width:Math.max(r.width+r.x,o.width),height:Math.max(r.height+r.y,o.height)}:(e=Math.min(1,o.width/r.width,o.height/r.height),n={x:r.x+(t?r.width/2-o.width/e/2:0),y:r.y+(t?r.height/2-o.height/e/2:0),width:o.width/e,height:o.height/e}),this.viewbox(n),this.viewbox(!1).scale},m.prototype._setZoom=function(t,e){var n,i,o,r,c=this._svg,a=this._viewport,s=c.createSVGMatrix(),h=c.createSVGPoint(),d=(i=a.getCTM()).a;return e?(n=Object(u.assign)(h,e).matrixTransform(i.inverse()),o=s.translate(n.x,n.y).scale(1/d*t).translate(-n.x,-n.y),r=i.multiply(o)):r=s.scale(t),_(this._viewport,r),r},m.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},m.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();t.waypoints?e=this.getGraphics(t).getBBox():e=t;return{x:e.x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},m.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var j="data-element-id";function x(t){this._elements={},this._eventBus=t}x.$inject=["eventBus"],x.prototype.add=function(t,e,n){var i=t.id;this._validateId(i),Object(s.c)(e,j,i),n&&Object(s.c)(n,j,i),this._elements[i]={element:t,gfx:e,secondaryGfx:n}},x.prototype.remove=function(t){var e=this._elements,n=t.id||t,i=n&&e[n];i&&(Object(s.c)(i.gfx,j,""),i.secondaryGfx&&Object(s.c)(i.secondaryGfx,j,""),delete e[n])},x.prototype.updateId=function(t,e){this._validateId(e),"string"==typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),i=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,i)},x.prototype.updateGraphics=function(t,e,n){var i=t.id||t,o=this._elements[i];return n?o.secondaryGfx=e:o.gfx=e,Object(s.c)(e,j,i),e},x.prototype.get=function(t){var e;e="string"==typeof t?t:t&&Object(s.c)(t,j);var n=this._elements[e];return n&&n.element},x.prototype.filter=function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(n)})),e},x.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),i=0;i<n.length;i++){var o=e[n[i]],r=o.element;if(t(r,o.gfx))return r}},x.prototype.getAll=function(){return this.filter((function(t){return t}))},x.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach((function(n){var i=e[n],o=i.element,r=i.gfx;return t(o,r)}))},x.prototype.getGraphics=function(t,e){var n=t.id||t,i=this._elements[n];return i&&(e?i.secondaryGfx:i.gfx)},x.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var O=n("1aec"),w=Array.prototype.slice;function E(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function S(){}E.prototype.on=function(t,e,n,i){if(t=Object(u.isArray)(t)?t:[t],Object(u.isFunction)(e)&&(i=n,n=e,e=1e3),!Object(u.isNumber)(e))throw new Error("priority must be a number");var o=n;i&&((o=Object(u.bind)(n,i)).__fn=n.__fn||n);var r=this;t.forEach((function(t){r._addListener(t,{priority:e,callback:o,next:null})}))},E.prototype.once=function(t,e,n,i){var o=this;if(Object(u.isFunction)(e)&&(i=n,n=e,e=1e3),!Object(u.isNumber)(e))throw new Error("priority must be a number");function r(){r.__isTomb=!0;var e=n.apply(i,arguments);return o.off(t,r),e}r.__fn=n,this.on(t,e,r)},E.prototype.off=function(t,e){t=Object(u.isArray)(t)?t:[t];var n=this;t.forEach((function(t){n._removeListener(t,e)}))},E.prototype.createEvent=function(t){var e=new S;return e.init(t),e},E.prototype.fire=function(t,e){var n,i,o,r;if(r=w.call(arguments),"object"==typeof t&&(t=(e=t).type),!t)throw new Error("no event type specified");if(i=this._listeners[t]){n=e instanceof S?e:this.createEvent(e),r[0]=n;var c=n.type;t!==c&&(n.type=t);try{o=this._invokeListeners(n,r,i)}finally{t!==c&&(n.type=c)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},E.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},E.prototype._destroy=function(){this._listeners={}},E.prototype._invokeListeners=function(t,e,n){for(var i;n&&!t.cancelBubble;)i=this._invokeListener(t,e,n),n=n.next;return i},E.prototype._invokeListener=function(t,e,n){var i;if(n.callback.__isTomb)return i;try{void 0!==(i=function(t,e){return t.apply(null,e)}(n.callback,e))&&(t.returnValue=i,t.stopPropagation()),!1===i&&t.preventDefault()}catch(t){if(!this.handleError(t))throw console.error("unhandled error in event listener",t),t}return i},E.prototype._addListener=function(t,e){var n,i=this._getListeners(t);if(i){for(;i;){if(i.priority<e.priority)return e.next=i,void(n?n.next=e:this._setListeners(t,e));n=i,i=i.next}n.next=e}else this._setListeners(t,e)},E.prototype._getListeners=function(t){return this._listeners[t]},E.prototype._setListeners=function(t,e){this._listeners[t]=e},E.prototype._removeListener=function(t,e){var n,i,o,r=this._getListeners(t);if(e)for(;r;)n=r.next,(o=r.callback)!==e&&o.__fn!==e||(i?i.next=n:this._setListeners(t,n)),i=r,r=n;else this._setListeners(t,null)},S.prototype.stopPropagation=function(){this.cancelBubble=!0},S.prototype.preventDefault=function(){this.defaultPrevented=!0},S.prototype.init=function(t){Object(u.assign)(this,t||{})};var k=n("5b49"),C=n("cfe5"),M=n("f6d6");function P(t,e){this._eventBus=t,this._elementRegistry=e}function T(t,e,n){var i=n||e.firstChild;t!==i&&e.insertBefore(t,i)}P.$inject=["eventBus","elementRegistry"],P.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=Object(k.a)(n))||(e=Object(s.g)("g"),Object(s.d)(e).add("djs-children"),Object(s.a)(n.parentNode,e)):e=n,e},P.prototype._clear=function(t){var e=Object(k.b)(t);return Object(M.clear)(e),e},P.prototype._createContainer=function(t,e,n,i){var o=Object(s.g)("g");Object(s.d)(o).add("djs-group"),void 0!==n?T(o,e,e.childNodes[n]):Object(s.a)(e,o);var r=Object(s.g)("g");Object(s.d)(r).add("djs-element"),Object(s.d)(r).add("djs-"+t),i&&Object(s.d)(r).add("djs-frame"),Object(s.a)(o,r);var c=Object(s.g)("g");return Object(s.d)(c).add("djs-visual"),Object(s.a)(r,c),r},P.prototype.create=function(t,e,n){var i=this._getChildrenContainer(e.parent);return this._createContainer(t,i,n,Object(h.g)(e))},P.prototype.updateContainments=function(t){var e,n=this,i=this._elementRegistry;e=Object(u.reduce)(t,(function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t}),{}),Object(u.forEach)(e,(function(t){var e=t.children;if(e){var o=n._getChildrenContainer(t);Object(u.forEach)(e.slice().reverse(),(function(t){T(i.getGraphics(t).parentNode,o)}))}}))},P.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},P.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},P.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},P.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},P.prototype.update=function(t,e,n){if(e.parent){var i=this._clear(n);if("shape"===t)this.drawShape(i,e),Object(C.c)(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(i,e)}e.hidden?Object(s.c)(n,"display","none"):Object(s.c)(n,"display","block")}},P.prototype.remove=function(t){var e=this._elementRegistry.getGraphics(t);Object(s.k)(e.parentNode)};var B={__depends__:[l],__init__:["canvas"],canvas:["type",m],elementRegistry:["type",x],elementFactory:["type",O.a],eventBus:["type",E],graphicsFactory:["type",P]};function R(t){var e=[],n=[];function o(t){return e.indexOf(t)>=0}t.forEach((function t(i){o(i)||((i.__depends__||[]).forEach(t),o(i)||(!function(t){e.push(t)}(i),(i.__init__||[]).forEach((function(t){n.push(t)}))))}));var r=new i.a(e);return n.forEach((function(t){try{r["string"==typeof t?"get":"invoke"](t)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}})),r}function A(t,e){this.injector=e=e||function(t){return R([{config:["value",t=t||{}]},B].concat(t.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}A.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},A.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},fe62:function(t,e,n){"use strict";var i=n("a479"),o=n("a38c"),r=n("e7cf"),c=n("172a"),a=n("b6f8"),s=n("b2ea");function u(t,e){var n=this;t.on(["resize.start"],(function(t){n.initSnap(t)})),t.on(["resize.move","resize.end"],1250,(function(t){var i=t.context,o=i.shape,a=o.parent,s=i.direction,u=i.snapContext;if(!(t.originalEvent&&Object(c.b)(t.originalEvent)||Object(r.c)(t))){var h=u.pointsForTarget(a);h.initialized||((h=n.addSnapTargetPoints(h,o,a,s)).initialized=!0),function(t){return"n"===t||"s"===t}(s)&&Object(r.e)(t,"x",t.x),function(t){return"e"===t||"w"===t}(s)&&Object(r.e)(t,"y",t.y),e.snap(t,h)}})),t.on(["resize.cleanup"],(function(){e.hide()}))}function h(t,e){var n=Object(a.e)(t),i=Object(a.b)(t),o={x:n.x,y:n.y};return-1!==e.indexOf("n")?o.y=i.top:-1!==e.indexOf("s")&&(o.y=i.bottom),-1!==e.indexOf("e")?o.x=i.right:-1!==e.indexOf("w")&&(o.x=i.left),o}u.prototype.initSnap=function(t){var e=t.context,n=e.shape,i=e.direction,r=e.snapContext;r||(r=e.snapContext=new o.a);var c=h(n,i);return r.setSnapOrigin("corner",{x:c.x-t.x,y:c.y-t.y}),r},u.prototype.addSnapTargetPoints=function(t,e,n,i){var o=this.getSnapTargets(e,n);return Object(s.forEach)(o,(function(e){t.add("corner",Object(r.a)(e)),t.add("corner",Object(r.g)(e))})),t.add("corner",h(e,i)),t},u.$inject=["eventBus","snapping"],u.prototype.getSnapTargets=function(t,e){return Object(r.b)(e).filter((function(e){return!(n=e,i=t,n.host===i||function(t){return!!t.waypoints}(e)||function(t){return!!t.hidden}(e)||function(t){return!!t.labelTarget}(e));var n,i}))};var d=n("bbf8");function l(t){this._canvas=t,this._asyncHide=Object(s.debounce)(Object(s.bind)(this.hide,this),1e3)}l.$inject=["canvas"],l.prototype.snap=function(t,e){var n=t.context.snapContext,i=n.getSnapLocations(),o={x:Object(r.c)(t,"x"),y:Object(r.c)(t,"y")};Object(s.forEach)(i,(function(i){var r=n.getSnapOrigin(i),c={x:t.x+r.x,y:t.y+r.y};if(Object(s.forEach)(["x","y"],(function(t){var n;o[t]||void 0!==(n=e.snap(c,i,t,7))&&(o[t]={value:n,originValue:n-r[t]})})),o.x&&o.y)return!1})),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),Object(s.forEach)(["x","y"],(function(e){var n=o[e];Object(s.isObject)(n)&&Object(r.e)(t,e,n.originValue)}))},l.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=Object(d.g)("path");return Object(d.c)(n,{d:"M0,0 L0,0"}),Object(d.d)(n).add("djs-snap-line"),Object(d.a)(e,n),{update:function(e){Object(s.isNumber)(e)?"horizontal"===t?Object(d.c)(n,{d:"M-100000,"+e+" L+100000,"+e,display:""}):Object(d.c)(n,{d:"M "+e+",-100000 L "+e+", +100000",display:""}):Object(d.c)(n,{display:"none"})}}},l.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},l.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},l.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},l.prototype.hide=function(){Object(s.forEach)(this._snapLines,(function(t){t.update()}))};e.a={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",i.a],resizeSnapping:["type",u],snapping:["type",l]}}}]);