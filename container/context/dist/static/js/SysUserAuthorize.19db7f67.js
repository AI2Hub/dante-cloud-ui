(window.webpackJsonp=window.webpackJsonp||[]).push([["SysUserAuthorize"],{5760:function(e,t,s){"use strict";s.r(t);var i,a,n=s("50da"),r=s("2e90"),l=s("e719"),o=s("3617"),c=s("600f"),d=s("402f");let u=class extends d.a{constructor(){super(...arguments),this.title="分配用户角色",this.tableTitle="角色列表",this.listHeader="已配置的角色",this.tableHeaders=[{text:"角色名称",align:"center",value:"roleName"},{text:"角色代码",align:"center",value:"roleCode"},{text:"备注",align:"center",value:"description"}]}getBaseService(){return this.sysUserService}getResourceService(){return this.sysRoleService}getCompareKey(){return"roleId"}created(){this.fetchParams("roles")}mounted(){this.findResourcesByPage()}save(){if(this.$lib.lodash.isEmpty(this.assignedItems))this.$notify.warning("您尚未配置任何权限，请完成配置后再进行提交！");else{this.overlay=!0;let e=this.currentEntity.userId,t=this.assignedItems.map(e=>e[this.getCompareKey()]);this.getBaseService().assign({userId:e,roles:t}).then(()=>{this.overlay=!1,this.$navigation.goBack(this.$route)}).catch(()=>{this.overlay=!1})}}};Object(n.a)([l.Inject,Object(n.b)("design:type","function"==typeof(i=void 0!==c.p&&c.p)?i:Object)],u.prototype,"sysUserService",void 0),Object(n.a)([l.Inject,Object(n.b)("design:type","function"==typeof(a=void 0!==c.n&&c.n)?a:Object)],u.prototype,"sysRoleService",void 0),u=Object(n.a)([Object(r.a)({components:{HContainer:o.c,HContentPanel:o.d,HAuthorizeList:o.b}})],u);var h=u,p=s("ba34"),g=s("eb4c"),m=s.n(g),b=s("6fc4"),v=Object(p.a)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h-content-panel",{attrs:{title:e.title}},[s("h-container",{attrs:{type:"left-right"},scopedSlots:e._u([{key:"other",fn:function(){return[s("h-authorize-list",{attrs:{header:e.listHeader,itemKey:e.getCompareKey(),"prepend-title":"roleCode","append-title":"roleName"},on:{save:function(t){return e.save()}},model:{value:e.assignedItems,callback:function(t){e.assignedItems=t},expression:"assignedItems"}})]},proxy:!0}])},[s("v-card",[s("h-table",{attrs:{"table-headers":e.tableHeaders,"table-items":e.tableItems,"table-title":e.tableTitle,"page-size":e.pageSize,"item-key":e.getCompareKey(),"show-select":""},on:{"item-selected":function(t){return e.selectItem(t)},"toggle-select-all":function(t){return e.selectAllItems(t)}},model:{value:e.assignedItems,callback:function(t){e.assignedItems=t},expression:"assignedItems"}})],1)],1)],1)}),[],!1,null,null,null);t.default=v.exports;m()(v,{VCard:b.a})}}]);