var __defProp=Object.defineProperty,__defNormalProp=(t,e,s)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__publicField=(t,e,s)=>(__defNormalProp(t,"symbol"!=typeof e?e+"":e,s),s);!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@herodotus/utils")):"function"==typeof define&&define.amd?define(["@herodotus/utils"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["@herodotus/apis"]=e(t["@herodotus/utils"])}(this,(function(t){"use strict";class ApiConfig{constructor(t,e,s,n){__publicField(this,"http",{}),__publicField(this,"project",""),__publicField(this,"clientId",""),__publicField(this,"clientSecret",""),__publicField(this,"uaaAddress",""),__publicField(this,"upmsAddress",""),__publicField(this,"bpmnAddress",""),__publicField(this,"cmdbAddress",""),this.project=t,this.clientId=e,this.clientSecret=s,this.http=n,this.switch(t)}switch(t){switch(t){case"dante":this.uaaAddress="/dante-cloud-uaa",this.upmsAddress="/dante-cloud-upms",this.bpmnAddress="/dante-cloud-bpmn-ability/engine-rest",this.cmdbAddress="/dante-cloud-cmdb-ability";break;case"herodotus":this.uaaAddress="/herodotus-cloud-uaa",this.upmsAddress="/herodotus-cloud-upms",this.bpmnAddress="/herodotus-cloud-bpmn-ability/engine-rest",this.cmdbAddress="/herodotus-cloud-cmdb-ability";break;default:this.uaaAddress="",this.upmsAddress="",this.bpmnAddress="/engine-rest",this.cmdbAddress=""}}getProject(){return this.project}getClientSecret(){return this.clientSecret}getClientId(){return this.clientId}getHttp(){return this.http}getUaa(){return this.uaaAddress}getUpms(){return this.upmsAddress}getBpmn(){return this.bpmnAddress}getCmdb(){return this.cmdbAddress}}var e=(t=>(t.JIGSAW="JIGSAW",t.WORD_CLICK="WORD_CLICK",t.ARITHMETIC="ARITHMETIC",t.CHINESE="CHINESE",t.CHINESE_GIF="CHINESE_GIF",t.SPEC_GIF="SPEC_GIF",t.SPEC="SPEC",t.HUTOOL_LINE="HUTOOL_LINE",t.HUTOOL_CIRCLE="HUTOOL_CIRCLE",t.HUTOOL_SHEAR="HUTOOL_SHEAR",t.HUTOOL_GIF="HUTOOL_GIF",t))(e||{});class Service{constructor(t){__publicField(this,"config"),this.config=t}getConfig(){return this.config}getParamPath(t,e){return t+"/"+e}getIdPath(t){return this.getParamPath(this.getBaseAddress(),t)}}class BaseService extends Service{getConditionAddress(){return this.getBaseAddress()+"/condition"}getListAddress(){return this.getBaseAddress()+"/list"}getTreeAddress(){return this.getBaseAddress()+"/tree"}fetch(t={}){return this.getConfig().getHttp().get(this.getBaseAddress(),t)}fetchByPage(e,s={}){if(t.lodash.isEmpty(s))return this.getConfig().getHttp().get(this.getBaseAddress(),e);{const t=Object.assign(e,s);return this.getConfig().getHttp().get(this.getConditionAddress(),t)}}fetchAll(t={}){return this.getConfig().getHttp().get(this.getListAddress(),t)}fetchTree(t={}){return this.getConfig().getHttp().get(this.getTreeAddress(),t)}saveOrUpdate(t){return this.getConfig().getHttp().post(this.getBaseAddress(),t)}delete(t){return this.getConfig().getHttp().delete(this.getIdPath(t))}assign(e){return this.getConfig().getHttp().put(this.getBaseAddress(),e,{contentType:t.ContentTypeEnum.URL_ENCODED})}}const s=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new s(t)),this.instance}getBaseAddress(){return this.getConfig().getUaa()+"/authorize/application"}};let n=s;__publicField(n,"instance");const i=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new i(t)),this.instance}getBaseAddress(){return this.getConfig().getUaa()+"/authorize/scope"}getAssignedAddress(){return this.getBaseAddress()+"/assigned"}getScopeCodePath(t){return this.getParamPath(this.getBaseAddress(),t)}fetchByScopeCode(t){return this.getConfig().getHttp().get(this.getScopeCodePath(t))}assigned(t){return this.getConfig().getHttp().post(this.getAssignedAddress(),t)}};let r=i;__publicField(r,"instance");const c=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new c(t)),this.instance}getBaseAddress(){return this.getConfig().getUaa()+"/authorize/authorization"}};let a=c;__publicField(a,"instance");const g=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new g(t)),this.instance}getBaseAddress(){return this.getConfig().getUaa()+"/authorize/compliance"}};let o=g;__publicField(o,"instance");const d=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new d(t)),this.instance}getBaseAddress(){return this.getConfig().getCmdb()+"/asset/server"}};let u=d;__publicField(u,"instance");const h=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new h(t)),this.instance}getBaseAddress(){return this.getConfig().getCmdb()+"/asset/application"}};let l=h;__publicField(l,"instance");const p=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new p(t)),this.instance}getBaseAddress(){return this.getConfig().getCmdb()+"/db/account"}};let f=p;__publicField(f,"instance");const A=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new A(t)),this.instance}getBaseAddress(){return this.getConfig().getCmdb()+"/db/catalog"}};let C=A;__publicField(C,"instance");const _=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new _(t)),this.instance}getBaseAddress(){return this.getConfig().getCmdb()+"/db/instance"}};let m=_;__publicField(m,"instance");const b=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new b(t)),this.instance}getBaseAddress(){return this.getConfig().getUaa()+"/authorize/constant/enums"}};let I=b;__publicField(I,"instance");const B=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new B(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/constants/enums"}};let S=B;__publicField(S,"instance");const U=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new U(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/organization"}};let y=U;__publicField(y,"instance");const H=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new H(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/department"}};let F=H;__publicField(F,"instance");const P=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new P(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/employee"}getAssignedAddress(){return this.getBaseAddress()+"/assigned"}getAllocatableAddress(){return this.getBaseAddress()+"/allocatable"}getEmployeeNamePath(t){return this.getParamPath(this.getBaseAddress(),t)}fetchByEmployeeName(t){return this.getConfig().getHttp().get(this.getEmployeeNamePath(t))}fetchAssignedByPage(t,e={}){const s=Object.assign(t,e);return this.getConfig().getHttp().get(this.getAssignedAddress(),s)}deleteAllocatable(t){return this.getConfig().getHttp().delete(this.getAllocatableAddress(),t)}saveAllocatable(t){return this.getConfig().getHttp().post(this.getAllocatableAddress(),t)}authorizeUser(e){return this.getConfig().getHttp().put(this.getBaseAddress(),e,{contentType:t.ContentTypeEnum.URL_ENCODED})}};let v=P;__publicField(v,"instance");const E=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new E(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/"}};let w=E;__publicField(w,"instance");const x=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new x(t)),this.instance}getBaseAddress(){return"/oss/minio/bucket"}remove(t){return this.getConfig().getHttp().delete(this.getBaseAddress(),t)}};let O=x;__publicField(O,"instance");const T=class extends Service{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new T(t)),this.instance}getBaseAddress(){return"/oss/minio/multipart"}getCreateMultipartUploadAddress(){return this.getBaseAddress()+"/create"}getCompleteMultipartUploadAddress(){return this.getBaseAddress()+"/complete"}createMultipartUpload(t){return this.getConfig().getHttp().post(this.getCreateMultipartUploadAddress(),t)}completeMultipartUpload(t){return this.getConfig().getHttp().post(this.getCompleteMultipartUploadAddress(),t)}};let L=T;__publicField(L,"instance");const R=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new R(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/authority"}};let N=R;__publicField(N,"instance");const D=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new D(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/default-role"}};let z=D;__publicField(z,"instance");const G=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new G(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/role"}getRoleCodePath(t){return this.getParamPath(this.getBaseAddress(),t)}fetchByRoleCode(t){return this.getConfig().getHttp().get(this.getRoleCodePath(t))}};let j=G;__publicField(j,"instance");const M=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new M(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/security-attribute"}};let W=M;__publicField(W,"instance");const k=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new k(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/user"}getUsernameAddress(){return this.getBaseAddress()+"/sign-in"}getChangePasswordAddress(){return this.getBaseAddress()+"/change-password"}getUsernamePath(t){return this.getParamPath(this.getUsernameAddress(),t)}fetchByUsername(t){return this.getConfig().getHttp().get(this.getUsernamePath(t))}changePassword(e,s){return this.getConfig().getHttp().put(this.getChangePasswordAddress(),{userId:e,password:s},{contentType:t.ContentTypeEnum.URL_ENCODED})}};let J=k;__publicField(J,"instance");const K=class extends BaseService{constructor(t){super(t)}static getInstance(t){return null==this.instance&&(this.instance=new K(t)),this.instance}getBaseAddress(){return this.getConfig().getUpms()+"/element"}fetchById(t){return this.getConfig().getHttp().get(this.getIdPath(t))}};let q=K;__publicField(q,"instance");const V=class{constructor(t){__publicField(this,"config",{}),this.config=t}static getInstance(t){return null==this.instance&&(this.instance=new V(t)),this.instance}createSession(t=""){const e=this.config.getUaa()+"/open/identity/session";return this.config.getHttp().post(e,{clientId:this.config.getClientId(),clientSecret:this.config.getClientSecret(),sessionId:t})}exchange(t="",e){const s=this.config.getUaa()+"/open/identity/exchange";return this.config.getHttp().post(s,{confidential:e,sessionId:t})}getPrompt(t){const e=this.config.getUaa()+"/open/identity/prompt";return this.config.getHttp().post(e,{username:t})}createCaptcha(t,e){const s=this.config.getUaa()+"/open/captcha";return this.config.getHttp().get(s,{identity:t,category:e})}verifyCaptcha(t,s,n){const i=this.config.getUaa()+"/open/captcha",r={identity:t,category:s,coordinate:{x:0,y:0},coordinates:[],characters:""};return s===e.WORD_CLICK?r.coordinates=n:s===e.JIGSAW?r.coordinate=n:r.characters=n,this.config.getHttp().post(i,r)}createVerificationCode(e){const s=this.config.getUpms()+"/open/identity/verification-code";return this.config.getHttp().post(s,{mobile:e},{contentType:t.ContentTypeEnum.URL_ENCODED})}getSocialList(){const t=this.config.getUpms()+"/open/identity/sources";return this.config.getHttp().get(t)}};let Q=V;__publicField(Q,"instance");const X=class{constructor(t){__publicField(this,"config",{}),this.config=t}static getInstance(t){return null==this.instance&&(this.instance=new X(t)),this.instance}open(){return Q.getInstance(this.config)}application(){return n.getInstance(this.config)}scope(){return r.getInstance(this.config)}token(){return a.getInstance(this.config)}compliance(){return o.getInstance(this.config)}server(){return u.getInstance(this.config)}applicaiton(){return l.getInstance(this.config)}account(){return f.getInstance(this.config)}catalog(){return C.getInstance(this.config)}instance(){return m.getInstance(this.config)}uaa(){return I.getInstance(this.config)}upms(){return S.getInstance(this.config)}organization(){return y.getInstance(this.config)}department(){return F.getInstance(this.config)}employee(){return v.getInstance(this.config)}allocatable(){return w.getInstance(this.config)}bucket(){return O.getInstance(this.config)}multipart(){return L.getInstance(this.config)}authority(){return N.getInstance(this.config)}defaultRole(){return z.getInstance(this.config)}element(){return q.getInstance(this.config)}securityAttribute(){return W.getInstance(this.config)}role(){return j.getInstance(this.config)}user(){return J.getInstance(this.config)}};let Y=X;__publicField(Y,"instance");return(t,e,s,n)=>{const i=new ApiConfig(t,e,s,n);return Y.getInstance(i)}}));
