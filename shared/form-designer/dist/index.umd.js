!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("quasar"),require("vue"),require("pinia"),require("@herodotus/core"),require("@herodotus/form-engine"),require("@herodotus/components"),require("vuedraggable")):"function"==typeof define&&define.amd?define(["exports","quasar","vue","pinia","@herodotus/core","@herodotus/form-engine","@herodotus/components","vuedraggable"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self)["@herodotus/form-designer"]={},e.quasar,e.vue,e.pinia,e.HerodotusCore,e.HerodotusFormEngine,e.HerodotusComponents,e.vuedraggable)}(this,(function(e,l,t,o,a,d,n,r){"use strict";const i={HideBottomSpace:"hide-bottom-space",ItemAligned:"item-aligned"},s=o.defineStore("FormDesignerCanvas",{state:()=>({isClosed:!1,canvasElements:[],sheet:{},selectedElement:{},id:"",name:"",activityName:""}),getters:{isSelected:e=>l=>!(a.lodash.isEmpty(e.selectedElement)||!e.selectedElement.id)&&e.selectedElement.config.renderKey===l,isEmptyCanvas:e=>a.lodash.isEmpty(e.canvasElements),getElements:e=>e.canvasElements,currentSchema(){return a.lodash.isEmpty(this.selectedElement)||a.lodash.isEmpty(this.selectedElement.schema)?{}:this.selectedElement.schema},currentConfig(){return a.lodash.isEmpty(this.selectedElement)||a.lodash.isEmpty(this.selectedElement.config)?{}:this.selectedElement.config},currentPanel(){return a.lodash.isEmpty(this.currentConfig)||a.lodash.isEmpty(this.currentConfig.panel)?"INFORMATION_PANEL":this.currentConfig.panel},isInformationPanel(){return"INFORMATION_PANEL"===this.currentPanel},condition(){return a.lodash.isEmpty(this.sheet.condition)&&(this.sheet.condition={variable:"",options:[]}),this.sheet.condition}},actions:{selectElement(e){this.selectedElement=e},selectFirstElement(){a.lodash.isEmpty(this.canvasElements)||this.selectElement(this.canvasElements[0])},loading(e){a.lodash.isEmpty(e.modeler)||(this.canvasElements=e.modeler.elements,this.sheet=e.modeler.sheet),this.id=e.id,this.name=e.name,this.activityName=e.activityName,this.selectFirstElement()},compose(){return{id:this.id,name:this.name,activityName:this.activityName,modeler:{elements:this.canvasElements,sheet:this.sheet}}},addElement(e){void 0===this.canvasElements&&(this.canvasElements=[]),this.canvasElements.push(e),this.selectElement(e)},removeElement(e){!a.lodash.isEmpty(this.canvasElements)&&e.id&&(a.lodash.remove(this.canvasElements,(l=>l.id===e.id)),this.selectFirstElement())}}}),m=o.defineStore("FormDesignerResources",{state:()=>({resources:{}}),getters:{dynamicForm:e=>e.resources.dynamicForm()},actions:{init(e){this.resources=e}}}),u=(e,l)=>{const t=e.__vccOpts||e;for(const[o,a]of l)t[o]=a;return t};const c=u(t.defineComponent({name:"HFormInformation",setup(e,{emit:l}){const o=s(),{id:a,name:d,activityName:n}=o,r=t.ref(null),i=t.ref(null);return{id:a,name:d,activityName:n,nameRef:r,activityNameRef:i,validate:()=>{const e=r.value,l=i.value;return e.validate(),l.validate(),!e.hasError&&!l.hasError}}}}),[["render",function(e,o,a,d,n,r){const i=l.QInput,s=l.QList;return t.openBlock(),t.createBlock(s,null,{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.id,"onUpdate:modelValue":o[0]||(o[0]=l=>e.id=l),dense:"",outlined:"",label:"ID"},null,8,["modelValue"]),t.createVNode(i,{ref:"nameRef",modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=l=>e.name=l),dense:"",outlined:"",label:"表单名称",rules:[e=>!!e||"表单名称不能为空"]},null,8,["modelValue","rules"]),t.createVNode(i,{ref:"activityNameRef",modelValue:e.activityName,"onUpdate:modelValue":o[2]||(o[2]=l=>e.activityName=l),dense:"",outlined:"",label:"流程节点名称",rules:[e=>!!e||"流程节点不能为空"]},null,8,["modelValue","rules"])])),_:1})}]]),p=t.defineComponent({name:"HFormUploadDialog",components:{HFormInformation:c},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","update:open","save"],setup(e,{emit:l}){const o=t.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),d=t.ref(null),n=m(),r=s();return{isOpen:o,onSave:()=>{if(d.value){if(d.value.validate()){const e=r.compose();n.dynamicForm.saveOrUpdate(e).then((e=>{o.value=!1,a.Swal.fire({title:"保存成功！",text:"您是否需要关闭设计器？",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}}).then((e=>{e.value&&(r.isClosed=!0)}))})).catch((e=>{o.value=!1,a.toast.error("保存失败！")}))}}},infoRef:d}}}),V=t.createElementVNode("div",{class:"text-h6"},"上传表单",-1);const f=u(p,[["render",function(e,o,a,d,n,r){const i=l.QSpace,s=l.QBtn,m=l.QCardSection,u=c,p=l.QCardActions,f=l.QCard,h=l.QDialog;return t.openBlock(),t.createBlock(h,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:t.withCtx((()=>[t.createVNode(f,{style:{width:"20vw"}},{default:t.withCtx((()=>[t.createVNode(m,{class:"row items-center q-pb-none"},{default:t.withCtx((()=>[V,t.createVNode(i),t.createVNode(s,{icon:"close",flat:"",round:"",dense:"",onClick:o[0]||(o[0]=l=>e.isOpen=!1)})])),_:1}),t.createVNode(m,null,{default:t.withCtx((()=>[t.createVNode(u,{ref:"infoRef"},null,512)])),_:1}),t.createVNode(p,{align:"right"},{default:t.withCtx((()=>[t.createVNode(s,{label:"取消",color:"red",onClick:o[1]||(o[1]=l=>e.isOpen=!1)}),t.createVNode(s,{label:"保存",color:"primary",onClick:o[2]||(o[2]=l=>e.onSave())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}]]);const h=u(t.defineComponent({name:"HCanvasLayout"}),[["render",function(e,o,a,d,n,r){const i=l.QCard,s=l.QPage,m=l.QPageContainer;return t.openBlock(),t.createBlock(m,null,{default:t.withCtx((()=>[t.createVNode(s,null,{default:t.withCtx((()=>[t.createVNode(i,{class:"q-ma-md"},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"default")])),_:3})])),_:3})])),_:3})}]]);const b=u(t.defineComponent({name:"HExpansionItem",props:{headerClass:{type:String,default:"text-primary"}}}),[["render",function(e,o,a,d,n,r){const i=l.QCardSection,s=l.QCard,m=l.QExpansionItem;return t.openBlock(),t.createBlock(m,t.mergeProps({"expand-separator":"","header-class":e.headerClass},e.$attrs),{default:t.withCtx((()=>[t.createVNode(s,null,{default:t.withCtx((()=>[t.createVNode(i,null,{default:t.withCtx((()=>[t.renderSlot(e.$slots,"default")])),_:3})])),_:3})])),_:3},16,["header-class"])}]]),N=t.defineComponent({name:"HFormPreviewDialog",components:{HRendererForm:d.HRendererForm},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const o=s(),{canvasElements:a}=o,d=t.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),n=t.ref({});return{isOpen:d,state:n,canvasElements:a,onClose:()=>{d.value=!1}}}}),C=t.createElementVNode("div",{class:"text-h6"},"预览",-1);const v=u(N,[["render",function(e,o,a,d,n,r){const i=l.QSpace,s=l.QBtn,m=l.QCardSection,u=t.resolveComponent("h-renderer-form"),c=l.QCardActions,p=l.QCard,V=l.QDialog;return t.openBlock(),t.createBlock(V,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:t.withCtx((()=>[t.createVNode(p,null,{default:t.withCtx((()=>[t.createVNode(m,{class:"row items-center q-pb-none"},{default:t.withCtx((()=>[C,t.createVNode(i),t.createVNode(s,{icon:"close",flat:"",round:"",dense:"",onClick:o[0]||(o[0]=l=>e.onClose())})])),_:1}),t.createVNode(m,null,{default:t.withCtx((()=>[t.createVNode(u,{modelValue:e.state,"onUpdate:modelValue":o[1]||(o[1]=l=>e.state=l),elements:e.canvasElements},null,8,["modelValue","elements"])])),_:1}),t.createVNode(c,{align:"right",class:"bg-white text-red"},{default:t.withCtx((()=>[t.createVNode(s,{flat:"",label:"确定",onClick:o[2]||(o[2]=l=>e.onClose())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}]]);const g=u(t.defineComponent({name:"HCanvasElement",components:{HRendererEngine:d.HRendererEngine},props:{element:{type:Object,required:!0},selectedId:{type:Number,required:!0}},setup(e){const l=t.ref(!1),o=s();return{isHover:l,schemas:t.computed((()=>[e.element.schema])),isSelected:t.computed((()=>o.isSelected(e.selectedId))),onDelete:()=>{o.removeElement(e.element)}}}}),[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-renderer-engine"),s=l.QBtn,m=l.QCardActions,u=l.QCard;return t.openBlock(),t.createBlock(u,{class:t.normalizeClass([e.isSelected&&!e.isHover?"canvas-item-selected":"canvas-item"]),onMouseover:o[0]||(o[0]=l=>e.isHover=!0),onMouseleave:o[1]||(o[1]=l=>e.isHover=!1)},{default:t.withCtx((()=>[t.createVNode(i,{schemas:e.schemas},null,8,["schemas"]),e.isHover?(t.openBlock(),t.createBlock(m,{key:0,class:"justify-end q-pa-none"},{default:t.withCtx((()=>[t.createVNode(s,{flat:"",round:"",size:"sm",color:"red",icon:"mdi-delete",onClick:e.onDelete},null,8,["onClick"]),t.createVNode(s,{flat:"",round:"",size:"sm",color:"accent",icon:"bookmark"}),t.createVNode(s,{flat:"",round:"",size:"sm",color:"primary",icon:"share"})])),_:1})):t.createCommentVNode("",!0)])),_:1},8,["class"])}],["__scopeId","data-v-c2ab7fab"]]),w=t.defineComponent({name:"HCanvasContainer",components:{Draggable:r,HCanvasElement:g,HCanvasLayout:h},setup(e){const l=s(),{canvasElements:o}=l;return{isEmptyCanvas:t.computed((()=>l.isEmptyCanvas)),canvasElements:o,onSelectedItem:e=>{l.selectElement(e)}}}}),E=(e=>(t.pushScopeId("data-v-54c2f724"),e=e(),t.popScopeId(),e))((()=>t.createElementVNode("div",{class:"row text-center canvas-container"},[t.createElementVNode("div",{class:"col-12 self-center text-h6 text-weight-medium text-grey-5"},"从左侧拖拽或点击来添加字段")],-1)));const y=u(w,[["render",function(e,l,o,a,d,n){const r=g,i=t.resolveComponent("draggable"),s=h;return t.openBlock(),t.createBlock(s,null,{default:t.withCtx((()=>[t.createVNode(i,{"item-key":"id",list:e.canvasElements,animation:300,group:"widgetGroup",class:"canvas-container"},t.createSlots({item:t.withCtx((({element:l})=>[(t.openBlock(),t.createBlock(r,{element:l,key:l.config.renderKey,"selected-id":l.config.renderKey,onClick:t=>e.onSelectedItem(l)},null,8,["element","selected-id","onClick"]))])),_:2},[e.isEmptyCanvas?{name:"footer",fn:t.withCtx((()=>[E])),key:"0"}:void 0]),1032,["list"])])),_:1})}],["__scopeId","data-v-54c2f724"]]);const T=u(t.defineComponent({name:"HConditionVariable",components:{HExpansionItem:b,HTextField:n.HTextField},setup(e){const l=s(),{condition:o}=l,a=t.ref([{label:"option1",value:!0},{label:"option2",value:!1}]);return{tableColumns:[{align:"center",name:"label",field:"calories",label:"标签"},{align:"center",name:"value",field:"fat",label:"值"}],tableRows:a,condition:o,onModify:()=>{o.options=a.value}}}}),[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=l.QInput,m=l.QPopupEdit,u=l.QTd,c=l.QTr,p=l.QTable,V=b;return t.openBlock(),t.createBlock(V,{icon:"mdi-variable",label:"流程变量"},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.condition.variable,"onUpdate:modelValue":o[0]||(o[0]=l=>e.condition.variable=l),dense:"",label:"变量名称"},null,8,["modelValue"]),t.createVNode(p,{rows:e.tableRows,columns:e.tableColumns,"row-key":"name",dense:"",flat:"",bordered:"","hide-pagination":"","card-container-class":"q-ml-2"},{body:t.withCtx((l=>[t.createVNode(c,{props:l},{default:t.withCtx((()=>[t.createVNode(u,{key:"label",props:l},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(l.row.label)+" ",1),t.createVNode(m,{modelValue:l.row.label,"onUpdate:modelValue":[e=>l.row.label=e,e.onModify],title:"修改标签",buttons:"","label-set":"确定","label-cancel":"取消"},{default:t.withCtx((e=>[t.createVNode(s,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),t.createVNode(u,{key:"value",props:l},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(l.row.value),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1})}]]);const U=u(t.defineComponent({name:"HSheetPanel",components:{HConditionVariable:T}}),[["render",function(e,o,a,d,n,r){const i=T,s=l.QList;return t.openBlock(),t.createBlock(s,{bordered:""},{default:t.withCtx((()=>[t.createVNode(i)])),_:1})}]]),x=t.defineComponent({name:"HDatePanel",components:{HExpansionItem:b,HSwitch:n.HSwitch,HTextField:n.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:i,properties:t.computed((()=>e.schema.attrs)),models:t.computed((()=>e.schema.models))})}),S={class:"q-gutter-y-sm column"},B={class:"q-gutter-y-sm column"};const _=u(x,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=b,m=t.resolveComponent("h-switch"),u=l.QList;return t.openBlock(),t.createBlock(u,{bordered:""},{default:t.withCtx((()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])])),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx((()=>[t.createElementVNode("div",S,[t.createVNode(m,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])])),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx((()=>[t.createElementVNode("div",B,[t.createVNode(m,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])])),_:1})])),_:1})}]]),k=t.defineComponent({name:"HPasswordPanel",components:{HExpansionItem:b,HSwitch:n.HSwitch,HTextField:n.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:i,properties:t.computed((()=>e.schema.attrs)),models:t.computed((()=>e.schema.models))})}),I={class:"q-gutter-y-sm column"},H={class:"q-gutter-y-sm column"};const D=u(k,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=b,m=t.resolveComponent("h-switch"),u=l.QList;return t.openBlock(),t.createBlock(u,{bordered:""},{default:t.withCtx((()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])])),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx((()=>[t.createElementVNode("div",I,[t.createVNode(m,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])])),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx((()=>[t.createElementVNode("div",H,[t.createVNode(m,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])])),_:1})])),_:1})}]]),R=t.defineComponent({name:"HTextareaPanel",components:{HExpansionItem:b,HSwitch:n.HSwitch,HTextField:n.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:i,properties:t.computed((()=>e.schema.attrs)),models:t.computed((()=>e.schema.models))})}),A={class:"q-gutter-y-sm column"},q={class:"q-gutter-y-sm column"};const Q=u(R,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=b,m=t.resolveComponent("h-switch"),u=l.QList;return t.openBlock(),t.createBlock(u,{bordered:""},{default:t.withCtx((()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])])),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx((()=>[t.createElementVNode("div",A,[t.createVNode(m,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])])),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx((()=>[t.createElementVNode("div",q,[t.createVNode(m,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])])),_:1})])),_:1})}]]),F=t.defineComponent({name:"HTextFieldPanel",components:{HExpansionItem:b,HSwitch:n.HSwitch,HTextField:n.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:i,properties:t.computed((()=>e.schema.attrs)),models:t.computed((()=>e.schema.models))})}),O={class:"q-gutter-y-sm column"},P={class:"q-gutter-y-sm column"};const j=u(F,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=b,m=t.resolveComponent("h-switch"),u=l.QList;return t.openBlock(),t.createBlock(u,{bordered:""},{default:t.withCtx((()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])])),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx((()=>[t.createElementVNode("div",O,[t.createVNode(m,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])])),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx((()=>[t.createElementVNode("div",P,[t.createVNode(m,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])])),_:1})])),_:1})}]]),L=t.defineComponent({name:"HTimePanel",components:{HExpansionItem:b,HSwitch:n.HSwitch,HTextField:n.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:i,properties:t.computed((()=>e.schema.attrs)),models:t.computed((()=>e.schema.models))})}),W={class:"q-gutter-y-sm column"},M={class:"q-gutter-y-sm column"};const G=u({name:"HGeneratorLayout",components:{HSheetPanel:U,HFormInformation:c,DATE_PICKER:_,PASSWORD:D,TEXT_AREA:Q,TEXT_FIELD:j,TIME_PICKER:u(L,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=b,m=t.resolveComponent("h-switch"),u=l.QList;return t.openBlock(),t.createBlock(u,{bordered:""},{default:t.withCtx((()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx((()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])])),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx((()=>[t.createElementVNode("div",W,[t.createVNode(m,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])])),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx((()=>[t.createElementVNode("div",M,[t.createVNode(m,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(m,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])])),_:1})])),_:1})}]])},setup(){const e=s(),{isInformationPanel:l,currentSchema:a,currentPanel:d}=o.storeToRefs(e);return{formTab:t.ref("info"),elementTab:t.ref("display"),isInformationPanel:l,currentSchema:a,currentPanel:d}}},[["render",function(e,o,a,d,n,r){const i=l.QTab,s=l.QTabs,m=l.QSeparator,u=c,p=l.QTabPanel,V=l.QTabPanels,f=l.QCard,h=U;return d.isInformationPanel?(t.openBlock(),t.createBlock(f,{key:0},{default:t.withCtx((()=>[t.createVNode(s,{modelValue:d.formTab,"onUpdate:modelValue":o[0]||(o[0]=e=>d.formTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t.withCtx((()=>[t.createVNode(i,{name:"info",label:"信息"})])),_:1},8,["modelValue"]),t.createVNode(m),t.createVNode(V,{modelValue:d.formTab,"onUpdate:modelValue":o[1]||(o[1]=e=>d.formTab=e),animated:""},{default:t.withCtx((()=>[t.createVNode(p,{name:"info"},{default:t.withCtx((()=>[t.createVNode(u)])),_:1})])),_:1},8,["modelValue"])])),_:1})):(t.openBlock(),t.createBlock(f,{key:1},{default:t.withCtx((()=>[t.createVNode(s,{modelValue:d.elementTab,"onUpdate:modelValue":o[2]||(o[2]=e=>d.elementTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t.withCtx((()=>[t.createVNode(i,{name:"display",label:"显示"}),t.createVNode(i,{name:"sheet",label:"表单"})])),_:1},8,["modelValue"]),t.createVNode(m),t.createVNode(V,{modelValue:d.elementTab,"onUpdate:modelValue":o[3]||(o[3]=e=>d.elementTab=e),animated:""},{default:t.withCtx((()=>[t.createVNode(p,{name:"display",class:"q-pa-none"},{default:t.withCtx((()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(d.currentPanel),{schema:d.currentSchema},null,8,["schema"]))])),_:1}),t.createVNode(p,{name:"sheet",class:"q-pa-none"},{default:t.withCtx((()=>[t.createVNode(h)])),_:1})])),_:1},8,["modelValue"])])),_:1}))}]]),$=t.defineComponent({name:"HWidgetPanel",components:{Draggable:r},setup(){const e=d.WIDGET_DEFINITIONS,l=s(),t=e=>d.ElementUtils.create(e);return{widgetGroups:e,cloneWidget:t,addWidget:e=>{const o=t(e);l.addElement(o)}}}}),z={class:"widget-list"},K={class:"widget-title"},X=["onClick"],J={class:"widget-body"};const Y=u($,[["render",function(e,o,a,d,n,r){const i=l.QIcon,s=t.resolveComponent("draggable");return t.openBlock(),t.createElementBlock("div",z,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.widgetGroups,((l,o)=>(t.openBlock(),t.createElementBlock("div",{key:o},[t.createElementVNode("div",K,t.toDisplayString(l.title),1),t.createVNode(s,{modelValue:l.list,"onUpdate:modelValue":e=>l.list=e,"item-key":"schemaName",draggable:".widget-item",sort:!1,group:{name:"widgetGroup",pull:"clone",put:!1},clone:e.cloneWidget},{item:t.withCtx((({element:l})=>[t.createElementVNode("div",{class:"widget-item",onClick:t=>e.addWidget(l)},[t.createElementVNode("div",J,[t.createVNode(i,{name:l.icon},null,8,["name"]),t.createTextVNode(" "+t.toDisplayString(l.title),1)])],8,X)])),_:2},1032,["modelValue","onUpdate:modelValue","clone"])])))),128))])}],["__scopeId","data-v-8d89d665"]]);const Z=u(t.defineComponent({name:"HDynamicForms",components:{HWidgetPanel:Y,HPropertyPanel:G,HCanvasContainer:y,HFormPreviewDialog:v,HFormUploadDialog:f},props:{instance:{type:Object,required:!0},title:{type:String,default:"Dante Cloud Form Designer"},container:{type:Boolean,default:!1},height:{type:String,default:"90vh"},item:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:l}){const o=t.ref(!1),a=t.ref(!1),d=t.ref(!1),n=t.ref(!1),r=m(),i=s();return t.watch((()=>e.item),(l=>{r.init(e.instance),i.loading(l)}),{deep:!0,immediate:!0}),t.watch((()=>i.isClosed),(e=>{e&&l("close")})),t.onUnmounted((()=>{r.$reset(),i.$reset()})),{leftDrawerOpen:o,toggleLeftDrawer(){o.value=!o.value},rightDrawerOpen:a,toggleRightDrawer(){a.value=!a.value},openPreview:d,openUpload:n}}}),[["render",function(e,o,a,d,n,r){const i=l.QBtn,s=l.QToolbarTitle,m=l.QToolbar,u=l.QHeader,c=Y,p=l.QDrawer,V=G,h=y,b=v,N=f,C=l.QLayout;return t.openBlock(),t.createBlock(C,{view:"lHr LpR lfr",container:e.container,class:"bg-grey-2",style:t.normalizeStyle(`height: ${e.height}`)},{default:t.withCtx((()=>[t.createVNode(u,{bordered:"",class:"text-primary bg-white"},{default:t.withCtx((()=>[t.createVNode(m,null,{default:t.withCtx((()=>[t.createVNode(i,{dense:"",flat:"",round:"",icon:"menu",onClick:o[0]||(o[0]=l=>e.leftDrawerOpen=!e.leftDrawerOpen)}),t.createVNode(s,null,{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(e.title),1)])),_:1}),t.createVNode(i,{flat:"",round:"",dense:"",icon:"mdi-eye",class:"q-mr-xs",onClick:o[1]||(o[1]=l=>e.openPreview=!0)}),t.createVNode(i,{flat:"",round:"",dense:"",icon:"mdi-cloud-upload",onClick:o[2]||(o[2]=l=>e.openUpload=!0)})])),_:1})])),_:1}),t.createVNode(p,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:""},{default:t.withCtx((()=>[t.createVNode(c)])),_:1},8,["modelValue"]),t.createVNode(p,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[4]||(o[4]=l=>e.rightDrawerOpen=l),side:"right",behavior:"desktop",bordered:""},{default:t.withCtx((()=>[t.createVNode(V)])),_:1},8,["modelValue"]),t.createVNode(h),t.createVNode(b,{modelValue:e.openPreview,"onUpdate:modelValue":o[5]||(o[5]=l=>e.openPreview=l)},null,8,["modelValue"]),t.createVNode(N,{modelValue:e.openUpload,"onUpdate:modelValue":o[6]||(o[6]=l=>e.openUpload=l)},null,8,["modelValue"])])),_:1},8,["container","style"])}]]);Z.install=e=>{e.component(Z.name,Z)};const ee=[Z],le={install:e=>{ee.map((l=>e.component(l.name,l)))}};Object.defineProperty(e,"Swal",{enumerable:!0,get:()=>a.Swal}),Object.defineProperty(e,"lodash",{enumerable:!0,get:()=>a.lodash}),Object.defineProperty(e,"toast",{enumerable:!0,get:()=>a.toast}),Object.defineProperty(e,"ElementUtils",{enumerable:!0,get:()=>d.ElementUtils}),Object.defineProperty(e,"WIDGET_DEFINITIONS",{enumerable:!0,get:()=>d.WIDGET_DEFINITIONS}),e.Attributes=i,e.HDynamicForms=Z,e.default=le,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
